var exchangeWidget=function(){"use strict";var a=function(){},o={},c=[],l=[];function u(t,n){var e,i,r,o,u=l;for(o=arguments.length;2<o--;)c.push(arguments[o]);for(n&&null!=n.children&&(c.length||c.push(n.children),delete n.children);c.length;)if((i=c.pop())&&void 0!==i.pop)for(o=i.length;o--;)c.push(i[o]);else"boolean"==typeof i&&(i=null),(r="function"!=typeof t)&&(null==i?i="":"number"==typeof i?i=String(i):"string"!=typeof i&&(r=!1)),r&&e?u[u.length-1]+=i:u===l?u=[i]:u.push(i),e=r;var s=new a;return s.nodeName=t,s.children=u,s.attributes=null==n?void 0:n,s.key=null==n?void 0:n.key,s}function A(t,n){for(var e in n)t[e]=n[e];return t}function h(t,n){null!=t&&("function"==typeof t?t(n):t.current=n)}var n="function"==typeof Promise?Promise.resolve().then.bind(Promise.resolve()):setTimeout,f=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,e=[];function s(t){!t._dirty&&(t._dirty=!0)&&1==e.push(t)&&n(i)}function i(){for(var t;t=e.pop();)t._dirty&&D(t)}function x(t,n){return t.normalizedNodeName===n||t.nodeName.toLowerCase()===n.toLowerCase()}function T(t){var n=A({},t.attributes);n.children=t.children;var e=t.nodeName.defaultProps;if(void 0!==e)for(var i in e)void 0===n[i]&&(n[i]=e[i]);return n}function C(t){var n=t.parentNode;n&&n.removeChild(t)}function p(t,n,e,i,r){if("className"===n&&(n="class"),"key"===n);else if("ref"===n)h(e,null),h(i,t);else if("class"!==n||r)if("style"===n){if(i&&"string"!=typeof i&&"string"!=typeof e||(t.style.cssText=i||""),i&&"object"==typeof i){if("string"!=typeof e)for(var o in e)o in i||(t.style[o]="");for(var o in i)t.style[o]="number"==typeof i[o]&&!1===f.test(o)?i[o]+"px":i[o]}}else if("dangerouslySetInnerHTML"===n)i&&(t.innerHTML=i.__html||"");else if("o"==n[0]&&"n"==n[1]){var u=n!==(n=n.replace(/Capture$/,""));n=n.toLowerCase().substring(2),i?e||t.addEventListener(n,_,u):t.removeEventListener(n,_,u),(t._listeners||(t._listeners={}))[n]=i}else if("list"!==n&&"type"!==n&&!r&&n in t){try{t[n]=null==i?"":i}catch(t){}null!=i&&!1!==i||"spellcheck"==n||t.removeAttribute(n)}else{var s=r&&n!==(n=n.replace(/^xlink:?/,""));null==i||!1===i?s?t.removeAttributeNS("http://www.w3.org/1999/xlink",n.toLowerCase()):t.removeAttribute(n):"function"!=typeof i&&(s?t.setAttributeNS("http://www.w3.org/1999/xlink",n.toLowerCase(),i):t.setAttribute(n,i))}else t.className=i||""}function _(t){return this._listeners[t.type](t)}var O=[],P=0,v=!1,y=!1;function V(){for(var t;t=O.shift();)t.componentDidMount&&t.componentDidMount()}function I(t,n,e,i,r,o){P++||(v=null!=r&&void 0!==r.ownerSVGElement,y=null!=t&&!("__preactattr_"in t));var u=L(t,n,e,i,o);return r&&u.parentNode!==r&&r.appendChild(u),--P||(y=!1,o||V()),u}function L(t,n,e,i,r){var o=t,u=v;if(null!=n&&"boolean"!=typeof n||(n=""),"string"==typeof n||"number"==typeof n)return t&&void 0!==t.splitText&&t.parentNode&&(!t._component||r)?t.nodeValue!=n&&(t.nodeValue=n):(o=document.createTextNode(n),t&&(t.parentNode&&t.parentNode.replaceChild(o,t),N(t,!0))),o.__preactattr_=!0,o;var s,a,c=n.nodeName;if("function"==typeof c)return function(t,n,e,i){var r=t&&t._component,o=r,u=t,s=r&&t._componentConstructor===n.nodeName,a=s,c=T(n);for(;r&&!a&&(r=r._parentComponent);)a=r.constructor===n.nodeName;r&&a&&(!i||r._component)?(j(r,c,3,e,i),t=r.base):(o&&!s&&($(o),t=u=null),r=M(n.nodeName,c,e),t&&!r.nextBase&&(r.nextBase=t,u=null),j(r,c,1,e,i),t=r.base,u&&t!==u&&(u._component=null,N(u,!1)));return t}(t,n,e,i);if(v="svg"===c||"foreignObject"!==c&&v,c=String(c),(!t||!x(t,c))&&(s=c,(a=v?document.createElementNS("http://www.w3.org/2000/svg",s):document.createElement(s)).normalizedNodeName=s,o=a,t)){for(;t.firstChild;)o.appendChild(t.firstChild);t.parentNode&&t.parentNode.replaceChild(o,t),N(t,!0)}var l=o.firstChild,h=o.__preactattr_,f=n.children;if(null==h){h=o.__preactattr_={};for(var _=o.attributes,d=_.length;d--;)h[_[d].name]=_[d].value}return!y&&f&&1===f.length&&"string"==typeof f[0]&&null!=l&&void 0!==l.splitText&&null==l.nextSibling?l.nodeValue!=f[0]&&(l.nodeValue=f[0]):(f&&f.length||null!=l)&&function(t,n,e,i,r){var o,u,s,a,c,l=t.childNodes,h=[],f={},_=0,d=0,p=l.length,v=0,y=n?n.length:0;if(0!==p)for(var m=0;m<p;m++){var g=l[m],b=g.__preactattr_,E=y&&b?g._component?g._component.__key:b.key:null;null!=E?(_++,f[E]=g):(b||(void 0!==g.splitText?!r||g.nodeValue.trim():r))&&(h[v++]=g)}if(0!==y)for(var m=0;m<y;m++){a=n[m],c=null;var E=a.key;if(null!=E)_&&void 0!==f[E]&&(c=f[E],f[E]=void 0,_--);else if(d<v)for(o=d;o<v;o++)if(void 0!==h[o]&&(w=u=h[o],k=r,"string"==typeof(S=a)||"number"==typeof S?void 0!==w.splitText:"string"==typeof S.nodeName?!w._componentConstructor&&x(w,S.nodeName):k||w._componentConstructor===S.nodeName)){c=u,h[o]=void 0,o===v-1&&v--,o===d&&d++;break}c=L(c,a,e,i),s=l[m],c&&c!==t&&c!==s&&(null==s?t.appendChild(c):c===s.nextSibling?C(s):t.insertBefore(c,s))}var w,S,k;if(_)for(var m in f)void 0!==f[m]&&N(f[m],!1);for(;d<=v;)void 0!==(c=h[v--])&&N(c,!1)}(o,f,e,i,y||null!=h.dangerouslySetInnerHTML),function(t,n,e){var i;for(i in e)n&&null!=n[i]||null==e[i]||p(t,i,e[i],e[i]=void 0,v);for(i in n)"children"===i||"innerHTML"===i||i in e&&n[i]===("value"===i||"checked"===i?t[i]:e[i])||p(t,i,e[i],e[i]=n[i],v)}(o,n.attributes,h),v=u,o}function N(t,n){var e=t._component;e?$(e):(null!=t.__preactattr_&&h(t.__preactattr_.ref,null),!1!==n&&null!=t.__preactattr_||C(t),r(t))}function r(t){for(t=t.lastChild;t;){var n=t.previousSibling;N(t,!0),t=n}}var d=[];function M(t,n,e){var i,r=d.length;for(t.prototype&&t.prototype.render?(i=new t(n,e),g.call(i,n,e)):((i=new g(n,e)).constructor=t,i.render=m);r--;)if(d[r].constructor===t)return i.nextBase=d[r].nextBase,d.splice(r,1),i;return i}function m(t,n,e){return this.constructor(t,e)}function j(t,n,e,i,r){t._disable||(t._disable=!0,t.__ref=n.ref,t.__key=n.key,delete n.ref,delete n.key,void 0===t.constructor.getDerivedStateFromProps&&(!t.base||r?t.componentWillMount&&t.componentWillMount():t.componentWillReceiveProps&&t.componentWillReceiveProps(n,i)),i&&i!==t.context&&(t.prevContext||(t.prevContext=t.context),t.context=i),t.prevProps||(t.prevProps=t.props),t.props=n,t._disable=!1,0!==e&&(1!==e&&!1===o.syncComponentUpdates&&t.base?s(t):D(t,1,r)),h(t.__ref,t))}function D(t,n,e,i){if(!t._disable){var r,o,u,s=t.props,a=t.state,c=t.context,l=t.prevProps||s,h=t.prevState||a,f=t.prevContext||c,_=t.base,d=t.nextBase,p=_||d,v=t._component,y=!1,m=f;if(t.constructor.getDerivedStateFromProps&&(a=A(A({},a),t.constructor.getDerivedStateFromProps(s,a)),t.state=a),_&&(t.props=l,t.state=h,t.context=f,2!==n&&t.shouldComponentUpdate&&!1===t.shouldComponentUpdate(s,a,c)?y=!0:t.componentWillUpdate&&t.componentWillUpdate(s,a,c),t.props=s,t.state=a,t.context=c),t.prevProps=t.prevState=t.prevContext=t.nextBase=null,t._dirty=!1,!y){r=t.render(s,a,c),t.getChildContext&&(c=A(A({},c),t.getChildContext())),_&&t.getSnapshotBeforeUpdate&&(m=t.getSnapshotBeforeUpdate(l,h));var g,b,E=r&&r.nodeName;if("function"==typeof E){var w=T(r);(o=v)&&o.constructor===E&&w.key==o.__key?j(o,w,1,c,!1):(g=o,t._component=o=M(E,w,c),o.nextBase=o.nextBase||d,o._parentComponent=t,j(o,w,0,c,!1),D(o,1,e,!0)),b=o.base}else u=p,(g=v)&&(u=t._component=null),(p||1===n)&&(u&&(u._component=null),b=I(u,r,c,e||!_,p&&p.parentNode,!0));if(p&&b!==p&&o!==v){var S=p.parentNode;S&&b!==S&&(S.replaceChild(b,p),g||(p._component=null,N(p,!1)))}if(g&&$(g),(t.base=b)&&!i){for(var k=t,x=t;x=x._parentComponent;)(k=x).base=b;b._component=k,b._componentConstructor=k.constructor}}for(!_||e?O.push(t):y||t.componentDidUpdate&&t.componentDidUpdate(l,h,m);t._renderCallbacks.length;)t._renderCallbacks.pop().call(t);P||i||V()}}function $(t){var n=t.base;t._disable=!0,t.componentWillUnmount&&t.componentWillUnmount(),t.base=null;var e=t._component;e?$(e):n&&(null!=n.__preactattr_&&h(n.__preactattr_.ref,null),C(t.nextBase=n),d.push(t),r(n)),h(t.__ref,null)}function g(t,n){this._dirty=!0,this.context=n,this.props=t,this.state=this.state||{},this._renderCallbacks=[]}function b(t,n,e){return I(e,t,{},!1,n,!1)}function E(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function w(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function S(t,n,e){return n&&w(t.prototype,n),e&&w(t,e),t}function k(){return(k=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t}).apply(this,arguments)}function F(r){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{},n=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(o).filter(function(t){return Object.getOwnPropertyDescriptor(o,t).enumerable}))),n.forEach(function(t){var n,e,i;n=r,i=o[e=t],e in n?Object.defineProperty(n,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[e]=i})}return r}function H(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&W(t,n)}function R(t){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function W(t,n){return(W=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}function U(t,n){return!n||"object"!=typeof n&&"function"!=typeof n?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):n}function B(t,n){return K(t)||function(t,n){var e=[],i=!0,r=!1,o=void 0;try{for(var u,s=t[Symbol.iterator]();!(i=(u=s.next()).done)&&(e.push(u.value),!n||e.length!==n);i=!0);}catch(t){r=!0,o=t}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return e}(t,n)||G()}function q(t){return function(t){if(Array.isArray(t)){for(var n=0,e=new Array(t.length);n<t.length;n++)e[n]=t[n];return e}}(t)||z(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function K(t){if(Array.isArray(t))return t}function z(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function G(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function t(t,n){return t(n={exports:{}},n.exports),n.exports}A(g.prototype,{setState:function(t,n){this.prevState||(this.prevState=this.state),this.state=A(A({},this.state),"function"==typeof t?t(this.state,this.props):t),n&&this._renderCallbacks.push(n),s(this)},forceUpdate:function(t){t&&this._renderCallbacks.push(t),D(this,2)},render:function(){}});var X=t(function(t){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)}),Y=t(function(t){var n=t.exports={version:"2.6.3"};"number"==typeof __e&&(__e=n)}),Q=(Y.version,function(t){return"object"==typeof t?null!==t:"function"==typeof t}),J=function(t){if(!Q(t))throw TypeError(t+" is not an object!");return t},Z=function(t){try{return!!t()}catch(t){return!0}},tt=!Z(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),nt=X.document,et=Q(nt)&&Q(nt.createElement),it=function(t){return et?nt.createElement(t):{}},rt=!tt&&!Z(function(){return 7!=Object.defineProperty(it("div"),"a",{get:function(){return 7}}).a}),ot=function(t,n){if(!Q(t))return t;var e,i;if(n&&"function"==typeof(e=t.toString)&&!Q(i=e.call(t)))return i;if("function"==typeof(e=t.valueOf)&&!Q(i=e.call(t)))return i;if(!n&&"function"==typeof(e=t.toString)&&!Q(i=e.call(t)))return i;throw TypeError("Can't convert object to primitive value")},ut=Object.defineProperty,st={f:tt?Object.defineProperty:function(t,n,e){if(J(t),n=ot(n,!0),J(e),rt)try{return ut(t,n,e)}catch(t){}if("get"in e||"set"in e)throw TypeError("Accessors not supported!");return"value"in e&&(t[n]=e.value),t}},at=function(t,n){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:n}},ct=tt?function(t,n,e){return st.f(t,n,at(1,e))}:function(t,n,e){return t[n]=e,t},lt={}.hasOwnProperty,ht=function(t,n){return lt.call(t,n)},ft=0,_t=Math.random(),dt=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++ft+_t).toString(36))},pt=t(function(t){var o=dt("src"),n="toString",e=Function[n],u=(""+e).split(n);Y.inspectSource=function(t){return e.call(t)},(t.exports=function(t,n,e,i){var r="function"==typeof e;r&&(ht(e,"name")||ct(e,"name",n)),t[n]!==e&&(r&&(ht(e,o)||ct(e,o,t[n]?""+t[n]:u.join(String(n)))),t===X?t[n]=e:i?t[n]?t[n]=e:ct(t,n,e):(delete t[n],ct(t,n,e)))})(Function.prototype,n,function(){return"function"==typeof this&&this[o]||e.call(this)})}),vt=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t},yt=function(i,r,t){if(vt(i),void 0===r)return i;switch(t){case 1:return function(t){return i.call(r,t)};case 2:return function(t,n){return i.call(r,t,n)};case 3:return function(t,n,e){return i.call(r,t,n,e)}}return function(){return i.apply(r,arguments)}},mt="prototype",gt=function(t,n,e){var i,r,o,u,s=t&gt.F,a=t&gt.G,c=t&gt.S,l=t&gt.P,h=t&gt.B,f=a?X:c?X[n]||(X[n]={}):(X[n]||{})[mt],_=a?Y:Y[n]||(Y[n]={}),d=_[mt]||(_[mt]={});for(i in a&&(e=n),e)o=((r=!s&&f&&void 0!==f[i])?f:e)[i],u=h&&r?yt(o,X):l&&"function"==typeof o?yt(Function.call,o):o,f&&pt(f,i,o,t&gt.U),_[i]!=o&&ct(_,i,u),l&&d[i]!=o&&(d[i]=o)};X.core=Y,gt.F=1,gt.G=2,gt.S=4,gt.P=8,gt.B=16,gt.W=32,gt.U=64,gt.R=128;var bt=gt,Et=function(t,n,e){var i=void 0===e;switch(n.length){case 0:return i?t():t.call(e);case 1:return i?t(n[0]):t.call(e,n[0]);case 2:return i?t(n[0],n[1]):t.call(e,n[0],n[1]);case 3:return i?t(n[0],n[1],n[2]):t.call(e,n[0],n[1],n[2]);case 4:return i?t(n[0],n[1],n[2],n[3]):t.call(e,n[0],n[1],n[2],n[3])}return t.apply(e,n)},wt=[].slice,St={},kt=Function.bind||function(n){var e=vt(this),i=wt.call(arguments,1),r=function(){var t=i.concat(wt.call(arguments));return this instanceof r?function(t,n,e){if(!(n in St)){for(var i=[],r=0;r<n;r++)i[r]="a["+r+"]";St[n]=Function("F,a","return new F("+i.join(",")+")")}return St[n](t,e)}(e,t.length,t):Et(e,t,n)};return Q(e.prototype)&&(r.prototype=e.prototype),r};bt(bt.P,"Function",{bind:kt});var xt={},At=JSON.stringify;(function(t){for(var n=".",e=0;e<t.length;e++)n+=t[e].length+","+t[e];return(xt[n]||(xt[n]=function(t){for(var n,e,i,r,o,u=0,s="return ",a="",c="",l=0,h="",f="",_="",d=0,p=function(){i?9===u?(l++&&(s+=","),s+="h("+(c||At(a)),u=0):13===u||0===u&&"..."===a?(0===u?(_||(_=")",h=h?"Object.assign("+h:"Object.assign({}"),h+=f+","+c,f=""):r&&(h+=h?","+(f?"":"{"):"{",f="}",h+=At(r)+":",h+=c||(o||a)&&At(a)||"true",r=""),o=!1):0===u&&(u=13,r=a,a=c="",p(),u=0):(c||(a=a.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))&&(l++&&(s+=","),s+=c||At(a)),a=c=""},v=0;v<t.length;v++){0<v&&(i||p(),c="$["+v+"]",p());for(var y=0;y<t[v].length;y++){if(e=t[v].charCodeAt(y),i){if(39===e||34===e){if(d===e){d=0;continue}if(0===d){d=e;continue}}if(0===d)switch(e){case 62:p(),47!==u&&(s+=h?","+h+f+_:",null"),n&&(s+=")"),i=0,h="",u=1;continue;case 61:u=13,o=!0,r=a,a="";continue;case 47:n||(n=!0,9!==u||a.trim()||(a=c="",u=47));continue;case 9:case 10:case 13:case 32:p(),u=0;continue}}else if(60===e){p(),_=f=h="",n=o=!(i=1),u=9;continue}a+=t[v].charAt(y)}}return p(),Function("h","$",s)}(t)))(this,arguments)}).bind(u);var Tt=function(t){function n(){return E(this,n),U(this,R(n).apply(this,arguments))}return H(n,g),S(n,[{key:"componentWillReceiveProps",value:function(t){var n=this;t.visible&&(this.base.classList.remove("hidden"),clearTimeout(this.hidingTimeout),this.hidingTimeout=setTimeout(function(){return n.base.classList.add("hidden")},3e3))}},{key:"componentWillUnmount",value:function(){clearInterval(this.hidingTimeout)}},{key:"render",value:function(t){return u("div",{class:"ErrorIndicator animated ".concat(t.visible?"":"hidden")},u("div",null,t.children))}}]),n}(),Ct={}.toString,Ot=function(t){return Ct.call(t).slice(8,-1)},Pt=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==Ot(t)?t.split(""):Object(t)},Vt=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t},It=function(t){return Object(Vt(t))},Lt=Math.ceil,Nt=Math.floor,Mt=function(t){return isNaN(t=+t)?0:(0<t?Nt:Lt)(t)},jt=Math.min,Dt=function(t){return 0<t?jt(Mt(t),9007199254740991):0},$t=Array.isArray||function(t){return"Array"==Ot(t)},Ft=t(function(t){var n="__core-js_shared__",e=X[n]||(X[n]={});(t.exports=function(t,n){return e[t]||(e[t]=void 0!==n?n:{})})("versions",[]).push({version:Y.version,mode:"global",copyright:"Â© 2019 Denis Pushkarev (zloirock.ru)"})}),Ht=t(function(t){var n=Ft("wks"),e=X.Symbol,i="function"==typeof e;(t.exports=function(t){return n[t]||(n[t]=i&&e[t]||(i?e:dt)("Symbol."+t))}).store=n}),Rt=Ht("species"),Wt=function(t,n){return $t(e=t)&&("function"!=typeof(i=e.constructor)||i!==Array&&!$t(i.prototype)||(i=void 0),Q(i)&&null===(i=i[Rt])&&(i=void 0)),new(void 0===i?Array:i)(n);var e,i},Ut=function(h,t){var f=1==h,_=2==h,d=3==h,p=4==h,v=6==h,y=5==h||v,m=t||Wt;return function(t,n,e){for(var i,r,o=It(t),u=Pt(o),s=yt(n,e,3),a=Dt(u.length),c=0,l=f?m(t,a):_?m(t,0):void 0;c<a;c++)if((y||c in u)&&(r=s(i=u[c],c,o),h))if(f)l[c]=r;else if(r)switch(h){case 3:return!0;case 5:return i;case 6:return c;case 2:l.push(i)}else if(p)return!1;return v?-1:d||p?p:l}},Bt=function(t,n){return!!t&&Z(function(){n?t.call(null,function(){},1):t.call(null)})},qt=Ut(1);bt(bt.P+bt.F*!Bt([].map,!0),"Array",{map:function(t){return qt(this,t,arguments[1])}});var Kt=function(t){return Pt(Vt(t))},zt=Math.max,Gt=Math.min,Xt=function(c){return function(t,n,e){var i,r,o,u=Kt(t),s=Dt(u.length),a=(r=s,(i=Mt(i=e))<0?zt(i+r,0):Gt(i,r));if(c&&n!=n){for(;a<s;)if((o=u[a++])!=o)return!0}else for(;a<s;a++)if((c||a in u)&&u[a]===n)return c||a||0;return!c&&-1}},Yt=Xt(!1),Qt=[].indexOf,Jt=!!Qt&&1/[1].indexOf(1,-0)<0;bt(bt.P+bt.F*(Jt||!Bt(Qt)),"Array",{indexOf:function(t){return Jt?Qt.apply(this,arguments)||0:Yt(this,t,arguments[1])}});var Zt=Ht("unscopables"),tn=Array.prototype;null==tn[Zt]&&ct(tn,Zt,{});var nn=function(t){tn[Zt][t]=!0},en=Xt(!0);bt(bt.P,"Array",{includes:function(t){return en(this,t,1<arguments.length?arguments[1]:void 0)}}),nn("includes");var rn=Ht("match"),on=function(t){var n;return Q(t)&&(void 0!==(n=t[rn])?!!n:"RegExp"==Ot(t))},un=function(t,n,e){if(on(n))throw TypeError("String#"+e+" doesn't accept regex!");return String(Vt(t))},sn=Ht("match"),an=function(n){var e=/./;try{"/./"[n](e)}catch(t){try{return e[sn]=!1,!"/./"[n](e)}catch(t){}}return!0},cn="includes";bt(bt.P+bt.F*an(cn),"String",{includes:function(t){return!!~un(this,t,cn).indexOf(t,1<arguments.length?arguments[1]:void 0)}});var ln="startsWith",hn=""[ln];bt(bt.P+bt.F*an(ln),"String",{startsWith:function(t){var n=un(this,t,ln),e=Dt(Math.min(1<arguments.length?arguments[1]:void 0,n.length)),i=String(t);return hn?hn.call(n,i,e):n.slice(e,e+i.length)===i}});var fn,_n,dn=Ht("species"),pn=function(t,n){var e,i=J(t).constructor;return void 0===i||null==(e=J(i)[dn])?n:vt(e)},vn=function(s){return function(t,n){var e,i,r=String(Vt(t)),o=Mt(n),u=r.length;return o<0||u<=o?s?"":void 0:(e=r.charCodeAt(o))<55296||56319<e||o+1===u||(i=r.charCodeAt(o+1))<56320||57343<i?s?r.charAt(o):e:s?r.slice(o,o+2):i-56320+(e-55296<<10)+65536}},yn=vn(!0),mn=Ht("toStringTag"),gn="Arguments"==Ot(function(){return arguments}()),bn=function(t){var n,e,i;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(e=function(t,n){try{return t[n]}catch(t){}}(n=Object(t),mn))?e:gn?Ot(n):"Object"==(i=Ot(n))&&"function"==typeof n.callee?"Arguments":i},En=RegExp.prototype.exec,wn=function(t,n){var e=t.exec;if("function"==typeof e){var i=e.call(t,n);if("object"!=typeof i)throw new TypeError("RegExp exec method returned something other than an Object or null");return i}if("RegExp"!==bn(t))throw new TypeError("RegExp#exec called on incompatible receiver");return En.call(t,n)},Sn=RegExp.prototype.exec,kn=String.prototype.replace,xn=Sn,An="lastIndex",Tn=(fn=/a/,_n=/b*/g,Sn.call(fn,"a"),Sn.call(_n,"a"),0!==fn[An]||0!==_n[An]),Cn=void 0!==/()??/.exec("")[1];(Tn||Cn)&&(xn=function(t){var n,e,i,r,o=this;return Cn&&(e=new RegExp("^"+o.source+"$(?!\\s)",function(){var t=J(this),n="";return t.global&&(n+="g"),t.ignoreCase&&(n+="i"),t.multiline&&(n+="m"),t.unicode&&(n+="u"),t.sticky&&(n+="y"),n}.call(o))),Tn&&(n=o[An]),i=Sn.call(o,t),Tn&&i&&(o[An]=o.global?i.index+i[0].length:n),Cn&&i&&1<i.length&&kn.call(i[0],e,function(){for(r=1;r<arguments.length-2;r++)void 0===arguments[r]&&(i[r]=void 0)}),i});var On=xn;bt({target:"RegExp",proto:!0,forced:On!==/./.exec},{exec:On});var Pn=Ht("species"),Vn=!Z(function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}),In=function(){var t=/(?:)/,n=t.exec;t.exec=function(){return n.apply(this,arguments)};var e="ab".split(t);return 2===e.length&&"a"===e[0]&&"b"===e[1]}(),Ln=Math.min,Nn=[].push,Mn="split",jn="length",Dn="lastIndex",$n=4294967295,Fn=!Z(function(){});!function(e,t,n){var i=Ht(e),o=!Z(function(){var t={};return t[i]=function(){return 7},7!=""[e](t)}),r=o?!Z(function(){var t=!1,n=/a/;return n.exec=function(){return t=!0,null},"split"===e&&(n.constructor={},n.constructor[Pn]=function(){return n}),n[i](""),!t}):void 0;if(!o||!r||"replace"===e&&!Vn||"split"===e&&!In){var u=/./[i],s=n(Vt,i,""[e],function(t,n,e,i,r){return n.exec===On?o&&!r?{done:!0,value:u.call(n,e,i)}:{done:!0,value:t.call(e,n,i)}:{done:!1}}),a=s[0],c=s[1];pt(String.prototype,e,a),ct(RegExp.prototype,i,2==t?function(t,n){return c.call(t,this,n)}:function(t){return c.call(t,this)})}}("split",2,function(r,o,m,g){var b;return b="c"=="abbc"[Mn](/(b)*/)[1]||4!="test"[Mn](/(?:)/,-1)[jn]||2!="ab"[Mn](/(?:ab)*/)[jn]||4!="."[Mn](/(.?)(.?)/)[jn]||1<"."[Mn](/()()/)[jn]||""[Mn](/.?/)[jn]?function(t,n){var e=String(this);if(void 0===t&&0===n)return[];if(!on(t))return m.call(e,t,n);for(var i,r,o,u=[],s=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),a=0,c=void 0===n?$n:n>>>0,l=new RegExp(t.source,s+"g");(i=On.call(l,e))&&!(a<(r=l[Dn])&&(u.push(e.slice(a,i.index)),1<i[jn]&&i.index<e[jn]&&Nn.apply(u,i.slice(1)),o=i[0][jn],a=r,u[jn]>=c));)l[Dn]===i.index&&l[Dn]++;return a===e[jn]?!o&&l.test("")||u.push(""):u.push(e.slice(a)),u[jn]>c?u.slice(0,c):u}:"0"[Mn](void 0,0)[jn]?function(t,n){return void 0===t&&0===n?[]:m.call(this,t,n)}:m,[function(t,n){var e=r(this),i=null==t?void 0:t[o];return void 0!==i?i.call(t,e,n):b.call(String(e),t,n)},function(t,n){var e=g(b,t,this,n,b!==m);if(e.done)return e.value;var i=J(t),r=String(this),o=pn(i,RegExp),u=i.unicode,s=(i.ignoreCase?"i":"")+(i.multiline?"m":"")+(i.unicode?"u":"")+(Fn?"y":"g"),a=new o(Fn?i:"^(?:"+i.source+")",s),c=void 0===n?$n:n>>>0;if(0===c)return[];if(0===r.length)return null===wn(a,r)?[r]:[];for(var l,h,f=0,_=0,d=[];_<r.length;){a.lastIndex=Fn?_:0;var p,v=wn(a,Fn?r:r.slice(_));if(null===v||(p=Ln(Dt(a.lastIndex+(Fn?0:_)),r.length))===f)l=r,_=(h=_)+(u?yn(l,h).length:1);else{if(d.push(r.slice(f,_)),d.length===c)return d;for(var y=1;y<=v.length-1;y++)if(d.push(v[y]),d.length===c)return d;_=f=p}}return d.push(r.slice(f)),d}]});var Hn,Rn,Wn,Un,Bn=Ft("keys"),qn=function(t){return Bn[t]||(Bn[t]=dt(t))},Kn=Xt(!1),zn=qn("IE_PROTO"),Gn=function(t,n){var e,i=Kt(t),r=0,o=[];for(e in i)e!=zn&&ht(i,e)&&o.push(e);for(;n.length>r;)ht(i,e=n[r++])&&(~Kn(o,e)||o.push(e));return o},Xn="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),Yn=Object.keys||function(t){return Gn(t,Xn)};Hn="keys",Rn=function(){return function(t){return Yn(It(t))}},Wn=(Y.Object||{})[Hn]||Object[Hn],(Un={})[Hn]=Rn(Wn),bt(bt.S+bt.F*Z(function(){Wn(1)}),"Object",Un);var Qn=function(t,n){return{value:n,done:!!t}},Jn={},Zn=tt?Object.defineProperties:function(t,n){J(t);for(var e,i=Yn(n),r=i.length,o=0;o<r;)st.f(t,e=i[o++],n[e]);return t},te=X.document,ne=te&&te.documentElement,ee=qn("IE_PROTO"),ie=function(){},re="prototype",oe=function(){var t,n=it("iframe"),e=Xn.length;for(n.style.display="none",ne.appendChild(n),n.src="javascript:",(t=n.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),oe=t.F;e--;)delete oe[re][Xn[e]];return oe()},ue=Object.create||function(t,n){var e;return null!==t?(ie[re]=J(t),e=new ie,ie[re]=null,e[ee]=t):e=oe(),void 0===n?e:Zn(e,n)},se=st.f,ae=Ht("toStringTag"),ce=function(t,n,e){t&&!ht(t=e?t:t.prototype,ae)&&se(t,ae,{configurable:!0,value:n})},le={};ct(le,Ht("iterator"),function(){return this});var he=qn("IE_PROTO"),fe=Object.prototype,_e=Object.getPrototypeOf||function(t){return t=It(t),ht(t,he)?t[he]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?fe:null},de=Ht("iterator"),pe=!([].keys&&"next"in[].keys()),ve="values",ye=function(){return this},me=function(t,n,e,i,r,o,u){var s,a,c;a=n,c=i,(s=e).prototype=ue(le,{next:at(1,c)}),ce(s,a+" Iterator");var l,h,f,_=function(t){if(!pe&&t in y)return y[t];switch(t){case"keys":case ve:return function(){return new e(this,t)}}return function(){return new e(this,t)}},d=n+" Iterator",p=r==ve,v=!1,y=t.prototype,m=y[de]||y["@@iterator"]||r&&y[r],g=m||_(r),b=r?p?_("entries"):g:void 0,E="Array"==n&&y.entries||m;if(E&&(f=_e(E.call(new t)))!==Object.prototype&&f.next&&(ce(f,d,!0),"function"!=typeof f[de]&&ct(f,de,ye)),p&&m&&m.name!==ve&&(v=!0,g=function(){return m.call(this)}),(pe||v||!y[de])&&ct(y,de,g),Jn[n]=g,Jn[d]=ye,r)if(l={values:p?g:_(ve),keys:o?g:_("keys"),entries:b},u)for(h in l)h in y||pt(y,h,l[h]);else bt(bt.P+bt.F*(pe||v),n,l);return l},ge=me(Array,"Array",function(t,n){this._t=Kt(t),this._i=0,this._k=n},function(){var t=this._t,n=this._k,e=this._i++;return!t||e>=t.length?(this._t=void 0,Qn(1)):Qn(0,"keys"==n?e:"values"==n?t[e]:[e,t[e]])},"values");Jn.Arguments=Jn.Array,nn("keys"),nn("values"),nn("entries");for(var be=Ht("iterator"),Ee=Ht("toStringTag"),we=Jn.Array,Se={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},ke=Yn(Se),xe=0;xe<ke.length;xe++){var Ae,Te=ke[xe],Ce=Se[Te],Oe=X[Te],Pe=Oe&&Oe.prototype;if(Pe&&(Pe[be]||ct(Pe,be,we),Pe[Ee]||ct(Pe,Ee,Te),Jn[Te]=we,Ce))for(Ae in ge)Pe[Ae]||pt(Pe,Ae,ge[Ae],!0)}var Ve,Ie={f:{}.propertyIsEnumerable},Le=Ie.f,Ne=(Ve=!0,function(t){for(var n,e=Kt(t),i=Yn(e),r=i.length,o=0,u=[];o<r;)Le.call(e,n=i[o++])&&u.push(Ve?[n,e[n]]:e[n]);return u});bt(bt.S,"Object",{entries:function(t){return Ne(t)}});var Me=Ut(2);bt(bt.P+bt.F*!Bt([].filter,!0),"Array",{filter:function(t){return Me(this,t,arguments[1])}});var je,De,$e,Fe=function(t,n,e,i){if(!(t instanceof n)||void 0!==i&&i in t)throw TypeError(e+": incorrect invocation!");return t},He=function(n,t,e,i){try{return i?t(J(e)[0],e[1]):t(e)}catch(t){var r=n.return;throw void 0!==r&&J(r.call(n)),t}},Re=Ht("iterator"),We=Array.prototype,Ue=Ht("iterator"),Be=Y.getIteratorMethod=function(t){if(null!=t)return t[Ue]||t["@@iterator"]||Jn[bn(t)]},qe=t(function(t){var _={},d={},n=t.exports=function(t,n,e,i,r){var o,u,s,a,c,l=r?function(){return t}:Be(t),h=yt(e,i,n?2:1),f=0;if("function"!=typeof l)throw TypeError(t+" is not iterable!");if(void 0===(c=l)||Jn.Array!==c&&We[Re]!==c){for(s=l.call(t);!(u=s.next()).done;)if((a=He(s,h,u.value,n))===_||a===d)return a}else for(o=Dt(t.length);f<o;f++)if((a=n?h(J(u=t[f])[0],u[1]):h(t[f]))===_||a===d)return a};n.BREAK=_,n.RETURN=d}),Ke=X.process,ze=X.setImmediate,Ge=X.clearImmediate,Xe=X.MessageChannel,Ye=X.Dispatch,Qe=0,Je={},Ze="onreadystatechange",ti=function(){var t=+this;if(Je.hasOwnProperty(t)){var n=Je[t];delete Je[t],n()}},ni=function(t){ti.call(t.data)};ze&&Ge||(ze=function(t){for(var n=[],e=1;arguments.length>e;)n.push(arguments[e++]);return Je[++Qe]=function(){Et("function"==typeof t?t:Function(t),n)},je(Qe),Qe},Ge=function(t){delete Je[t]},"process"==Ot(Ke)?je=function(t){Ke.nextTick(yt(ti,t,1))}:Ye&&Ye.now?je=function(t){Ye.now(yt(ti,t,1))}:Xe?($e=(De=new Xe).port2,De.port1.onmessage=ni,je=yt($e.postMessage,$e,1)):X.addEventListener&&"function"==typeof postMessage&&!X.importScripts?(je=function(t){X.postMessage(t+"","*")},X.addEventListener("message",ni,!1)):je=Ze in it("script")?function(t){ne.appendChild(it("script"))[Ze]=function(){ne.removeChild(this),ti.call(t)}}:function(t){setTimeout(yt(ti,t,1),0)});var ei={set:ze,clear:Ge},ii=ei.set,ri=X.MutationObserver||X.WebKitMutationObserver,oi=X.process,ui=X.Promise,si="process"==Ot(oi);function ai(t){var e,i;this.promise=new t(function(t,n){if(void 0!==e||void 0!==i)throw TypeError("Bad Promise constructor");e=t,i=n}),this.resolve=vt(e),this.reject=vt(i)}var ci={f:function(t){return new ai(t)}},li=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}},hi=X.navigator,fi=hi&&hi.userAgent||"",_i=function(t,n,e){for(var i in n)pt(t,i,n[i],e);return t},di=Ht("species"),pi=function(t){var n=X[t];tt&&n&&!n[di]&&st.f(n,di,{configurable:!0,get:function(){return this}})},vi=Ht("iterator"),yi=!1;try{[7][vi]().return=function(){yi=!0}}catch(At){}var mi,gi,bi,Ei,wi=function(t,n){if(!n&&!yi)return!1;var e=!1;try{var i=[7],r=i[vi]();r.next=function(){return{done:e=!0}},i[vi]=function(){return r},t(i)}catch(t){}return e},Si=ei.set,ki=function(){var e,i,r,t=function(){var t,n;for(si&&(t=oi.domain)&&t.exit();e;){n=e.fn,e=e.next;try{n()}catch(t){throw e?r():i=void 0,t}}i=void 0,t&&t.enter()};if(si)r=function(){oi.nextTick(t)};else if(!ri||X.navigator&&X.navigator.standalone)if(ui&&ui.resolve){var n=ui.resolve(void 0);r=function(){n.then(t)}}else r=function(){ii.call(X,t)};else{var o=!0,u=document.createTextNode("");new ri(t).observe(u,{characterData:!0}),r=function(){u.data=o=!o}}return function(t){var n={fn:t,next:void 0};i&&(i.next=n),e||(e=n,r()),i=n}}(),xi="Promise",Ai=X.TypeError,Ti=X.process,Ci=Ti&&Ti.versions,Oi=Ci&&Ci.v8||"",Pi=X[xi],Vi="process"==bn(Ti),Ii=function(){},Li=gi=ci.f,Ni=!!function(){try{var t=Pi.resolve(1),n=(t.constructor={})[Ht("species")]=function(t){t(Ii,Ii)};return(Vi||"function"==typeof PromiseRejectionEvent)&&t.then(Ii)instanceof n&&0!==Oi.indexOf("6.6")&&-1===fi.indexOf("Chrome/66")}catch(t){}}(),Mi=function(t){var n;return!(!Q(t)||"function"!=typeof(n=t.then))&&n},ji=function(l,e){if(!l._n){l._n=!0;var i=l._c;ki(function(){for(var a=l._v,c=1==l._s,t=0,n=function(t){var n,e,i,r=c?t.ok:t.fail,o=t.resolve,u=t.reject,s=t.domain;try{r?(c||(2==l._h&&Fi(l),l._h=1),!0===r?n=a:(s&&s.enter(),n=r(a),s&&(s.exit(),i=!0)),n===t.promise?u(Ai("Promise-chain cycle")):(e=Mi(n))?e.call(n,o,u):o(n)):u(a)}catch(t){s&&!i&&s.exit(),u(t)}};i.length>t;)n(i[t++]);l._c=[],l._n=!1,e&&!l._h&&Di(l)})}},Di=function(o){Si.call(X,function(){var t,n,e,i=o._v,r=$i(o);if(r&&(t=li(function(){Vi?Ti.emit("unhandledRejection",i,o):(n=X.onunhandledrejection)?n({promise:o,reason:i}):(e=X.console)&&e.error&&e.error("Unhandled promise rejection",i)}),o._h=Vi||$i(o)?2:1),o._a=void 0,r&&t.e)throw t.v})},$i=function(t){return 1!==t._h&&0===(t._a||t._c).length},Fi=function(n){Si.call(X,function(){var t;Vi?Ti.emit("rejectionHandled",n):(t=X.onrejectionhandled)&&t({promise:n,reason:n._v})})},Hi=function(t){var n=this;n._d||(n._d=!0,(n=n._w||n)._v=t,n._s=2,n._a||(n._a=n._c.slice()),ji(n,!0))},Ri=function(t){var e,i=this;if(!i._d){i._d=!0,i=i._w||i;try{if(i===t)throw Ai("Promise can't be resolved itself");(e=Mi(t))?ki(function(){var n={_w:i,_d:!1};try{e.call(t,yt(Ri,n,1),yt(Hi,n,1))}catch(t){Hi.call(n,t)}}):(i._v=t,i._s=1,ji(i,!1))}catch(t){Hi.call({_w:i,_d:!1},t)}}};Ni||(Pi=function(t){Fe(this,Pi,xi,"_h"),vt(t),mi.call(this);try{t(yt(Ri,this,1),yt(Hi,this,1))}catch(t){Hi.call(this,t)}},(mi=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=_i(Pi.prototype,{then:function(t,n){var e=Li(pn(this,Pi));return e.ok="function"!=typeof t||t,e.fail="function"==typeof n&&n,e.domain=Vi?Ti.domain:void 0,this._c.push(e),this._a&&this._a.push(e),this._s&&ji(this,!1),e.promise},catch:function(t){return this.then(void 0,t)}}),bi=function(){var t=new mi;this.promise=t,this.resolve=yt(Ri,t,1),this.reject=yt(Hi,t,1)},ci.f=Li=function(t){return t===Pi||t===Ei?new bi(t):gi(t)}),bt(bt.G+bt.W+bt.F*!Ni,{Promise:Pi}),ce(Pi,xi),pi(xi),Ei=Y[xi],bt(bt.S+bt.F*!Ni,xi,{reject:function(t){var n=Li(this);return(0,n.reject)(t),n.promise}}),bt(bt.S+bt.F*!Ni,xi,{resolve:function(t){return function(t,n){if(J(t),Q(n)&&n.constructor===t)return n;var e=ci.f(t);return(0,e.resolve)(n),e.promise}(this,t)}}),bt(bt.S+bt.F*!(Ni&&wi(function(t){Pi.all(t).catch(Ii)})),xi,{all:function(t){var u=this,n=Li(u),s=n.resolve,a=n.reject,e=li(function(){var i=[],r=0,o=1;qe(t,!1,function(t){var n=r++,e=!1;i.push(void 0),o++,u.resolve(t).then(function(t){e||(e=!0,i[n]=t,--o||s(i))},a)}),--o||s(i)});return e.e&&a(e.v),n.promise},race:function(t){var n=this,e=Li(n),i=e.reject,r=li(function(){qe(t,!1,function(t){n.resolve(t).then(e.resolve,i)})});return r.e&&i(r.v),e.promise}});var Wi=st.f,Ui=Function.prototype,Bi=/^\s*function ([^ (]*)/;"name"in Ui||tt&&Wi(Ui,"name",{configurable:!0,get:function(){try{return(""+this).match(Bi)[1]}catch(t){return""}}});function qi(t){var n=arguments.length,e=void 0,i=void 0;for(e=1;e<n;e++)for(i in arguments[e])t[i]=arguments[e][i];return t}function Ki(t,n){var e,i,r=arguments.length,o=void 0;for(t.prototype=(e=n.prototype,(i=function(){}).prototype=e,new i),t.prototype.constructor=t,o=2;o<r;o++)qi(t.prototype,arguments[o]);return t}var zi=["<nothing>"],Gi="end",Xi="value",Yi="error",Qi="any";function Ji(t,n){var e=void 0,i=void 0,r=void 0,o=void 0;if(0===t.length)return n;if(0===n.length)return t;for(o=0,e=new Array(t.length+n.length),i=t.length,r=0;r<i;r++,o++)e[o]=t[r];for(i=n.length,r=0;r<i;r++,o++)e[o]=n[r];return e}function Zi(t,n){var e=t.length,i=void 0;for(i=0;i<e;i++)if(t[i]===n)return i;return-1}function tr(t,n){var e=t.length,i=void 0;for(i=0;i<e;i++)if(n(t[i]))return i;return-1}function nr(t){var n=t.length,e=new Array(n),i=void 0;for(i=0;i<n;i++)e[i]=t[i];return e}function er(t,n){var e=t.length,i=void 0,r=void 0,o=void 0;if(0<=n&&n<e){if(1===e)return[];for(i=new Array(e-1),o=r=0;r<e;r++)r!==n&&(i[o]=t[r],o++);return i}return t}function ir(t,n){var e=t.length,i=new Array(e),r=void 0;for(r=0;r<e;r++)i[r]=n(t[r]);return i}function rr(t,n,e){t===Qi?n(e):t===e.type&&(t===Xi||t===Yi?n(e.value):n())}function or(){this._items=[],this._spies=[],this._inLoop=0,this._removedItems=null}function ur(){this._dispatcher=new or,this._active=!1,this._alive=!0,this._activating=!1,this._logHandlers=null,this._spyHandlers=null}function sr(){ur.call(this)}function ar(){ur.call(this),this._currentEvent=null}qi(or.prototype,{add:function(t,n){return this._items=Ji(this._items,[{type:t,fn:n}]),this._items.length},remove:function(n,e){var t=tr(this._items,function(t){return t.type===n&&t.fn===e});return 0!==this._inLoop&&-1!==t&&(null===this._removedItems&&(this._removedItems=[]),this._removedItems.push(this._items[t])),this._items=er(this._items,t),this._items.length},addSpy:function(t){return this._spies=Ji(this._spies,[t]),this._spies.length},removeSpy:function(t){return this._spies=er(this._spies,this._spies.indexOf(t)),this._spies.length},dispatch:function(t){this._inLoop++;for(var n=0,e=this._spies;null!==this._spies&&n<e.length;n++)e[n](t);for(var i=0,r=this._items;i<r.length&&null!==this._items;i++)null!==this._removedItems&&(o=this._removedItems,u=r[i],-1!==Zi(o,u))||rr(r[i].type,r[i].fn,t);var o,u;this._inLoop--,0===this._inLoop&&(this._removedItems=null)},cleanup:function(){this._items=null,this._spies=null}}),qi(ur.prototype,{_name:"observable",_onActivation:function(){},_onDeactivation:function(){},_setActive:function(t){this._active!==t&&((this._active=t)?(this._activating=!0,this._onActivation(),this._activating=!1):this._onDeactivation())},_clear:function(){this._setActive(!1),this._dispatcher.cleanup(),this._dispatcher=null,this._logHandlers=null},_emit:function(t,n){switch(t){case Xi:return this._emitValue(n);case Yi:return this._emitError(n);case Gi:return this._emitEnd()}},_emitValue:function(t){this._alive&&this._dispatcher.dispatch({type:Xi,value:t})},_emitError:function(t){this._alive&&this._dispatcher.dispatch({type:Yi,value:t})},_emitEnd:function(){this._alive&&(this._alive=!1,this._dispatcher.dispatch({type:Gi}),this._clear())},_on:function(t,n){return this._alive?(this._dispatcher.add(t,n),this._setActive(!0)):rr(t,n,{type:Gi}),this},_off:function(t,n){this._alive&&(0===this._dispatcher.remove(t,n)&&this._setActive(!1));return this},onValue:function(t){return this._on(Xi,t)},onError:function(t){return this._on(Yi,t)},onEnd:function(t){return this._on(Gi,t)},onAny:function(t){return this._on(Qi,t)},offValue:function(t){return this._off(Xi,t)},offError:function(t){return this._off(Yi,t)},offEnd:function(t){return this._off(Gi,t)},offAny:function(t){return this._off(Qi,t)},observe:function(t,n,e){var i=this,r=!1,o=t&&"function"!=typeof t?t:{value:t,error:n,end:e},u=function(t){t.type===Gi&&(r=!0),t.type===Xi&&o.value?o.value(t.value):t.type===Yi&&o.error?o.error(t.value):t.type===Gi&&o.end&&o.end(t.value)};return this.onAny(u),{unsubscribe:function(){r||(i.offAny(u),r=!0)},get closed(){return r}}},_ofSameType:function(t,n){return t.prototype.getType()===this.getType()?t:n},setName:function(t,n){return this._name=n?t._name+"."+n:t,this},log:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.toString(),i=void 0,t=function(t){var n="<"+t.type+(i?":current":"")+">";t.type===Gi?console.log(e,n):console.log(e,n,t.value)};return this._alive&&(this._logHandlers||(this._logHandlers=[]),this._logHandlers.push({name:e,handler:t})),i=!0,this.onAny(t),i=!1,this},offLog:function(){var n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.toString();if(this._logHandlers){var t=tr(this._logHandlers,function(t){return t.name===n});-1!==t&&(this.offAny(this._logHandlers[t].handler),this._logHandlers.splice(t,1))}return this},spy:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.toString(),t=function(t){var n="<"+t.type+">";t.type===Gi?console.log(e,n):console.log(e,n,t.value)};return this._alive&&(this._spyHandlers||(this._spyHandlers=[]),this._spyHandlers.push({name:e,handler:t}),this._dispatcher.addSpy(t)),this},offSpy:function(){var n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.toString();if(this._spyHandlers){var t=tr(this._spyHandlers,function(t){return t.name===n});-1!==t&&(this._dispatcher.removeSpy(this._spyHandlers[t].handler),this._spyHandlers.splice(t,1))}return this}}),ur.prototype.toString=function(){return"["+this._name+"]"},Ki(sr,ur,{_name:"stream",getType:function(){return"stream"}}),Ki(ar,ur,{_name:"property",_emitValue:function(t){this._alive&&(this._currentEvent={type:Xi,value:t},this._activating||this._dispatcher.dispatch({type:Xi,value:t}))},_emitError:function(t){this._alive&&(this._currentEvent={type:Yi,value:t},this._activating||this._dispatcher.dispatch({type:Yi,value:t}))},_emitEnd:function(){this._alive&&(this._alive=!1,this._activating||this._dispatcher.dispatch({type:Gi}),this._clear())},_on:function(t,n){return this._alive&&(this._dispatcher.add(t,n),this._setActive(!0)),null!==this._currentEvent&&rr(t,n,this._currentEvent),this._alive||rr(t,n,{type:Gi}),this},getType:function(){return"property"}});var cr=new sr;function lr(){return cr}function hr(t){function n(t,n){var e=this;sr.call(this),this._wait=t,this._intervalId=null,this._$onTick=function(){return e._onTick()},this._init(n)}return Ki(n,sr,{_init:function(){},_free:function(){},_onTick:function(){},_onActivation:function(){this._intervalId=setInterval(this._$onTick,this._wait)},_onDeactivation:function(){null!==this._intervalId&&(clearInterval(this._intervalId),this._intervalId=null)},_clear:function(){sr.prototype._clear.call(this),this._$onTick=null,this._free()}},t),n}cr._emitEnd(),cr._name="never";var fr=hr({_name:"later",_init:function(t){var n=t.x;this._x=n},_free:function(){this._x=null},_onTick:function(){this._emitValue(this._x),this._emitEnd()}});var _r=hr({_name:"interval",_init:function(t){var n=t.x;this._x=n},_free:function(){this._x=null},_onTick:function(){this._emitValue(this._x)}});var dr=hr({_name:"sequentially",_init:function(t){var n=t.xs;this._xs=nr(n)},_free:function(){this._xs=null},_onTick:function(){1===this._xs.length?(this._emitValue(this._xs[0]),this._emitEnd()):this._emitValue(this._xs.shift())}});var pr=hr({_name:"fromPoll",_init:function(t){var n=t.fn;this._fn=n},_free:function(){this._fn=null},_onTick:function(){var t=this._fn;this._emitValue(t())}});function vr(n){function t(t){return n._emitValue(t),n._active}function e(t){return n._emit(t.type,t.value),n._active}return{value:t,error:function(t){return n._emitError(t),n._active},end:function(){return n._emitEnd(),n._active},event:e,emit:t,emitEvent:e}}var yr=hr({_name:"withInterval",_init:function(t){var n=t.fn;this._fn=n,this._emitter=vr(this)},_free:function(){this._fn=null,this._emitter=null},_onTick:function(){(0,this._fn)(this._emitter)}});function mr(t){sr.call(this),this._fn=t,this._unsubscribe=null}function gr(t){return new mr(t)}function br(n,t){switch(t){case 0:return function(){return n()};case 1:return function(t){return n(t[0])};case 2:return function(t){return n(t[0],t[1])};case 3:return function(t){return n(t[0],t[1],t[2])};case 4:return function(t){return n(t[0],t[1],t[2],t[3])};default:return function(t){return n.apply(null,t)}}}Ki(mr,sr,{_name:"stream",_onActivation:function(){var t=(0,this._fn)(vr(this));this._unsubscribe="function"==typeof t?t:null,this._active||this._callUnsubscribe()},_callUnsubscribe:function(){null!==this._unsubscribe&&(this._unsubscribe(),this._unsubscribe=null)},_onDeactivation:function(){this._callUnsubscribe()},_clear:function(){sr.prototype._clear.call(this),this._fn=null}});var Er=[["addEventListener","removeEventListener"],["addListener","removeListener"],["on","off"]];function wr(t){this._currentEvent={type:"value",value:t,current:!0}}function Sr(t){return new wr(t)}function kr(t){this._currentEvent={type:"error",value:t,current:!0}}function xr(i,r){return function(t,n){var e=this;i.call(this),this._source=t,this._name=t._name+"."+r,this._init(n),this._$handleAny=function(t){return e._handleAny(t)}}}function Ar(t){return{_init:function(){},_free:function(){},_handleValue:function(t){this._emitValue(t)},_handleError:function(t){this._emitError(t)},_handleEnd:function(){this._emitEnd()},_handleAny:function(t){switch(t.type){case Xi:return this._handleValue(t.value);case Yi:return this._handleError(t.value);case Gi:return this._handleEnd()}},_onActivation:function(){this._source.onAny(this._$handleAny)},_onDeactivation:function(){this._source.offAny(this._$handleAny)},_clear:function(){t.prototype._clear.call(this),this._source=null,this._$handleAny=null,this._free()}}}function Tr(t,n){var e=xr(sr,t);return Ki(e,sr,Ar(sr),n),e}function Cr(t,n){var e=xr(ar,t);return Ki(e,ar,Ar(ar),n),e}Ki(wr,ar,{_name:"constant",_active:!1,_activating:!1,_alive:!1,_dispatcher:null,_logHandlers:null}),Ki(kr,ar,{_name:"constantError",_active:!1,_activating:!1,_alive:!1,_dispatcher:null,_logHandlers:null});var Or=Cr("toProperty",{_init:function(t){var n=t.fn;this._getInitialCurrent=n},_onActivation:function(){if(null!==this._getInitialCurrent){var t=this._getInitialCurrent;this._emitValue(t())}this._source.onAny(this._$handleAny)}});function Pr(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;if(null!==n&&"function"!=typeof n)throw new Error("You should call toProperty() with a function or no arguments.");return new Or(t,{fn:n})}var Vr=Tr("changes",{_handleValue:function(t){this._activating||this._emitValue(t)},_handleError:function(t){this._activating||this._emitError(t)}});var Ir=function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){if("function"==typeof Promise)return Promise;throw new Error("There isn't default Promise, use shim or parameter")}(),i=null;return new n(function(n,e){t.onAny(function(t){i=t.type===Gi&&null!==i?((i.type===Xi?n:e)(i.value),null):t})})},Lr="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function Nr(t,n){return t(n={exports:{}},n.exports),n.exports}var Mr=Nr(function(t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){var n,e=t.Symbol;"function"==typeof e?e.observable?n=e.observable:(n=e("observable"),e.observable=n):n="@@observable";return n}}),jr=Nr(function(t,n){Object.defineProperty(n,"__esModule",{value:!0});var e,i,r=(e=Mr)&&e.__esModule?e:{default:e};i="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==Lr?Lr:t;var o=(0,r.default)(i);n.default=o}),Dr=jr.default?jr.default:jr;function $r(t){this._observable=t.takeErrors(1)}function Fr(){return new $r(this)}function Hr(t,n,e){for(var i in t)t.hasOwnProperty(i)&&(n.push(i),e.push(t[i]))}function Rr(t,n,e){var i=this;sr.call(this),this._activeCount=t.length,this._sources=Ji(t,n),this._combinator=e,this._aliveCount=0,this._latestValues=new Array(this._sources.length),this._latestErrors=new Array(this._sources.length),function(t,n){var e=t.length,i=void 0;for(i=0;i<e;i++)t[i]=n}(this._latestValues,zi),this._emitAfterActivation=!1,this._endAfterActivation=!1,this._latestErrorIndex=0,this._$handlers=[];for(var r=function(n){i._$handlers.push(function(t){return i._handleAny(n,t)})},o=0;o<this._sources.length;o++)r(o)}function Wr(t,n,e){return"function"==typeof n&&(e=n,n=void 0),Array.isArray(t)?function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],e=arguments[2];if(!Array.isArray(n))throw new Error("Combine can only combine active and passive collections of the same type.");return e=e?br(e,t.length+n.length):function(t){return t},0===t.length?lr():new Rr(t,n,e)}(t,n,e):function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=arguments[2];if("object"!=typeof n||Array.isArray(n))throw new Error("Combine can only combine active and passive collections of the same type.");var r=[],e=[],o=[];return Hr(t,r,e),Hr(n,r,o),0===e.length?lr():new Rr(e,o,function(t){for(var n={},e=t.length-1;0<=e;e--)n[r[e]]=t[e];return i?i(n):n})}(t,n,e)}qi($r.prototype,{subscribe:function(t,n,e){var i=this,r="function"==typeof t?{next:t,error:n,complete:e}:t,o=function(t){t.type===Gi&&(u=!0),t.type===Xi&&r.next?r.next(t.value):t.type===Yi&&r.error?r.error(t.value):t.type===Gi&&r.complete&&r.complete(t.value)};this._observable.onAny(o);var u=!1;return{unsubscribe:function(){u=!0,i._observable.offAny(o)},get closed(){return u}}}}),$r.prototype[Dr]=function(){return this},Ki(Rr,sr,{_name:"combine",_onActivation:function(){this._aliveCount=this._activeCount;for(var t=this._activeCount;t<this._sources.length;t++)this._sources[t].onAny(this._$handlers[t]);for(var n=0;n<this._activeCount;n++)this._sources[n].onAny(this._$handlers[n]);this._emitAfterActivation&&(this._emitAfterActivation=!1,this._emitIfFull()),this._endAfterActivation&&this._emitEnd()},_onDeactivation:function(){var t=this._sources.length,n=void 0;for(n=0;n<t;n++)this._sources[n].offAny(this._$handlers[n])},_emitIfFull:function(){for(var t=!0,n=!1,e=this._latestValues.length,i=new Array(e),r=new Array(e),o=0;o<e;o++)i[o]=this._latestValues[o],r[o]=this._latestErrors[o],i[o]===zi&&(t=!1),void 0!==r[o]&&(n=!0);if(t){var u=this._combinator;this._emitValue(u(i))}n&&this._emitError(function(t){for(var n=void 0,e=0;e<t.length;e++)void 0!==t[e]&&(void 0===n||n.index<t[e].index)&&(n=t[e]);return n.error}(r))},_handleAny:function(t,n){n.type===Xi||n.type===Yi?(n.type===Xi&&(this._latestValues[t]=n.value,this._latestErrors[t]=void 0),n.type===Yi&&(this._latestValues[t]=zi,this._latestErrors[t]={index:this._latestErrorIndex++,error:n.value}),t<this._activeCount&&(this._activating?this._emitAfterActivation=!0:this._emitIfFull())):t<this._activeCount&&(this._aliveCount--,0===this._aliveCount&&(this._activating?this._endAfterActivation=!0:this._emitEnd()))},_clear:function(){sr.prototype._clear.call(this),this._sources=null,this._latestValues=null,this._latestErrors=null,this._combinator=null,this._$handlers=null}});var Ur={empty:function(){return lr()},concat:function(t,n){return t.merge(n)},of:function(t){return Sr(t)},map:function(t,n){return n.map(t)},bimap:function(t,n,e){return e.mapErrors(t).map(n)},ap:function(t,n){return Wr([t,n],function(t,n){return t(n)})},chain:function(t,n){return n.flatMap(t)}},Br=Object.freeze({Observable:Ur}),qr={_init:function(t){var n=t.fn;this._fn=n},_free:function(){this._fn=null},_handleValue:function(t){var n=this._fn;this._emitValue(n(t))}},Kr=Tr("map",qr),zr=Cr("map",qr),Gr=function(t){return t};function Xr(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:Gr;return new(t._ofSameType(Kr,zr))(t,{fn:n})}var Yr={_init:function(t){var n=t.fn;this._fn=n},_free:function(){this._fn=null},_handleValue:function(t){(0,this._fn)(t)&&this._emitValue(t)}},Qr=Tr("filter",Yr),Jr=Cr("filter",Yr),Zr=function(t){return t};var to={_init:function(t){var n=t.n;(this._n=n)<=0&&this._emitEnd()},_handleValue:function(t){0!==this._n&&(this._n--,this._emitValue(t),0===this._n&&this._emitEnd())}},no=Tr("take",to),eo=Cr("take",to);var io={_init:function(t){var n=t.n;(this._n=n)<=0&&this._emitEnd()},_handleError:function(t){0!==this._n&&(this._n--,this._emitError(t),0===this._n&&this._emitEnd())}},ro=Tr("takeErrors",io),oo=Cr("takeErrors",io);var uo={_init:function(t){var n=t.fn;this._fn=n},_free:function(){this._fn=null},_handleValue:function(t){(0,this._fn)(t)?this._emitValue(t):this._emitEnd()}},so=Tr("takeWhile",uo),ao=Cr("takeWhile",uo),co=function(t){return t};var lo={_init:function(){this._lastValue=zi},_free:function(){this._lastValue=null},_handleValue:function(t){this._lastValue=t},_handleEnd:function(){this._lastValue!==zi&&this._emitValue(this._lastValue),this._emitEnd()}},ho=Tr("last",lo),fo=Cr("last",lo);var _o={_init:function(t){var n=t.n;this._n=Math.max(0,n)},_handleValue:function(t){0===this._n?this._emitValue(t):this._n--}},po=Tr("skip",_o),vo=Cr("skip",_o);var yo={_init:function(t){var n=t.fn;this._fn=n},_free:function(){this._fn=null},_handleValue:function(t){var n=this._fn;null===this._fn||n(t)||(this._fn=null),null===this._fn&&this._emitValue(t)}},mo=Tr("skipWhile",yo),go=Cr("skipWhile",yo),bo=function(t){return t};var Eo={_init:function(t){var n=t.fn;this._fn=n,this._prev=zi},_free:function(){this._fn=null,this._prev=null},_handleValue:function(t){var n=this._fn;this._prev!==zi&&n(this._prev,t)||(this._prev=t,this._emitValue(t))}},wo=Tr("skipDuplicates",Eo),So=Cr("skipDuplicates",Eo),ko=function(t,n){return t===n};function xo(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:ko;return new(t._ofSameType(wo,So))(t,{fn:n})}var Ao={_init:function(t){var n=t.fn,e=t.seed;this._fn=n,this._prev=e},_free:function(){this._prev=null,this._fn=null},_handleValue:function(t){if(this._prev!==zi){var n=this._fn;this._emitValue(n(this._prev,t))}this._prev=t}},To=Tr("diff",Ao),Co=Cr("diff",Ao);function Oo(t,n){return[t,n]}var Po=Cr("scan",{_init:function(t){var n=t.fn,e=t.seed;this._fn=n,(this._seed=e)!==zi&&this._emitValue(e)},_free:function(){this._fn=null,this._seed=null},_handleValue:function(t){var n=this._fn;null===this._currentEvent||this._currentEvent.type===Yi?this._emitValue(this._seed===zi?t:n(this._seed,t)):this._emitValue(n(this._currentEvent.value,t))}});var Vo=Tr("flatten",{_init:function(t){var n=t.fn;this._fn=n},_free:function(){this._fn=null},_handleValue:function(t){for(var n=(0,this._fn)(t),e=0;e<n.length;e++)this._emitValue(n[e])}}),Io=function(t){return t};var Lo={},No={_init:function(t){var n=this,e=t.wait;this._wait=Math.max(0,e),this._buff=[],this._$shiftBuff=function(){var t=n._buff.shift();t===Lo?n._emitEnd():n._emitValue(t)}},_free:function(){this._buff=null,this._$shiftBuff=null},_handleValue:function(t){this._activating?this._emitValue(t):(this._buff.push(t),setTimeout(this._$shiftBuff,this._wait))},_handleEnd:function(){this._activating?this._emitEnd():(this._buff.push(Lo),setTimeout(this._$shiftBuff,this._wait))}},Mo=Tr("delay",No),jo=Cr("delay",No);var Do=Date.now?function(){return Date.now()}:function(){return(new Date).getTime()},$o={_init:function(t){var n=this,e=t.wait,i=t.leading,r=t.trailing;this._wait=Math.max(0,e),this._leading=i,this._trailing=r,this._trailingValue=null,this._timeoutId=null,this._endLater=!1,this._lastCallTime=0,this._$trailingCall=function(){return n._trailingCall()}},_free:function(){this._trailingValue=null,this._$trailingCall=null},_handleValue:function(t){if(this._activating)this._emitValue(t);else{var n=Do();0!==this._lastCallTime||this._leading||(this._lastCallTime=n);var e=this._wait-(n-this._lastCallTime);e<=0?(this._cancelTrailing(),this._lastCallTime=n,this._emitValue(t)):this._trailing&&(this._cancelTrailing(),this._trailingValue=t,this._timeoutId=setTimeout(this._$trailingCall,e))}},_handleEnd:function(){this._activating?this._emitEnd():this._timeoutId?this._endLater=!0:this._emitEnd()},_cancelTrailing:function(){null!==this._timeoutId&&(clearTimeout(this._timeoutId),this._timeoutId=null)},_trailingCall:function(){this._emitValue(this._trailingValue),this._timeoutId=null,this._trailingValue=null,this._lastCallTime=this._leading?Do():0,this._endLater&&this._emitEnd()}},Fo=Tr("throttle",$o),Ho=Cr("throttle",$o);var Ro={_init:function(t){var n=this,e=t.wait,i=t.immediate;this._wait=Math.max(0,e),this._immediate=i,this._lastAttempt=0,this._timeoutId=null,this._laterValue=null,this._endLater=!1,this._$later=function(){return n._later()}},_free:function(){this._laterValue=null,this._$later=null},_handleValue:function(t){this._activating?this._emitValue(t):(this._lastAttempt=Do(),this._immediate&&!this._timeoutId&&this._emitValue(t),this._timeoutId||(this._timeoutId=setTimeout(this._$later,this._wait)),this._immediate||(this._laterValue=t))},_handleEnd:function(){this._activating?this._emitEnd():this._timeoutId&&!this._immediate?this._endLater=!0:this._emitEnd()},_later:function(){var t=Do()-this._lastAttempt;t<this._wait&&0<=t?this._timeoutId=setTimeout(this._$later,this._wait-t):(this._timeoutId=null,this._immediate||(this._emitValue(this._laterValue),this._laterValue=null),this._endLater&&this._emitEnd())}},Wo=Tr("debounce",Ro),Uo=Cr("debounce",Ro);var Bo={_init:function(t){var n=t.fn;this._fn=n},_free:function(){this._fn=null},_handleError:function(t){var n=this._fn;this._emitError(n(t))}},qo=Tr("mapErrors",Bo),Ko=Cr("mapErrors",Bo),zo=function(t){return t};var Go={_init:function(t){var n=t.fn;this._fn=n},_free:function(){this._fn=null},_handleError:function(t){(0,this._fn)(t)&&this._emitError(t)}},Xo=Tr("filterErrors",Go),Yo=Cr("filterErrors",Go),Qo=function(t){return t};var Jo={_handleValue:function(){}},Zo=Tr("ignoreValues",Jo),tu=Cr("ignoreValues",Jo);var nu={_handleError:function(){}},eu=Tr("ignoreErrors",nu),iu=Cr("ignoreErrors",nu);var ru={_handleEnd:function(){}},ou=Tr("ignoreEnd",ru),uu=Cr("ignoreEnd",ru);var su={_init:function(t){var n=t.fn;this._fn=n},_free:function(){this._fn=null},_handleEnd:function(){var t=this._fn;this._emitValue(t()),this._emitEnd()}},au=Tr("beforeEnd",su),cu=Cr("beforeEnd",su);var lu={_init:function(t){var n=t.min,e=t.max;this._max=e,this._min=n,this._buff=[]},_free:function(){this._buff=null},_handleValue:function(t){this._buff=function(t,n,e){var i=Math.min(e,t.length+1),r=t.length-i+1,o=new Array(i),u=void 0;for(u=r;u<i;u++)o[u-r]=t[u];return o[i-1]=n,o}(this._buff,t,this._max),this._buff.length>=this._min&&this._emitValue(this._buff)}},hu=Tr("slidingWindow",lu),fu=Cr("slidingWindow",lu);var _u={_init:function(t){var n=t.fn,e=t.flushOnEnd;this._fn=n,this._flushOnEnd=e,this._buff=[]},_free:function(){this._buff=null},_flush:function(){null!==this._buff&&0!==this._buff.length&&(this._emitValue(this._buff),this._buff=[])},_handleValue:function(t){this._buff.push(t),(0,this._fn)(t)||this._flush()},_handleEnd:function(){this._flushOnEnd&&this._flush(),this._emitEnd()}},du=Tr("bufferWhile",_u),pu=Cr("bufferWhile",_u),vu=function(t){return t};var yu={_init:function(t){var n=t.count,e=t.flushOnEnd;this._count=n,this._flushOnEnd=e,this._buff=[]},_free:function(){this._buff=null},_flush:function(){null!==this._buff&&0!==this._buff.length&&(this._emitValue(this._buff),this._buff=[])},_handleValue:function(t){this._buff.push(t),this._buff.length>=this._count&&this._flush()},_handleEnd:function(){this._flushOnEnd&&this._flush(),this._emitEnd()}},mu=Tr("bufferWithCount",yu),gu=Cr("bufferWithCount",yu);var bu={_init:function(t){var n=this,e=t.wait,i=t.count,r=t.flushOnEnd;this._wait=e,this._count=i,this._flushOnEnd=r,this._intervalId=null,this._$onTick=function(){return n._flush()},this._buff=[]},_free:function(){this._$onTick=null,this._buff=null},_flush:function(){null!==this._buff&&(this._emitValue(this._buff),this._buff=[])},_handleValue:function(t){this._buff.push(t),this._buff.length>=this._count&&(clearInterval(this._intervalId),this._flush(),this._intervalId=setInterval(this._$onTick,this._wait))},_handleEnd:function(){this._flushOnEnd&&0!==this._buff.length&&this._flush(),this._emitEnd()},_onActivation:function(){this._intervalId=setInterval(this._$onTick,this._wait),this._source.onAny(this._$handleAny)},_onDeactivation:function(){null!==this._intervalId&&(clearInterval(this._intervalId),this._intervalId=null),this._source.offAny(this._$handleAny)}},Eu=Tr("bufferWithTimeOrCount",bu),wu=Cr("bufferWithTimeOrCount",bu);var Su={_init:function(t){var e,n=t.transducer;this._xform=n((e=this,{"@@transducer/step":function(t,n){return e._emitValue(n),null},"@@transducer/result":function(){return e._emitEnd(),null}}))},_free:function(){this._xform=null},_handleValue:function(t){null!==this._xform["@@transducer/step"](null,t)&&this._xform["@@transducer/result"](null)},_handleEnd:function(){this._xform["@@transducer/result"](null)}},ku=Tr("transduce",Su),xu=Cr("transduce",Su);var Au={_init:function(t){var n=t.fn;this._handler=n,this._emitter=vr(this)},_free:function(){this._handler=null,this._emitter=null},_handleAny:function(t){this._handler(this._emitter,t)}},Tu=Tr("withHandler",Au),Cu=Cr("withHandler",Au);var Ou=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function Pu(t,n){var e=this;sr.call(this),this._buffers=ir(t,function(t){return Ou(t)?nr(t):[]}),this._sources=ir(t,function(t){return Ou(t)?lr():t}),this._combinator=n?br(n,this._sources.length):function(t){return t},this._aliveCount=0,this._$handlers=[];for(var i=function(n){e._$handlers.push(function(t){return e._handleAny(n,t)})},r=0;r<this._sources.length;r++)i(r)}function Vu(t,n){return 0===t.length?lr():new Pu(t,n)}Ki(Pu,sr,{_name:"zip",_onActivation:function(){for(;this._isFull();)this._emit();var t=this._sources.length;this._aliveCount=t;for(var n=0;n<t&&this._active;n++)this._sources[n].onAny(this._$handlers[n])},_onDeactivation:function(){for(var t=0;t<this._sources.length;t++)this._sources[t].offAny(this._$handlers[t])},_emit:function(){for(var t=new Array(this._buffers.length),n=0;n<this._buffers.length;n++)t[n]=this._buffers[n].shift();var e=this._combinator;this._emitValue(e(t))},_isFull:function(){for(var t=0;t<this._buffers.length;t++)if(0===this._buffers[t].length)return!1;return!0},_handleAny:function(t,n){n.type===Xi&&(this._buffers[t].push(n.value),this._isFull()&&this._emit()),n.type===Yi&&this._emitError(n.value),n.type===Gi&&(this._aliveCount--,0===this._aliveCount&&this._emitEnd())},_clear:function(){sr.prototype._clear.call(this),this._sources=null,this._buffers=null,this._combinator=null,this._$handlers=null}});var Iu=function(t){return t};function Lu(){var n=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.queueLim,i=void 0===e?0:e,r=t.concurLim,o=void 0===r?-1:r,u=t.drop,s=void 0===u?"new":u;sr.call(this),this._queueLim=i<0?-1:i,this._concurLim=o<0?-1:o,this._drop=s,this._queue=[],this._curSources=[],this._$handleSubAny=function(t){return n._handleSubAny(t)},this._$endHandlers=[],this._currentlyAdding=null,0===this._concurLim&&this._emitEnd()}function Nu(t){Lu.call(this),this._addAll(t),this._initialised=!0}function Mu(t){return 0===t.length?lr():new Nu(t)}function ju(t){var n=this;sr.call(this),this._generator=t,this._source=null,this._inLoop=!1,this._iteration=0,this._$handleAny=function(t){return n._handleAny(t)}}Ki(Lu,sr,{_name:"abstractPool",_add:function(t,n){n=n||Iu,-1===this._concurLim||this._curSources.length<this._concurLim?this._addToCur(n(t)):-1===this._queueLim||this._queue.length<this._queueLim?this._addToQueue(n(t)):"old"===this._drop&&(this._removeOldest(),this._add(t,n))},_addAll:function(t){var n=this;!function(t,n){var e=t.length,i=void 0;for(i=0;i<e;i++)n(t[i])}(t,function(t){return n._add(t)})},_remove:function(t){-1===this._removeCur(t)&&this._removeQueue(t)},_addToQueue:function(t){this._queue=Ji(this._queue,[t])},_addToCur:function(t){if(this._active){if(!t._alive)return t._currentEvent&&this._emit(t._currentEvent.type,t._currentEvent.value),void(this._active&&(0!==this._queue.length?this._pullQueue():0===this._curSources.length&&this._onEmpty()));(this._currentlyAdding=t).onAny(this._$handleSubAny),this._currentlyAdding=null,t._alive&&(this._curSources=Ji(this._curSources,[t]),this._active&&this._subToEnd(t))}else this._curSources=Ji(this._curSources,[t])},_subToEnd:function(t){var n=this,e=function(){return n._removeCur(t)};this._$endHandlers.push({obs:t,handler:e}),t.onEnd(e)},_subscribe:function(t){t.onAny(this._$handleSubAny),this._active&&this._subToEnd(t)},_unsubscribe:function(n){n.offAny(this._$handleSubAny);var t=tr(this._$endHandlers,function(t){return t.obs===n});-1!==t&&(n.offEnd(this._$endHandlers[t].handler),this._$endHandlers.splice(t,1))},_handleSubAny:function(t){t.type===Xi?this._emitValue(t.value):t.type===Yi&&this._emitError(t.value)},_removeQueue:function(t){var n=Zi(this._queue,t);return this._queue=er(this._queue,n),n},_removeCur:function(t){this._active&&this._unsubscribe(t);var n=Zi(this._curSources,t);return this._curSources=er(this._curSources,n),-1!==n&&(0!==this._queue.length?this._pullQueue():0===this._curSources.length&&this._onEmpty()),n},_removeOldest:function(){this._removeCur(this._curSources[0])},_pullQueue:function(){0!==this._queue.length&&(this._queue=nr(this._queue),this._addToCur(this._queue.shift()))},_onActivation:function(){for(var t=0,n=this._curSources;t<n.length&&this._active;t++)this._subscribe(n[t])},_onDeactivation:function(){for(var t=0,n=this._curSources;t<n.length;t++)this._unsubscribe(n[t]);null!==this._currentlyAdding&&this._unsubscribe(this._currentlyAdding)},_isEmpty:function(){return 0===this._curSources.length},_onEmpty:function(){},_clear:function(){sr.prototype._clear.call(this),this._queue=null,this._curSources=null,this._$handleSubAny=null,this._$endHandlers=null}}),Ki(Nu,Lu,{_name:"merge",_onEmpty:function(){this._initialised&&this._emitEnd()}}),Ki(ju,sr,{_name:"repeat",_handleAny:function(t){t.type===Gi?(this._source=null,this._getSource()):this._emit(t.type,t.value)},_getSource:function(){if(!this._inLoop){this._inLoop=!0;for(var t=this._generator;null===this._source&&this._alive&&this._active;)this._source=t(this._iteration++),this._source?this._source.onAny(this._$handleAny):this._emitEnd();this._inLoop=!1}},_onActivation:function(){this._source?this._source.onAny(this._$handleAny):this._getSource()},_onDeactivation:function(){this._source&&this._source.offAny(this._$handleAny)},_clear:function(){sr.prototype._clear.call(this),this._generator=null,this._source=null,this._$handleAny=null}});var Du=function(t){return new ju(t)};function $u(n){return Du(function(t){return n.length>t&&n[t]}).setName("concat")}function Fu(){Lu.call(this)}function Hu(t,n,e){var i=this;Lu.call(this,e),this._source=t,this._fn=n,this._mainEnded=!1,this._lastCurrent=null,this._$handleMain=function(t){return i._handleMain(t)}}function Ru(t,n){Hu.call(this,t,n)}function Wu(r,o){return function(t,n,e){var i=this;r.call(this),this._primary=t,this._secondary=n,this._name=t._name+"."+o,this._lastSecondary=zi,this._$handleSecondaryAny=function(t){return i._handleSecondaryAny(t)},this._$handlePrimaryAny=function(t){return i._handlePrimaryAny(t)},this._init(e)}}function Uu(t){return{_init:function(){},_free:function(){},_handlePrimaryValue:function(t){this._emitValue(t)},_handlePrimaryError:function(t){this._emitError(t)},_handlePrimaryEnd:function(){this._emitEnd()},_handleSecondaryValue:function(t){this._lastSecondary=t},_handleSecondaryError:function(t){this._emitError(t)},_handleSecondaryEnd:function(){},_handlePrimaryAny:function(t){switch(t.type){case Xi:return this._handlePrimaryValue(t.value);case Yi:return this._handlePrimaryError(t.value);case Gi:return this._handlePrimaryEnd(t.value)}},_handleSecondaryAny:function(t){switch(t.type){case Xi:return this._handleSecondaryValue(t.value);case Yi:return this._handleSecondaryError(t.value);case Gi:this._handleSecondaryEnd(t.value),this._removeSecondary()}},_removeSecondary:function(){null!==this._secondary&&(this._secondary.offAny(this._$handleSecondaryAny),this._$handleSecondaryAny=null,this._secondary=null)},_onActivation:function(){null!==this._secondary&&this._secondary.onAny(this._$handleSecondaryAny),this._active&&this._primary.onAny(this._$handlePrimaryAny)},_onDeactivation:function(){null!==this._secondary&&this._secondary.offAny(this._$handleSecondaryAny),this._primary.offAny(this._$handlePrimaryAny)},_clear:function(){t.prototype._clear.call(this),this._primary=null,this._secondary=null,this._lastSecondary=null,this._$handleSecondaryAny=null,this._$handlePrimaryAny=null,this._free()}}}function Bu(t,n){var e=Wu(sr,t);return Ki(e,sr,Uu(sr),n),e}function qu(t,n){var e=Wu(ar,t);return Ki(e,ar,Uu(ar),n),e}Ki(Fu,Lu,{_name:"pool",plug:function(t){return this._add(t),this},unplug:function(t){return this._remove(t),this}}),Ki(Hu,Lu,{_onActivation:function(){Lu.prototype._onActivation.call(this),this._active&&this._source.onAny(this._$handleMain)},_onDeactivation:function(){Lu.prototype._onDeactivation.call(this),this._source.offAny(this._$handleMain),this._hadNoEvSinceDeact=!0},_handleMain:function(t){t.type===Xi&&(this._activating&&this._hadNoEvSinceDeact&&this._lastCurrent===t.value||this._add(t.value,this._fn),this._lastCurrent=t.value,this._hadNoEvSinceDeact=!1);t.type===Yi&&this._emitError(t.value),t.type===Gi&&(this._isEmpty()?this._emitEnd():this._mainEnded=!0)},_onEmpty:function(){this._mainEnded&&this._emitEnd()},_clear:function(){Lu.prototype._clear.call(this),this._source=null,this._lastCurrent=null,this._$handleMain=null}}),Ki(Ru,Hu,{_handleMain:function(t){t.type===Yi&&(this._activating&&this._hadNoEvSinceDeact&&this._lastCurrent===t.value||this._add(t.value,this._fn),this._lastCurrent=t.value,this._hadNoEvSinceDeact=!1);t.type===Xi&&this._emitValue(t.value),t.type===Gi&&(this._isEmpty()?this._emitEnd():this._mainEnded=!0)}});var Ku={_handlePrimaryValue:function(t){this._lastSecondary!==zi&&this._lastSecondary&&this._emitValue(t)},_handleSecondaryEnd:function(){this._lastSecondary!==zi&&this._lastSecondary||this._emitEnd()}},zu=Bu("filterBy",Ku),Gu=qu("filterBy",Ku);var Xu=function(t,n){return n};var Yu={_handlePrimaryValue:function(t){this._lastSecondary!==zi&&this._emitValue(t)},_handleSecondaryEnd:function(){this._lastSecondary===zi&&this._emitEnd()}},Qu=Bu("skipUntilBy",Yu),Ju=qu("skipUntilBy",Yu);var Zu={_handleSecondaryValue:function(){this._emitEnd()}},ts=Bu("takeUntilBy",Zu),ns=qu("takeUntilBy",Zu);var es={_init:function(){var t=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).flushOnEnd,n=void 0===t||t;this._buff=[],this._flushOnEnd=n},_free:function(){this._buff=null},_flush:function(){null!==this._buff&&(this._emitValue(this._buff),this._buff=[])},_handlePrimaryEnd:function(){this._flushOnEnd&&this._flush(),this._emitEnd()},_onActivation:function(){this._primary.onAny(this._$handlePrimaryAny),this._alive&&null!==this._secondary&&this._secondary.onAny(this._$handleSecondaryAny)},_handlePrimaryValue:function(t){this._buff.push(t)},_handleSecondaryValue:function(){this._flush()},_handleSecondaryEnd:function(){this._flushOnEnd||this._emitEnd()}},is=Bu("bufferBy",es),rs=qu("bufferBy",es);var os={_init:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=t.flushOnEnd,e=void 0===n||n,i=t.flushOnChange,r=void 0!==i&&i;this._buff=[],this._flushOnEnd=e,this._flushOnChange=r},_free:function(){this._buff=null},_flush:function(){null!==this._buff&&(this._emitValue(this._buff),this._buff=[])},_handlePrimaryEnd:function(){this._flushOnEnd&&this._flush(),this._emitEnd()},_handlePrimaryValue:function(t){this._buff.push(t),this._lastSecondary===zi||this._lastSecondary||this._flush()},_handleSecondaryEnd:function(){this._flushOnEnd||this._lastSecondary!==zi&&!this._lastSecondary||this._emitEnd()},_handleSecondaryValue:function(t){this._flushOnChange&&!t&&this._flush(),this._lastSecondary=t}},us=Bu("bufferWhileBy",os),ss=qu("bufferWhileBy",os);var as=function(){return!1},cs=function(){return!0};var ls={_init:function(t){var n=t.fn;this._fn=n},_free:function(){this._fn=null},_handleValue:function(t){var n=(0,this._fn)(t);n.convert?this._emitError(n.error):this._emitValue(t)}},hs=Tr("valuesToErrors",ls),fs=Cr("valuesToErrors",ls),_s=function(t){return{convert:!0,error:t}};var ds={_init:function(t){var n=t.fn;this._fn=n},_free:function(){this._fn=null},_handleError:function(t){var n=(0,this._fn)(t);n.convert?this._emitValue(n.value):this._emitError(t)}},ps=Tr("errorsToValues",ds),vs=Cr("errorsToValues",ds),ys=function(t){return{convert:!0,value:t}};var ms={_handleError:function(t){this._emitError(t),this._emitEnd()}},gs=Tr("endOnError",ms),bs=Cr("endOnError",ms);ur.prototype.toProperty=function(t){return Pr(this,t)},ur.prototype.changes=function(){return new Vr(this)},ur.prototype.toPromise=function(t){return Ir(this,t)},ur.prototype.toESObservable=Fr,ur.prototype[Dr]=Fr,ur.prototype.map=function(t){return Xr(this,t)},ur.prototype.filter=function(t){return function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:Zr;return new(t._ofSameType(Qr,Jr))(t,{fn:n})}(this,t)},ur.prototype.take=function(t){return e=t,new((n=this)._ofSameType(no,eo))(n,{n:e});var n,e},ur.prototype.takeErrors=function(t){return e=t,new((n=this)._ofSameType(ro,oo))(n,{n:e});var n,e},ur.prototype.takeWhile=function(t){return function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:co;return new(t._ofSameType(so,ao))(t,{fn:n})}(this,t)},ur.prototype.last=function(){return new((t=this)._ofSameType(ho,fo))(t);var t},ur.prototype.skip=function(t){return e=t,new((n=this)._ofSameType(po,vo))(n,{n:e});var n,e},ur.prototype.skipWhile=function(t){return function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:bo;return new(t._ofSameType(mo,go))(t,{fn:n})}(this,t)},ur.prototype.skipDuplicates=function(t){return xo(this,t)},ur.prototype.diff=function(t,n){return function(t,n){var e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:zi;return new(t._ofSameType(To,Co))(t,{fn:n||Oo,seed:e})}(this,t,n)},ur.prototype.scan=function(t,n){return function(t,n){var e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:zi;return new Po(t,{fn:n,seed:e})}(this,t,n)},ur.prototype.flatten=function(t){return function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:Io;return new Vo(t,{fn:n})}(this,t)},ur.prototype.delay=function(t){return e=t,new((n=this)._ofSameType(Mo,jo))(n,{wait:e});var n,e},ur.prototype.throttle=function(t,n){return function(t,n){var e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},i=e.leading,r=void 0===i||i,o=e.trailing,u=void 0===o||o;return new(t._ofSameType(Fo,Ho))(t,{wait:n,leading:r,trailing:u})}(this,t,n)},ur.prototype.debounce=function(t,n){return function(t,n){var e=(2<arguments.length&&void 0!==arguments[2]?arguments[2]:{}).immediate,i=void 0!==e&&e;return new(t._ofSameType(Wo,Uo))(t,{wait:n,immediate:i})}(this,t,n)},ur.prototype.mapErrors=function(t){return function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:zo;return new(t._ofSameType(qo,Ko))(t,{fn:n})}(this,t)},ur.prototype.filterErrors=function(t){return function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:Qo;return new(t._ofSameType(Xo,Yo))(t,{fn:n})}(this,t)},ur.prototype.ignoreValues=function(){return new((t=this)._ofSameType(Zo,tu))(t);var t},ur.prototype.ignoreErrors=function(){return new((t=this)._ofSameType(eu,iu))(t);var t},ur.prototype.ignoreEnd=function(){return new((t=this)._ofSameType(ou,uu))(t);var t},ur.prototype.beforeEnd=function(t){return e=t,new((n=this)._ofSameType(au,cu))(n,{fn:e});var n,e},ur.prototype.slidingWindow=function(t,n){return function(t,n){var e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;return new(t._ofSameType(hu,fu))(t,{min:e,max:n})}(this,t,n)},ur.prototype.bufferWhile=function(t,n){return function(t,n){var e=(2<arguments.length&&void 0!==arguments[2]?arguments[2]:{}).flushOnEnd,i=void 0===e||e;return new(t._ofSameType(du,pu))(t,{fn:n||vu,flushOnEnd:i})}(this,t,n)},ur.prototype.bufferWithCount=function(t,n){return function(t,n){var e=(2<arguments.length&&void 0!==arguments[2]?arguments[2]:{}).flushOnEnd,i=void 0===e||e;return new(t._ofSameType(mu,gu))(t,{count:n,flushOnEnd:i})}(this,t,n)},ur.prototype.bufferWithTimeOrCount=function(t,n,e){return function(t,n,e){var i=(3<arguments.length&&void 0!==arguments[3]?arguments[3]:{}).flushOnEnd,r=void 0===i||i;return new(t._ofSameType(Eu,wu))(t,{wait:n,count:e,flushOnEnd:r})}(this,t,n,e)},ur.prototype.transduce=function(t){return e=t,new((n=this)._ofSameType(ku,xu))(n,{transducer:e});var n,e},ur.prototype.withHandler=function(t){return e=t,new((n=this)._ofSameType(Tu,Cu))(n,{fn:e});var n,e},ur.prototype.thru=function(t){return t(this)},ur.prototype.combine=function(t,n){return Wr([this,t],n)},ur.prototype.zip=function(t,n){return Vu([this,t],n)},ur.prototype.merge=function(t){return Mu([this,t])},ur.prototype.concat=function(t){return $u([this,t])};ur.prototype.flatMap=function(t){return new Hu(this,t).setName(this,"flatMap")},ur.prototype.flatMapLatest=function(t){return new Hu(this,t,{concurLim:1,drop:"old"}).setName(this,"flatMapLatest")},ur.prototype.flatMapFirst=function(t){return new Hu(this,t,{concurLim:1}).setName(this,"flatMapFirst")},ur.prototype.flatMapConcat=function(t){return new Hu(this,t,{queueLim:-1,concurLim:1}).setName(this,"flatMapConcat")},ur.prototype.flatMapConcurLimit=function(t,n){return new Hu(this,t,{queueLim:-1,concurLim:n}).setName(this,"flatMapConcurLimit")},ur.prototype.flatMapErrors=function(t){return new Ru(this,t).setName(this,"flatMapErrors")},ur.prototype.filterBy=function(t){return e=t,new((n=this)._ofSameType(zu,Gu))(n,e);var n,e},ur.prototype.sampledBy=function(t,n){return Wr([t],[e=this],(i=n)?function(t,n){return i(n,t)}:Xu).setName(e,"sampledBy");var e,i},ur.prototype.skipUntilBy=function(t){return e=t,new((n=this)._ofSameType(Qu,Ju))(n,e);var n,e},ur.prototype.takeUntilBy=function(t){return e=t,new((n=this)._ofSameType(ts,ns))(n,e);var n,e},ur.prototype.bufferBy=function(t,n){return i=t,r=n,new((e=this)._ofSameType(is,rs))(e,i,r);var e,i,r},ur.prototype.bufferWhileBy=function(t,n){return i=t,r=n,new((e=this)._ofSameType(us,ss))(e,i,r);var e,i,r};function Es(t){if(console&&"function"==typeof console.warn){console.warn(t,"\nHere is an Error object for you containing the call stack:",new Error)}}ur.prototype.awaiting=function(t){return Es("You are using deprecated .awaiting() method, see https://github.com/kefirjs/kefir/issues/145"),e=t,Pr(xo(Mu([Xr(n=this,cs),Xr(e,as)])),as).setName(n,"awaiting");var n,e},ur.prototype.valuesToErrors=function(t){return Es("You are using deprecated .valuesToErrors() method, see https://github.com/kefirjs/kefir/issues/149"),function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:_s;return new(t._ofSameType(hs,fs))(t,{fn:n})}(this,t)},ur.prototype.errorsToValues=function(t){return Es("You are using deprecated .errorsToValues() method, see https://github.com/kefirjs/kefir/issues/149"),function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:ys;return new(t._ofSameType(ps,vs))(t,{fn:n})}(this,t)},ur.prototype.endOnError=function(){return Es("You are using deprecated .endOnError() method, see https://github.com/kefirjs/kefir/issues/150"),new((t=this)._ofSameType(gs,bs))(t);var t};var ws,Ss={Observable:ur,Stream:sr,Property:ar,never:lr,later:function(t,n){return new fr(t,{x:n})},interval:function(t,n){return new _r(t,{x:n})},sequentially:function(t,n){return 0===n.length?lr():new dr(t,{xs:n})},fromPoll:function(t,n){return new pr(t,{fn:n})},withInterval:function(t,n){return new yr(t,{fn:n})},fromCallback:function(t){var e=!1;return gr(function(n){e||(t(function(t){n.emit(t),n.end()}),e=!0)}).setName("fromCallback")},fromNodeCallback:function(t){var n=!1;return gr(function(e){n||(t(function(t,n){t?e.error(t):e.emit(n),e.end()}),n=!0)}).setName("fromNodeCallback")},fromEvents:function(n,e,t){for(var i,r,o,u=void 0,s=void 0,a=0;a<Er.length;a++)if("function"==typeof n[Er[a][0]]&&"function"==typeof n[Er[a][1]]){u=Er[a][0],s=Er[a][1];break}if(void 0===u)throw new Error("target don't support any of addEventListener/removeEventListener, addListener/removeListener, on/off method pair");return(i=function(t){return n[u](e,t)},r=function(t){return n[s](e,t)},o=t,gr(function(n){var t=o?function(){n.emit(function(t,n,e){var i=e?e.length:0;if(null==n)switch(i){case 0:return t();case 1:return t(e[0]);case 2:return t(e[0],e[1]);case 3:return t(e[0],e[1],e[2]);case 4:return t(e[0],e[1],e[2],e[3]);default:return t.apply(null,e)}else switch(i){case 0:return t.call(n);default:return t.apply(n,e)}}(o,this,arguments))}:function(t){n.emit(t)};return i(t),function(){return r(t)}}).setName("fromSubUnsub")).setName("fromEvents")},stream:gr,constant:Sr,constantError:function(t){return new kr(t)},fromPromise:function(e){var i=!1;return Pr(gr(function(n){if(!i){var t=e.then(function(t){n.emit(t),n.end()},function(t){n.error(t),n.end()});t&&"function"==typeof t.done&&t.done(),i=!0}}),null).setName("fromPromise")},fromESObservable:function(t){var e=t[Dr]?t[Dr]():t;return gr(function(n){var t=e.subscribe({error:function(t){n.error(t),n.end()},next:function(t){n.emit(t)},complete:function(){n.end()}});return t.unsubscribe?function(){t.unsubscribe()}:t}).setName("fromESObservable")},combine:Wr,zip:Vu,merge:Mu,concat:$u,Pool:Fu,pool:function(){return new Fu},repeat:Du,staticLand:Br},ks=(Ss.Kefir=Ss).stream(function(t){return ws=t.emit}).scan(function(t,n){return n(t)},{amount:null,destinationPocket:null,exchangeLoading:!1,pockets:[],rates:[],ratesError:!1,ratesHidden:!0,ratesLoading:!1,sourcePocket:null}),xs=function(t){return ws(t)},As=function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:void 0;xs(function(t){return F({},t,{ratesLoading:!0})}),function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:void 0,e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:void 0,i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:void 0;fetch(t,{signal:n}).then(function(t){return t.ok?t.json():Promise.reject()}).then(function(t){return e&&e(t)}).catch(function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};"NetworkError when attempting to fetch resource."===t.message||"AbortError"===t.name||n&&n.aborted||(t instanceof Error&&console.error(t),i&&i(t))})}(t,n,function(n){return xs(function(t){return F({},t,{rates:Object.entries(n.rates).map(function(t){var n=B(t,2);return{currency:n[0],rate:n[1]}}).filter(function(t){return["EUR","GBP","USD"].includes(t.currency)}),ratesError:!1,ratesHidden:Ts(t.sourcePocket,t.destinationPocket,!Object.keys(n.rates).length),ratesLoading:!1})})},function(){return xs(function(t){return F({},t,{ratesError:!0,ratesLoading:!1})})})},Ts=function(t,n,e){return t===n||e},Cs=function(n){return xs(function(t){return F({},t,{destinationPocket:n,ratesHidden:Ts(t.sourcePocket,n,!t.rates.length)})})},Os=function(n){return xs(function(t){return F({},t,{amount:t.amount&&t.amount>n.sum?n.sum:t.amount,ratesHidden:Ts(n,t.destinationPocket,!t.rates.length),sourcePocket:n})})},Ps=function(t){function n(){var t;return E(this,n),(t=U(this,R(n).call(this))).hiddenText={},t.input={},t}return H(n,g),S(n,[{key:"componentDidMount",value:function(){this.input.current.addEventListener("textInput",this.onTextInput.bind(this))}},{key:"componentDidUpdate",value:function(){this.updateHiddenText()}}]),S(n,[{key:"onInput",value:function(t){var n,e=B(t.target.value.split(/[.,]/),2),i=e[0],r=e[1],o=void 0===r?"":r,u=parseFloat(t.target.value);if(t.target.validity.valid&&!/^0./.test(i)&&o.length<=2?u===this.context.amount||(n=isNaN(u)?null:(this.props.setAmount||function(t){return t})(Math.min(u,this.props.max)),xs(function(t){return F({},t,{amount:n})})):t.target.value=this.props.value,"Backspace"===this.prevKey&&(this.prevInputValue||"").startsWith(t.target.value)&&t.target.value){var s=t.target.value;t.target.value="0".concat(t.target.value),t.target.value=s}this.updateHiddenText(),this.prevInputValue=t.target.value}},{key:"onKeyDown",value:function(t){this.prevKey=8===t.which?"Backspace":t.key}},{key:"onTextInput",value:function(t){this.prevKey=t.data}},{key:"render",value:function(t){var n=this;return u("span",{class:"CurrencyInput"},u("span",null,t.prefix,u("span",{ref:this.hiddenText})),u("input",{min:"0",onInput:function(t){return n.onInput(t)},onKeyDown:function(t){return n.onKeyDown(t)},ref:this.input,step:"any",tabindex:t.tabindex,type:"number",value:this.input.current&&parseFloat(this.input.current.value)===t.value?this.input.current.value:t.value}))}},{key:"updateHiddenText",value:function(){this.hiddenText.current.textContent="".concat(this.input.current.value).concat(![",","."].includes(this.prevKey)||this.hiddenText.current.textContent.includes(",")||this.hiddenText.current.textContent.includes(".")?"":".")}}]),n}(),Vs=function(r,o,u){return function(t){function n(){return E(this,n),U(this,R(n).apply(this,arguments))}return H(n,g),S(n,[{key:"render",value:function(t,n,e){var i=r(t,e);return this.cache=i?this.cache||{}:o(t,e),u(F({},t,this.cache,{hidden:i}),e)}}]),n}()},Is=vn(!0);me(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,n=this._t,e=this._i;return e>=n.length?{value:void 0,done:!0}:(t=Is(n,e),this._i+=t.length,{value:t,done:!1})});var Ls=t(function(t){var e=dt("meta"),n=st.f,i=0,r=Object.isExtensible||function(){return!0},o=!Z(function(){return r(Object.preventExtensions({}))}),u=function(t){n(t,e,{value:{i:"O"+ ++i,w:{}}})},s=t.exports={KEY:e,NEED:!1,fastKey:function(t,n){if(!Q(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!ht(t,e)){if(!r(t))return"F";if(!n)return"E";u(t)}return t[e].i},getWeak:function(t,n){if(!ht(t,e)){if(!r(t))return!0;if(!n)return!1;u(t)}return t[e].w},onFreeze:function(t){return o&&s.NEED&&r(t)&&!ht(t,e)&&u(t),t}}}),Ns=(Ls.KEY,Ls.NEED,Ls.fastKey,Ls.getWeak,Ls.onFreeze,function(t,n){if(!Q(t)||t._t!==n)throw TypeError("Incompatible receiver, "+n+" required!");return t}),Ms=st.f,js=Ls.fastKey,Ds=tt?"_s":"size",$s=function(t,n){var e,i=js(n);if("F"!==i)return t._i[i];for(e=t._f;e;e=e.n)if(e.k==n)return e},Fs={getConstructor:function(t,o,e,i){var r=t(function(t,n){Fe(t,r,o,"_i"),t._t=o,t._i=ue(null),t._f=void 0,t._l=void 0,t[Ds]=0,null!=n&&qe(n,e,t[i],t)});return _i(r.prototype,{clear:function(){for(var t=Ns(this,o),n=t._i,e=t._f;e;e=e.n)e.r=!0,e.p&&(e.p=e.p.n=void 0),delete n[e.i];t._f=t._l=void 0,t[Ds]=0},delete:function(t){var n=Ns(this,o),e=$s(n,t);if(e){var i=e.n,r=e.p;delete n._i[e.i],e.r=!0,r&&(r.n=i),i&&(i.p=r),n._f==e&&(n._f=i),n._l==e&&(n._l=r),n[Ds]--}return!!e},forEach:function(t){Ns(this,o);for(var n,e=yt(t,1<arguments.length?arguments[1]:void 0,3);n=n?n.n:this._f;)for(e(n.v,n.k,this);n&&n.r;)n=n.p},has:function(t){return!!$s(Ns(this,o),t)}}),tt&&Ms(r.prototype,"size",{get:function(){return Ns(this,o)[Ds]}}),r},def:function(t,n,e){var i,r,o=$s(t,n);return o?o.v=e:(t._l=o={i:r=js(n,!0),k:n,v:e,p:i=t._l,n:void 0,r:!1},t._f||(t._f=o),i&&(i.n=o),t[Ds]++,"F"!==r&&(t._i[r]=o)),t},getEntry:$s,setStrong:function(t,e,n){me(t,e,function(t,n){this._t=Ns(t,e),this._k=n,this._l=void 0},function(){for(var t=this,n=t._k,e=t._l;e&&e.r;)e=e.p;return t._t&&(t._l=e=e?e.n:t._t._f)?Qn(0,"keys"==n?e.k:"values"==n?e.v:[e.k,e.v]):(t._t=void 0,Qn(1))},n?"entries":"values",!n,!0),pi(e)}},Hs=Object.getOwnPropertyDescriptor,Rs={f:tt?Hs:function(t,n){if(t=Kt(t),n=ot(n,!0),rt)try{return Hs(t,n)}catch(t){}if(ht(t,n))return at(!Ie.f.call(t,n),t[n])}},Ws=function(t,n){if(J(t),!Q(n)&&null!==n)throw TypeError(n+": can't set as prototype!")},Us={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,i){try{(i=yt(Function.call,Rs.f(Object.prototype,"__proto__").set,2))(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,n){return Ws(t,n),e?t.__proto__=n:i(t,n),t}}({},!1):void 0),check:Ws}.set,Bs=function(t,n,e){var i,r=n.constructor;return r!==e&&"function"==typeof r&&(i=r.prototype)!==e.prototype&&Q(i)&&Us&&Us(t,i),t},qs=(function(i,t,n,e,r,o){var u=X[i],s=u,a=r?"set":"add",c=s&&s.prototype,l={},h=function(t){var e=c[t];pt(c,t,"delete"==t?function(t){return!(o&&!Q(t))&&e.call(this,0===t?0:t)}:"has"==t?function(t){return!(o&&!Q(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return o&&!Q(t)?void 0:e.call(this,0===t?0:t)}:"add"==t?function(t){return e.call(this,0===t?0:t),this}:function(t,n){return e.call(this,0===t?0:t,n),this})};if("function"==typeof s&&(o||c.forEach&&!Z(function(){(new s).entries().next()}))){var f=new s,_=f[a](o?{}:-0,1)!=f,d=Z(function(){f.has(1)}),p=wi(function(t){new s(t)}),v=!o&&Z(function(){for(var t=new s,n=5;n--;)t[a](n,n);return!t.has(-0)});p||(((s=t(function(t,n){Fe(t,s,i);var e=Bs(new u,t,s);return null!=n&&qe(n,r,e[a],e),e})).prototype=c).constructor=s),(d||v)&&(h("delete"),h("has"),r&&h("get")),(v||_)&&h(a),o&&c.clear&&delete c.clear}else s=e.getConstructor(t,i,r,a),_i(s.prototype,n),Ls.NEED=!0;ce(s,i),l[i]=s,bt(bt.G+bt.W+bt.F*(s!=u),l),o||e.setStrong(s,i,r)}("Map",function(t){return function(){return t(this,0<arguments.length?arguments[0]:void 0)}},{get:function(t){var n=Fs.getEntry(Ns(this,"Map"),t);return n&&n.v},set:function(t,n){return Fs.def(Ns(this,"Map"),0===t?0:t,n)}},Fs,!0),Ut(5)),Ks="find",zs=!0;Ks in[]&&Array(1)[Ks](function(){zs=!1}),bt(bt.P+bt.F*zs,"Array",{find:function(t){return qs(this,t,1<arguments.length?arguments[1]:void 0)}}),nn(Ks);var Gs,Xs=function(t,n){return(t.find(function(t){return t.currency===n})||{rate:NaN}).rate},Ys=new Map,Qs=function(t,n,e){t!==Gs&&(Ys.clear(),Gs=t);var i="".concat(n,":").concat(e);if(Ys.has(i))return Ys.get(i);var r,o,u,s=(r=t,u=e,"USD"===(o=n)?Xs(r,u):"USD"===u?1/Xs(r,o):Xs(r,u)*(1/Xs(r,o)));return Ys.set(i,s),s},Js=Xn.concat("length","prototype"),Zs={f:Object.getOwnPropertyNames||function(t){return Gn(t,Js)}},ta="\t\n\v\f\r Â áá ââââââââââââ¯âã\u2028\u2029\ufeff",na="["+ta+"]",ea=RegExp("^"+na+na+"*"),ia=RegExp(na+na+"*$"),ra=function(t,n,e){var i={},r=Z(function(){return!!ta[t]()||"âÂ"!="âÂ"[t]()}),o=i[t]=r?n(oa):ta[t];e&&(i[e]=o),bt(bt.P+bt.F*r,"String",i)},oa=ra.trim=function(t,n){return t=String(Vt(t)),1&n&&(t=t.replace(ea,"")),2&n&&(t=t.replace(ia,"")),t},ua=ra,sa=Zs.f,aa=Rs.f,ca=st.f,la=ua.trim,ha="Number",fa=X[ha],_a=fa,da=fa.prototype,pa=Ot(ue(da))==ha,va="trim"in String.prototype,ya=function(t){var n=ot(t,!1);if("string"==typeof n&&2<n.length){var e,i,r,o=(n=va?n.trim():la(n,3)).charCodeAt(0);if(43===o||45===o){if(88===(e=n.charCodeAt(2))||120===e)return NaN}else if(48===o){switch(n.charCodeAt(1)){case 66:case 98:i=2,r=49;break;case 79:case 111:i=8,r=55;break;default:return+n}for(var u,s=n.slice(2),a=0,c=s.length;a<c;a++)if((u=s.charCodeAt(a))<48||r<u)return NaN;return parseInt(s,i)}}return+n};if(!fa(" 0o1")||!fa("0b1")||fa("+0x1")){fa=function(t){var n=arguments.length<1?0:t,e=this;return e instanceof fa&&(pa?Z(function(){da.valueOf.call(e)}):Ot(e)!=ha)?Bs(new _a(ya(n)),e,fa):ya(n)};for(var ma,ga=tt?sa(_a):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),ba=0;ga.length>ba;ba++)ht(_a,ma=ga[ba])&&!ht(fa,ma)&&ca(fa,ma,aa(_a,ma));(fa.prototype=da).constructor=fa,pt(X,ha,fa)}var Ea=function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:2;return Number("".concat(Math.round("".concat(t,"e+").concat(n)),"e-").concat(n))},wa=Vs(function(t,n){return n.ratesHidden},function(t,n){var e=Qs(n.rates,n.sourcePocket.currency,t.pocket.currency);return{rate:e,value:n.amount&&Ea(e*n.amount)}},function(n,t){return u("span",{class:"DestinationInput animated ".concat(n.hidden?"hidden":"")},u(Ps,{max:n.rate*t.sourcePocket.sum,prefix:null===t.amount||"+",setAmount:function(t){return 1/n.rate*t},tabindex:"-1",value:n.value}))}),Sa=function(t,n){var e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return t.toLocaleString("en-US",F({currency:n,style:"currency"},e))},ka=function(t,n,e){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:void 0;return"".concat(Sa(1,n,{maximumFractionDigits:0,minimumFractionDigits:0})," = ").concat(Sa(Qs(t,n,e),e,i))},xa=Vs(function(t,n){return n.ratesHidden},function(t,n){return{text:ka(n.rates,t.pocket.currency,n.sourcePocket.currency)}},function(t){return u("span",{class:"DestinationRate animated ".concat(t.hidden?"hidden":"")},t.text)}),Aa=function(t,n){return u("span",{class:"SourceInput"},u(Ps,{max:t.pocket.sum,prefix:null===n.amount||"-",tabindex:"-1",value:n.amount&&Ea(n.amount)}))},Ta=function(t){return u("div",{class:"ExchangeSlide"},u("div",null,u("div",{class:"ExchangeSlide-currency"},t.pocket.currency),"source"===t.type?u(Aa,{pocket:t.pocket}):u(wa,{pocket:t.pocket})),u("div",null,u("div",null,"You have ",Sa(t.pocket.sum,t.pocket.currency)),"destination"===t.type&&u(xa,{pocket:t.pocket})))},Ca=Ut(0),Oa=Bt([].forEach,!0);bt(bt.P+bt.F*!Oa,"Array",{forEach:function(t){return Ca(this,t,arguments[1])}});var Pa=function(t){function n(){var t;return E(this,n),(t=U(this,R(n).call(this))).pagination={},t.slides={},t}return H(n,g),S(n,[{key:"activatePage",value:function(t){var n=this.pagination.current.children[this.normalizeIndex(t)];q(this.pagination.current.querySelectorAll(".active")).forEach(function(t){return t===n||t.classList.remove("active")}),n&&n.classList.add("active"),void 0===this.index||this.pagination.current.classList.add("initialized")}},{key:"componentDidMount",value:function(){var s=this;this.listeners=[["mousemove",this.onDragMove],["mouseup",this.onDragStop]].map(function(t){var n=B(t,2);return[n[0],n[1].bind(s)]}),this.listeners.forEach(function(t){return addEventListener.apply(void 0,q(t))}),[["mousedown",this.onDragStart],["touchend",this.onDragStop],["touchmove",this.onDragMove],["touchstart",this.onDragStart]].forEach(function(t){var n,e,i=K(e=t)||z(e)||G(),r=i[0],o=i[1],u=i.slice(2);return(n=s.slides.current).addEventListener.apply(n,[r,o.bind(s)].concat(q(u)))}),this.selectSlide(this.props.index),this.props.onMount&&this.props.onMount(this.props.index,this.slides.current.children[this.props.index+1])}},{key:"componentWillReceiveProps",value:function(t){var n=Math.max(Math.min(t.index,this.props.children.length-1),0);n===this.index||this.startAnimation(n)}},{key:"componentWillUnmount",value:function(){this.listeners.forEach(function(t){return removeEventListener.apply(void 0,q(t))})}}]),S(n,[{key:"eventClientX",value:function(t){return(t.touches?t.touches[0]:t).clientX}},{key:"nextSlideIndex",value:function(t){var n=this.slidesOffset();return n-t<-100?this.index+1:100<n-t?this.index-1:this.index}},{key:"normalizeIndex",value:function(t){return t<0?this.props.children.length-1:t>this.props.children.length-1?0:t}},{key:"onAnimationTimeout",value:function(t){this.slides.current.classList.remove("animating"),this.selectSlide(this.normalizeIndex(t))}},{key:"onDragMove",value:function(t){("mousemove"===t.type&&this.dragging||"touchmove"===t.type)&&(t.preventDefault(),this.translateToPointer(t),this.clientX=this.eventClientX(t))}},{key:"onDragStart",value:function(t){t.preventDefault(),this.slides.current.classList.contains("animating")&&(this.index=this.nextSlideIndex(this.prevSlidesOffset)),this.clientX=this.eventClientX(t),this.dragging=!0,this.prevSlidesOffset=this.slidesOffset(),this.translateToPointer(t),this.stopAnimation()}},{key:"onDragStop",value:function(t){("mouseup"===t.type&&this.dragging||"touchend"===t.type)&&(this.dragging=!1,this.startAnimation(this.nextSlideIndex(this.prevSlidesOffset)),this.prevSlidesOffset===this.slidesOffset()&&t.target.focus())}},{key:"render",value:function(n){var e=this;return u("div",{class:"Slider"},u("div",{ref:this.slides,style:{width:"".concat(100*(n.children.length+2),"%")}},[].concat(q(n.children.length?[n.children[n.children.length-1]]:[]),q(n.children),q(n.children.length?[n.children[0]]:[])).map(function(t){return u("div",{style:{width:"".concat(100/(n.children.length+2),"%")}},t)})),u("nav",{ref:this.pagination},n.children.map(function(t,n){return[u("a",{onClick:function(){return e.startAnimation(n)}},n+1)," "]})))}},{key:"selectSlide",value:function(t){t!==this.index&&(this.activatePage(t),this.translateToSlide(t),void 0===this.index||this.props.onSlide&&this.props.onSlide(t,this.slides.current.children[t+1]),this.index=t)}},{key:"slidesOffset",value:function(){var t=getComputedStyle(this.slides.current);return new(window.DOMMatrix||window.CSSMatrix||window.WebKitCSSMatrix||window.MSCSSMatrix)(t.transform||t.webkitTransform).m41}},{key:"startAnimation",value:function(t){var n=this;this.activatePage(t),clearTimeout(this.animationTimeout),this.animationTimeout=setTimeout(function(){return n.onAnimationTimeout(t)},300),this.slides.current.classList.add("animating"),this.translateToSlide(t)}},{key:"stopAnimation",value:function(){this.slides.current.classList.remove("animating"),clearTimeout(this.animationTimeout)}},{key:"translateSlides",value:function(t){this.slides.current.style.transform=this.slides.current.style.webkitTransform="translateX(".concat(t,")")}},{key:"translateToPointer",value:function(t){this.translateSlides("".concat(this.slidesOffset()-(this.clientX-this.eventClientX(t)),"px"))}},{key:"translateToSlide",value:function(t){return this.translateSlides("".concat(-100/(this.props.children.length+2)*(t+1),"%"))}}]),n}(),Va=function(t){function n(){var t;return E(this,n),(t=U(this,R(n).call(this))).destination={},t.source={},t}return H(n,g),S(n,[{key:"componentDidMount",value:function(){this.destination.current.base.addEventListener("focus",this.onFocus.bind(this,"destination"),!0),this.source.current.base.addEventListener("focus",this.onFocus.bind(this,"source"),!0)}}]),S(n,[{key:"focusSlideInput",value:function(t,n){var e=n!==this.focusedInputType&&this.focusedInputType?this.focusedInput:t.querySelector("input");if(e){var i=t.parentElement.parentElement,r=i.scrollLeft,o=i.scrollTop;e.focus({preventScroll:!0});var u=[r,o];t.parentElement.parentElement.scrollLeft=u[0],t.parentElement.parentElement.scrollTop=u[1]}}},{key:"onFocus",value:function(t,n){var e;"INPUT"===n.target.tagName&&(e=[n.target,t],this.focusedInput=e[0],this.focusedInputType=e[1])}},{key:"render",value:function(t,n,e){var i=this;return u("div",{class:"ExchangeSliders"},u(Pa,{index:e.pockets.indexOf(e.sourcePocket),onMount:function(t,n){return i.focusSlideInput(n,"source")},onSlide:function(t,n){Os(e.pockets[t]),i.focusSlideInput(n,"source")},ref:this.source},e.pockets.map(function(t){return u(Ta,{pocket:t,type:"source"})})),u(Pa,{index:e.pockets.indexOf(e.destinationPocket),onSlide:function(t,n){Cs(e.pockets[t]),i.focusSlideInput(n,"destination")},ref:this.destination},e.pockets.map(function(t){return u(Ta,{pocket:t,type:"destination"})})))}}]),n}(),Ia=function(t,r){return u("select",{onChange:function(t){var n=B(t.target.value.split(":"),2),e=n[0],i=n[1];Os(r.pockets.find(function(t){return t.currency===e})),Cs(r.pockets.find(function(t){return t.currency===i}))}},r.pockets.map(function(n){return r.pockets.map(function(t){return t.currency===n.currency||u("option",{selected:t===r.destinationPocket&&n===r.sourcePocket,value:"".concat(n.currency,":").concat(t.currency)},!r.rates.length||ka(r.rates,n.currency,t.currency,{minimumFractionDigits:4}))})}))},La=Vs(function(t,n){return n.ratesHidden},function(t,n){return{text:ka(n.rates,n.sourcePocket.currency,n.destinationPocket.currency,{minimumFractionDigits:4})}},function(t){return u("span",{class:"RateDropdown animated ".concat(t.hidden?"hidden":"")},u("span",{class:"button"},t.text),u(Ia,null))}),Na=function(t,n){return u("nav",{class:"Header"},u("div",null,u("button",{onClick:function(){return t.destroy()}},"Cancel")),u("div",null,u(La,null)),u("div",null,u("button",{class:"animated",disabled:n.ratesHidden||!n.amount||n.exchangeLoading,onClick:function(){return t.exchange()}},"Exchange")))},Ma=function(t){function n(){return E(this,n),U(this,R(n).apply(this,arguments))}return H(n,g),S(n,[{key:"componentDidMount",value:function(){var t=this;this.progressInterval=setInterval(function(){return t.updateProgress(t.progress+.01*(1-t.progress))},10),this.updateProgress(0)}},{key:"componentWillReceiveProps",value:function(t){t.visible||this.updateProgress(1)}},{key:"componentWillUnmount",value:function(){clearInterval(this.progressInterval)}},{key:"render",value:function(t){return u("div",{class:"LoadingIndicator animated ".concat(t.visible?"":"hidden")})}},{key:"updateProgress",value:function(t){this.progress=t,this.base.style.transform=this.base.style.webkitTransform="translateX(".concat(100*t-100,"%)"),.9999<this.progress&&clearInterval(this.progressInterval)}}]),n}(),ja=function(t){function n(){return E(this,n),U(this,R(n).apply(this,arguments))}return H(n,g),S(n,[{key:"componentDidMount",value:function(){var t=this;this.onKeyUp=this.onKeyUp.bind(this),addEventListener("keyup",this.onKeyUp),this.fetchRates(),this.fetchRatesInterval=setInterval(function(){return t.fetchRates()},1e4)}},{key:"componentWillMount",value:function(){var t,n,e=this;t=function(t){return e.setState(t)},ks.observe(t),n=this.props.pockets,xs(function(t){return F({},t,{pockets:n})}),Cs(this.props.pockets[1===this.props.pockets.length?0:1]),Os(this.props.pockets[0])}},{key:"componentWillUnmount",value:function(){removeEventListener("keyup",this.onKeyUp),clearInterval(this.fetchRatesInterval),this.fetchRatesAbort.abort()}},{key:"destroy",value:function(){this.base.classList.add("hidden"),setTimeout(this.props.destroy,300)}},{key:"exchange",value:function(){var t,n,e,i,r=this;this.state.ratesHidden||!this.state.amount||(t=Ea(this.state.amount),n=Qs(this.state.rates,this.state.sourcePocket.currency,this.state.destinationPocket.currency),e=this.state.sourcePocket.currency,i=this.state.destinationPocket.currency,console.log("exchange:",t,n,e,i),xs(function(t){return F({},t,{exchangeLoading:!0})}),new Promise(function(t){return setTimeout(t,1e3)}).then(function(){return xs(function(t){return F({},t,{exchangeLoading:!1})})})).then(function(){return r.destroy()})}},{key:"fetchRates",value:function(){return this.fetchRatesAbort&&this.fetchRatesAbort.abort(),this.fetchRatesAbort=window.AbortController?new AbortController:{abort:function(){}},As(this.props.ratesURL,this.fetchRatesAbort.signal)}},{key:"getChildContext",value:function(){return this.state}},{key:"onKeyUp",value:function(t){"Enter"===t.key?this.exchange():"Escape"===t.key&&this.destroy()}},{key:"render",value:function(t,n){var e=this;return u("div",{class:"App animated"},u(Ma,{visible:n.ratesLoading&&!n.rates.length}),u(Tt,{visible:n.ratesError},"Failed to update rates ",u("button",{onClick:function(){return e.fetchRates()}},"Retry")),u(Na,{destroy:function(){return e.destroy()},exchange:function(){return e.exchange()}}),u(Va,null))}}]),n}();return function(t,n){var e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:void 0,i=b(u(ja,k({},n,{destroy:function(){b(null,t,i),e&&e()}})),t)}}();
//# sourceMappingURL=exchange-widget.min.js.map
