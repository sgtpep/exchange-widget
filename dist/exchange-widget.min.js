var exchangeWidget=function(){"use strict";var a=function(){},o={},c=[],l=[];function u(t,n){var e,i,r,o,u=l;for(o=arguments.length;2<o--;)c.push(arguments[o]);for(n&&null!=n.children&&(c.length||c.push(n.children),delete n.children);c.length;)if((i=c.pop())&&void 0!==i.pop)for(o=i.length;o--;)c.push(i[o]);else"boolean"==typeof i&&(i=null),(r="function"!=typeof t)&&(null==i?i="":"number"==typeof i?i=String(i):"string"!=typeof i&&(r=!1)),r&&e?u[u.length-1]+=i:u===l?u=[i]:u.push(i),e=r;var s=new a;return s.nodeName=t,s.children=u,s.attributes=null==n?void 0:n,s.key=null==n?void 0:n.key,s}function x(t,n){for(var e in n)t[e]=n[e];return t}function h(t,n){null!=t&&("function"==typeof t?t(n):t.current=n)}var n="function"==typeof Promise?Promise.resolve().then.bind(Promise.resolve()):setTimeout,f=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,e=[];function s(t){!t._dirty&&(t._dirty=!0)&&1==e.push(t)&&n(i)}function i(){for(var t;t=e.pop();)t._dirty&&$(t)}function k(t,n){return t.normalizedNodeName===n||t.nodeName.toLowerCase()===n.toLowerCase()}function T(t){var n=x({},t.attributes);n.children=t.children;var e=t.nodeName.defaultProps;if(void 0!==e)for(var i in e)void 0===n[i]&&(n[i]=e[i]);return n}function C(t){var n=t.parentNode;n&&n.removeChild(t)}function p(t,n,e,i,r){if("className"===n&&(n="class"),"key"===n);else if("ref"===n)h(e,null),h(i,t);else if("class"!==n||r)if("style"===n){if(i&&"string"!=typeof i&&"string"!=typeof e||(t.style.cssText=i||""),i&&"object"==typeof i){if("string"!=typeof e)for(var o in e)o in i||(t.style[o]="");for(var o in i)t.style[o]="number"==typeof i[o]&&!1===f.test(o)?i[o]+"px":i[o]}}else if("dangerouslySetInnerHTML"===n)i&&(t.innerHTML=i.__html||"");else if("o"==n[0]&&"n"==n[1]){var u=n!==(n=n.replace(/Capture$/,""));n=n.toLowerCase().substring(2),i?e||t.addEventListener(n,_,u):t.removeEventListener(n,_,u),(t._listeners||(t._listeners={}))[n]=i}else if("list"!==n&&"type"!==n&&!r&&n in t){try{t[n]=null==i?"":i}catch(t){}null!=i&&!1!==i||"spellcheck"==n||t.removeAttribute(n)}else{var s=r&&n!==(n=n.replace(/^xlink:?/,""));null==i||!1===i?s?t.removeAttributeNS("http://www.w3.org/1999/xlink",n.toLowerCase()):t.removeAttribute(n):"function"!=typeof i&&(s?t.setAttributeNS("http://www.w3.org/1999/xlink",n.toLowerCase(),i):t.setAttribute(n,i))}else t.className=i||""}function _(t){return this._listeners[t.type](t)}var O=[],P=0,v=!1,y=!1;function V(){for(var t;t=O.shift();)t.componentDidMount&&t.componentDidMount()}function L(t,n,e,i,r,o){P++||(v=null!=r&&void 0!==r.ownerSVGElement,y=null!=t&&!("__preactattr_"in t));var u=I(t,n,e,i,o);return r&&u.parentNode!==r&&r.appendChild(u),--P||(y=!1,o||V()),u}function I(t,n,e,i,r){var o=t,u=v;if(null!=n&&"boolean"!=typeof n||(n=""),"string"==typeof n||"number"==typeof n)return t&&void 0!==t.splitText&&t.parentNode&&(!t._component||r)?t.nodeValue!=n&&(t.nodeValue=n):(o=document.createTextNode(n),t&&(t.parentNode&&t.parentNode.replaceChild(o,t),N(t,!0))),o.__preactattr_=!0,o;var s,a,c=n.nodeName;if("function"==typeof c)return function(t,n,e,i){var r=t&&t._component,o=r,u=t,s=r&&t._componentConstructor===n.nodeName,a=s,c=T(n);for(;r&&!a&&(r=r._parentComponent);)a=r.constructor===n.nodeName;r&&a&&(!i||r._component)?(j(r,c,3,e,i),t=r.base):(o&&!s&&(D(o),t=u=null),r=M(n.nodeName,c,e),t&&!r.nextBase&&(r.nextBase=t,u=null),j(r,c,1,e,i),t=r.base,u&&t!==u&&(u._component=null,N(u,!1)));return t}(t,n,e,i);if(v="svg"===c||"foreignObject"!==c&&v,c=String(c),(!t||!k(t,c))&&(s=c,(a=v?document.createElementNS("http://www.w3.org/2000/svg",s):document.createElement(s)).normalizedNodeName=s,o=a,t)){for(;t.firstChild;)o.appendChild(t.firstChild);t.parentNode&&t.parentNode.replaceChild(o,t),N(t,!0)}var l=o.firstChild,h=o.__preactattr_,f=n.children;if(null==h){h=o.__preactattr_={};for(var _=o.attributes,d=_.length;d--;)h[_[d].name]=_[d].value}return!y&&f&&1===f.length&&"string"==typeof f[0]&&null!=l&&void 0!==l.splitText&&null==l.nextSibling?l.nodeValue!=f[0]&&(l.nodeValue=f[0]):(f&&f.length||null!=l)&&function(t,n,e,i,r){var o,u,s,a,c,l=t.childNodes,h=[],f={},_=0,d=0,p=l.length,v=0,y=n?n.length:0;if(0!==p)for(var m=0;m<p;m++){var g=l[m],b=g.__preactattr_,E=y&&b?g._component?g._component.__key:b.key:null;null!=E?(_++,f[E]=g):(b||(void 0!==g.splitText?!r||g.nodeValue.trim():r))&&(h[v++]=g)}if(0!==y)for(var m=0;m<y;m++){a=n[m],c=null;var E=a.key;if(null!=E)_&&void 0!==f[E]&&(c=f[E],f[E]=void 0,_--);else if(d<v)for(o=d;o<v;o++)if(void 0!==h[o]&&(w=u=h[o],A=r,"string"==typeof(S=a)||"number"==typeof S?void 0!==w.splitText:"string"==typeof S.nodeName?!w._componentConstructor&&k(w,S.nodeName):A||w._componentConstructor===S.nodeName)){c=u,h[o]=void 0,o===v-1&&v--,o===d&&d++;break}c=I(c,a,e,i),s=l[m],c&&c!==t&&c!==s&&(null==s?t.appendChild(c):c===s.nextSibling?C(s):t.insertBefore(c,s))}var w,S,A;if(_)for(var m in f)void 0!==f[m]&&N(f[m],!1);for(;d<=v;)void 0!==(c=h[v--])&&N(c,!1)}(o,f,e,i,y||null!=h.dangerouslySetInnerHTML),function(t,n,e){var i;for(i in e)n&&null!=n[i]||null==e[i]||p(t,i,e[i],e[i]=void 0,v);for(i in n)"children"===i||"innerHTML"===i||i in e&&n[i]===("value"===i||"checked"===i?t[i]:e[i])||p(t,i,e[i],e[i]=n[i],v)}(o,n.attributes,h),v=u,o}function N(t,n){var e=t._component;e?D(e):(null!=t.__preactattr_&&h(t.__preactattr_.ref,null),!1!==n&&null!=t.__preactattr_||C(t),r(t))}function r(t){for(t=t.lastChild;t;){var n=t.previousSibling;N(t,!0),t=n}}var d=[];function M(t,n,e){var i,r=d.length;for(t.prototype&&t.prototype.render?(i=new t(n,e),g.call(i,n,e)):((i=new g(n,e)).constructor=t,i.render=m);r--;)if(d[r].constructor===t)return i.nextBase=d[r].nextBase,d.splice(r,1),i;return i}function m(t,n,e){return this.constructor(t,e)}function j(t,n,e,i,r){t._disable||(t._disable=!0,t.__ref=n.ref,t.__key=n.key,delete n.ref,delete n.key,void 0===t.constructor.getDerivedStateFromProps&&(!t.base||r?t.componentWillMount&&t.componentWillMount():t.componentWillReceiveProps&&t.componentWillReceiveProps(n,i)),i&&i!==t.context&&(t.prevContext||(t.prevContext=t.context),t.context=i),t.prevProps||(t.prevProps=t.props),t.props=n,t._disable=!1,0!==e&&(1!==e&&!1===o.syncComponentUpdates&&t.base?s(t):$(t,1,r)),h(t.__ref,t))}function $(t,n,e,i){if(!t._disable){var r,o,u,s=t.props,a=t.state,c=t.context,l=t.prevProps||s,h=t.prevState||a,f=t.prevContext||c,_=t.base,d=t.nextBase,p=_||d,v=t._component,y=!1,m=f;if(t.constructor.getDerivedStateFromProps&&(a=x(x({},a),t.constructor.getDerivedStateFromProps(s,a)),t.state=a),_&&(t.props=l,t.state=h,t.context=f,2!==n&&t.shouldComponentUpdate&&!1===t.shouldComponentUpdate(s,a,c)?y=!0:t.componentWillUpdate&&t.componentWillUpdate(s,a,c),t.props=s,t.state=a,t.context=c),t.prevProps=t.prevState=t.prevContext=t.nextBase=null,t._dirty=!1,!y){r=t.render(s,a,c),t.getChildContext&&(c=x(x({},c),t.getChildContext())),_&&t.getSnapshotBeforeUpdate&&(m=t.getSnapshotBeforeUpdate(l,h));var g,b,E=r&&r.nodeName;if("function"==typeof E){var w=T(r);(o=v)&&o.constructor===E&&w.key==o.__key?j(o,w,1,c,!1):(g=o,t._component=o=M(E,w,c),o.nextBase=o.nextBase||d,o._parentComponent=t,j(o,w,0,c,!1),$(o,1,e,!0)),b=o.base}else u=p,(g=v)&&(u=t._component=null),(p||1===n)&&(u&&(u._component=null),b=L(u,r,c,e||!_,p&&p.parentNode,!0));if(p&&b!==p&&o!==v){var S=p.parentNode;S&&b!==S&&(S.replaceChild(b,p),g||(p._component=null,N(p,!1)))}if(g&&D(g),(t.base=b)&&!i){for(var A=t,k=t;k=k._parentComponent;)(A=k).base=b;b._component=A,b._componentConstructor=A.constructor}}for(!_||e?O.push(t):y||t.componentDidUpdate&&t.componentDidUpdate(l,h,m);t._renderCallbacks.length;)t._renderCallbacks.pop().call(t);P||i||V()}}function D(t){var n=t.base;t._disable=!0,t.componentWillUnmount&&t.componentWillUnmount(),t.base=null;var e=t._component;e?D(e):n&&(null!=n.__preactattr_&&h(n.__preactattr_.ref,null),C(t.nextBase=n),d.push(t),r(n)),h(t.__ref,null)}function g(t,n){this._dirty=!0,this.context=n,this.props=t,this.state=this.state||{},this._renderCallbacks=[]}function b(t,n,e){return L(e,t,{},!1,n,!1)}function E(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function w(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function S(t,n,e){return n&&w(t.prototype,n),e&&w(t,e),t}function A(){return(A=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t}).apply(this,arguments)}function F(r){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{},n=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(o).filter(function(t){return Object.getOwnPropertyDescriptor(o,t).enumerable}))),n.forEach(function(t){var n,e,i;n=r,i=o[e=t],e in n?Object.defineProperty(n,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[e]=i})}return r}function R(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&U(t,n)}function H(t){return(H=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function U(t,n){return(U=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}function W(t,n){return!n||"object"!=typeof n&&"function"!=typeof n?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):n}function B(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){var e=[],i=!0,r=!1,o=void 0;try{for(var u,s=t[Symbol.iterator]();!(i=(u=s.next()).done)&&(e.push(u.value),!n||e.length!==n);i=!0);}catch(t){r=!0,o=t}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return e}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function q(t){return function(t){if(Array.isArray(t)){for(var n=0,e=new Array(t.length);n<t.length;n++)e[n]=t[n];return e}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function t(t,n){return t(n={exports:{}},n.exports),n.exports}x(g.prototype,{setState:function(t,n){this.prevState||(this.prevState=this.state),this.state=x(x({},this.state),"function"==typeof t?t(this.state,this.props):t),n&&this._renderCallbacks.push(n),s(this)},forceUpdate:function(t){t&&this._renderCallbacks.push(t),$(this,2)},render:function(){}});var z=t(function(t){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)}),G=t(function(t){var n=t.exports={version:"2.6.3"};"number"==typeof __e&&(__e=n)}),K=(G.version,function(t){return"object"==typeof t?null!==t:"function"==typeof t}),Y=function(t){if(!K(t))throw TypeError(t+" is not an object!");return t},X=function(t){try{return!!t()}catch(t){return!0}},Q=!X(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),J=z.document,Z=K(J)&&K(J.createElement),tt=function(t){return Z?J.createElement(t):{}},nt=!Q&&!X(function(){return 7!=Object.defineProperty(tt("div"),"a",{get:function(){return 7}}).a}),et=function(t,n){if(!K(t))return t;var e,i;if(n&&"function"==typeof(e=t.toString)&&!K(i=e.call(t)))return i;if("function"==typeof(e=t.valueOf)&&!K(i=e.call(t)))return i;if(!n&&"function"==typeof(e=t.toString)&&!K(i=e.call(t)))return i;throw TypeError("Can't convert object to primitive value")},it=Object.defineProperty,rt={f:Q?Object.defineProperty:function(t,n,e){if(Y(t),n=et(n,!0),Y(e),nt)try{return it(t,n,e)}catch(t){}if("get"in e||"set"in e)throw TypeError("Accessors not supported!");return"value"in e&&(t[n]=e.value),t}},ot=function(t,n){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:n}},ut=Q?function(t,n,e){return rt.f(t,n,ot(1,e))}:function(t,n,e){return t[n]=e,t},st={}.hasOwnProperty,at=function(t,n){return st.call(t,n)},ct=0,lt=Math.random(),ht=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++ct+lt).toString(36))},ft=t(function(t){var o=ht("src"),n="toString",e=Function[n],u=(""+e).split(n);G.inspectSource=function(t){return e.call(t)},(t.exports=function(t,n,e,i){var r="function"==typeof e;r&&(at(e,"name")||ut(e,"name",n)),t[n]!==e&&(r&&(at(e,o)||ut(e,o,t[n]?""+t[n]:u.join(String(n)))),t===z?t[n]=e:i?t[n]?t[n]=e:ut(t,n,e):(delete t[n],ut(t,n,e)))})(Function.prototype,n,function(){return"function"==typeof this&&this[o]||e.call(this)})}),_t=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t},dt=function(i,r,t){if(_t(i),void 0===r)return i;switch(t){case 1:return function(t){return i.call(r,t)};case 2:return function(t,n){return i.call(r,t,n)};case 3:return function(t,n,e){return i.call(r,t,n,e)}}return function(){return i.apply(r,arguments)}},pt="prototype",vt=function(t,n,e){var i,r,o,u,s=t&vt.F,a=t&vt.G,c=t&vt.S,l=t&vt.P,h=t&vt.B,f=a?z:c?z[n]||(z[n]={}):(z[n]||{})[pt],_=a?G:G[n]||(G[n]={}),d=_[pt]||(_[pt]={});for(i in a&&(e=n),e)o=((r=!s&&f&&void 0!==f[i])?f:e)[i],u=h&&r?dt(o,z):l&&"function"==typeof o?dt(Function.call,o):o,f&&ft(f,i,o,t&vt.U),_[i]!=o&&ut(_,i,u),l&&d[i]!=o&&(d[i]=o)};z.core=G,vt.F=1,vt.G=2,vt.S=4,vt.P=8,vt.B=16,vt.W=32,vt.U=64,vt.R=128;var yt=vt,mt=function(t,n,e){var i=void 0===e;switch(n.length){case 0:return i?t():t.call(e);case 1:return i?t(n[0]):t.call(e,n[0]);case 2:return i?t(n[0],n[1]):t.call(e,n[0],n[1]);case 3:return i?t(n[0],n[1],n[2]):t.call(e,n[0],n[1],n[2]);case 4:return i?t(n[0],n[1],n[2],n[3]):t.call(e,n[0],n[1],n[2],n[3])}return t.apply(e,n)},gt=[].slice,bt={},Et=Function.bind||function(n){var e=_t(this),i=gt.call(arguments,1),r=function(){var t=i.concat(gt.call(arguments));return this instanceof r?function(t,n,e){if(!(n in bt)){for(var i=[],r=0;r<n;r++)i[r]="a["+r+"]";bt[n]=Function("F,a","return new F("+i.join(",")+")")}return bt[n](t,e)}(e,t.length,t):mt(e,t,n)};return K(e.prototype)&&(r.prototype=e.prototype),r};yt(yt.P,"Function",{bind:Et});var wt={},St=JSON.stringify;(function(t){for(var n=".",e=0;e<t.length;e++)n+=t[e].length+","+t[e];return(wt[n]||(wt[n]=function(t){for(var n,e,i,r,o,u=0,s="return ",a="",c="",l=0,h="",f="",_="",d=0,p=function(){i?9===u?(l++&&(s+=","),s+="h("+(c||St(a)),u=0):13===u||0===u&&"..."===a?(0===u?(_||(_=")",h=h?"Object.assign("+h:"Object.assign({}"),h+=f+","+c,f=""):r&&(h+=h?","+(f?"":"{"):"{",f="}",h+=St(r)+":",h+=c||(o||a)&&St(a)||"true",r=""),o=!1):0===u&&(u=13,r=a,a=c="",p(),u=0):(c||(a=a.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))&&(l++&&(s+=","),s+=c||St(a)),a=c=""},v=0;v<t.length;v++){0<v&&(i||p(),c="$["+v+"]",p());for(var y=0;y<t[v].length;y++){if(e=t[v].charCodeAt(y),i){if(39===e||34===e){if(d===e){d=0;continue}if(0===d){d=e;continue}}if(0===d)switch(e){case 62:p(),47!==u&&(s+=h?","+h+f+_:",null"),n&&(s+=")"),i=0,h="",u=1;continue;case 61:u=13,o=!0,r=a,a="";continue;case 47:n||(n=!0,9!==u||a.trim()||(a=c="",u=47));continue;case 9:case 10:case 13:case 32:p(),u=0;continue}}else if(60===e){p(),_=f=h="",n=o=!(i=1),u=9;continue}a+=t[v].charAt(y)}}return p(),Function("h","$",s)}(t)))(this,arguments)}).bind(u);var At=function(t){function n(){return E(this,n),W(this,H(n).apply(this,arguments))}return R(n,g),S(n,[{key:"componentWillReceiveProps",value:function(t){var n=this;t.visible&&(this.base.classList.remove("hidden"),this.hidingTimeout&&clearTimeout(this.hidingTimeout),this.hidingTimeout=setTimeout(function(){return n.base.classList.add("hidden")},3e3))}},{key:"componentWillUnmount",value:function(){clearInterval(this.hidingTimeout)}},{key:"render",value:function(t){return u("div",{class:"ErrorIndicator animated ".concat(t.visible?"":"hidden")},u("div",null,t.children))}}]),n}(),kt={}.toString,xt=function(t){return kt.call(t).slice(8,-1)},Tt=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==xt(t)?t.split(""):Object(t)},Ct=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t},Ot=function(t){return Object(Ct(t))},Pt=Math.ceil,Vt=Math.floor,Lt=function(t){return isNaN(t=+t)?0:(0<t?Vt:Pt)(t)},It=Math.min,Nt=function(t){return 0<t?It(Lt(t),9007199254740991):0},Mt=Array.isArray||function(t){return"Array"==xt(t)},jt=t(function(t){var n="__core-js_shared__",e=z[n]||(z[n]={});(t.exports=function(t,n){return e[t]||(e[t]=void 0!==n?n:{})})("versions",[]).push({version:G.version,mode:"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})}),$t=t(function(t){var n=jt("wks"),e=z.Symbol,i="function"==typeof e;(t.exports=function(t){return n[t]||(n[t]=i&&e[t]||(i?e:ht)("Symbol."+t))}).store=n}),Dt=$t("species"),Ft=function(t,n){return Mt(e=t)&&("function"!=typeof(i=e.constructor)||i!==Array&&!Mt(i.prototype)||(i=void 0),K(i)&&null===(i=i[Dt])&&(i=void 0)),new(void 0===i?Array:i)(n);var e,i},Rt=function(h,t){var f=1==h,_=2==h,d=3==h,p=4==h,v=6==h,y=5==h||v,m=t||Ft;return function(t,n,e){for(var i,r,o=Ot(t),u=Tt(o),s=dt(n,e,3),a=Nt(u.length),c=0,l=f?m(t,a):_?m(t,0):void 0;c<a;c++)if((y||c in u)&&(r=s(i=u[c],c,o),h))if(f)l[c]=r;else if(r)switch(h){case 3:return!0;case 5:return i;case 6:return c;case 2:l.push(i)}else if(p)return!1;return v?-1:d||p?p:l}},Ht=function(t,n){return!!t&&X(function(){n?t.call(null,function(){},1):t.call(null)})},Ut=Rt(1);yt(yt.P+yt.F*!Ht([].map,!0),"Array",{map:function(t){return Ut(this,t,arguments[1])}});var Wt=function(t){return Tt(Ct(t))},Bt=Math.max,qt=Math.min,zt=function(c){return function(t,n,e){var i,r,o,u=Wt(t),s=Nt(u.length),a=(r=s,(i=Lt(i=e))<0?Bt(i+r,0):qt(i,r));if(c&&n!=n){for(;a<s;)if((o=u[a++])!=o)return!0}else for(;a<s;a++)if((c||a in u)&&u[a]===n)return c||a||0;return!c&&-1}},Gt=zt(!1),Kt=[].indexOf,Yt=!!Kt&&1/[1].indexOf(1,-0)<0;yt(yt.P+yt.F*(Yt||!Ht(Kt)),"Array",{indexOf:function(t){return Yt?Kt.apply(this,arguments)||0:Gt(this,t,arguments[1])}});var Xt,Qt,Jt=$t("match"),Zt=function(t){var n;return K(t)&&(void 0!==(n=t[Jt])?!!n:"RegExp"==xt(t))},tn=$t("species"),nn=function(t,n){var e,i=Y(t).constructor;return void 0===i||null==(e=Y(i)[tn])?n:_t(e)},en=function(s){return function(t,n){var e,i,r=String(Ct(t)),o=Lt(n),u=r.length;return o<0||u<=o?s?"":void 0:(e=r.charCodeAt(o))<55296||56319<e||o+1===u||(i=r.charCodeAt(o+1))<56320||57343<i?s?r.charAt(o):e:s?r.slice(o,o+2):i-56320+(e-55296<<10)+65536}},rn=en(!0),on=$t("toStringTag"),un="Arguments"==xt(function(){return arguments}()),sn=function(t){var n,e,i;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(e=function(t,n){try{return t[n]}catch(t){}}(n=Object(t),on))?e:un?xt(n):"Object"==(i=xt(n))&&"function"==typeof n.callee?"Arguments":i},an=RegExp.prototype.exec,cn=function(t,n){var e=t.exec;if("function"==typeof e){var i=e.call(t,n);if("object"!=typeof i)throw new TypeError("RegExp exec method returned something other than an Object or null");return i}if("RegExp"!==sn(t))throw new TypeError("RegExp#exec called on incompatible receiver");return an.call(t,n)},ln=RegExp.prototype.exec,hn=String.prototype.replace,fn=ln,_n="lastIndex",dn=(Xt=/a/,Qt=/b*/g,ln.call(Xt,"a"),ln.call(Qt,"a"),0!==Xt[_n]||0!==Qt[_n]),pn=void 0!==/()??/.exec("")[1];(dn||pn)&&(fn=function(t){var n,e,i,r,o=this;return pn&&(e=new RegExp("^"+o.source+"$(?!\\s)",function(){var t=Y(this),n="";return t.global&&(n+="g"),t.ignoreCase&&(n+="i"),t.multiline&&(n+="m"),t.unicode&&(n+="u"),t.sticky&&(n+="y"),n}.call(o))),dn&&(n=o[_n]),i=ln.call(o,t),dn&&i&&(o[_n]=o.global?i.index+i[0].length:n),pn&&i&&1<i.length&&hn.call(i[0],e,function(){for(r=1;r<arguments.length-2;r++)void 0===arguments[r]&&(i[r]=void 0)}),i});var vn=fn;yt({target:"RegExp",proto:!0,forced:vn!==/./.exec},{exec:vn});var yn=$t("species"),mn=!X(function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}),gn=function(){var t=/(?:)/,n=t.exec;t.exec=function(){return n.apply(this,arguments)};var e="ab".split(t);return 2===e.length&&"a"===e[0]&&"b"===e[1]}(),bn=Math.min,En=[].push,wn="split",Sn="length",An="lastIndex",kn=4294967295,xn=!X(function(){});!function(e,t,n){var i=$t(e),o=!X(function(){var t={};return t[i]=function(){return 7},7!=""[e](t)}),r=o?!X(function(){var t=!1,n=/a/;return n.exec=function(){return t=!0,null},"split"===e&&(n.constructor={},n.constructor[yn]=function(){return n}),n[i](""),!t}):void 0;if(!o||!r||"replace"===e&&!mn||"split"===e&&!gn){var u=/./[i],s=n(Ct,i,""[e],function(t,n,e,i,r){return n.exec===vn?o&&!r?{done:!0,value:u.call(n,e,i)}:{done:!0,value:t.call(e,n,i)}:{done:!1}}),a=s[0],c=s[1];ft(String.prototype,e,a),ut(RegExp.prototype,i,2==t?function(t,n){return c.call(t,this,n)}:function(t){return c.call(t,this)})}}("split",2,function(r,o,m,g){var b;return b="c"=="abbc"[wn](/(b)*/)[1]||4!="test"[wn](/(?:)/,-1)[Sn]||2!="ab"[wn](/(?:ab)*/)[Sn]||4!="."[wn](/(.?)(.?)/)[Sn]||1<"."[wn](/()()/)[Sn]||""[wn](/.?/)[Sn]?function(t,n){var e=String(this);if(void 0===t&&0===n)return[];if(!Zt(t))return m.call(e,t,n);for(var i,r,o,u=[],s=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),a=0,c=void 0===n?kn:n>>>0,l=new RegExp(t.source,s+"g");(i=vn.call(l,e))&&!(a<(r=l[An])&&(u.push(e.slice(a,i.index)),1<i[Sn]&&i.index<e[Sn]&&En.apply(u,i.slice(1)),o=i[0][Sn],a=r,u[Sn]>=c));)l[An]===i.index&&l[An]++;return a===e[Sn]?!o&&l.test("")||u.push(""):u.push(e.slice(a)),u[Sn]>c?u.slice(0,c):u}:"0"[wn](void 0,0)[Sn]?function(t,n){return void 0===t&&0===n?[]:m.call(this,t,n)}:m,[function(t,n){var e=r(this),i=null==t?void 0:t[o];return void 0!==i?i.call(t,e,n):b.call(String(e),t,n)},function(t,n){var e=g(b,t,this,n,b!==m);if(e.done)return e.value;var i=Y(t),r=String(this),o=nn(i,RegExp),u=i.unicode,s=(i.ignoreCase?"i":"")+(i.multiline?"m":"")+(i.unicode?"u":"")+(xn?"y":"g"),a=new o(xn?i:"^(?:"+i.source+")",s),c=void 0===n?kn:n>>>0;if(0===c)return[];if(0===r.length)return null===cn(a,r)?[r]:[];for(var l,h,f=0,_=0,d=[];_<r.length;){a.lastIndex=xn?_:0;var p,v=cn(a,xn?r:r.slice(_));if(null===v||(p=bn(Nt(a.lastIndex+(xn?0:_)),r.length))===f)l=r,_=(h=_)+(u?rn(l,h).length:1);else{if(d.push(r.slice(f,_)),d.length===c)return d;for(var y=1;y<=v.length-1;y++)if(d.push(v[y]),d.length===c)return d;_=f=p}}return d.push(r.slice(f)),d}]});var Tn,Cn,On,Pn,Vn=jt("keys"),Ln=function(t){return Vn[t]||(Vn[t]=ht(t))},In=zt(!1),Nn=Ln("IE_PROTO"),Mn=function(t,n){var e,i=Wt(t),r=0,o=[];for(e in i)e!=Nn&&at(i,e)&&o.push(e);for(;n.length>r;)at(i,e=n[r++])&&(~In(o,e)||o.push(e));return o},jn="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),$n=Object.keys||function(t){return Mn(t,jn)};Tn="keys",Cn=function(){return function(t){return $n(Ot(t))}},On=(G.Object||{})[Tn]||Object[Tn],(Pn={})[Tn]=Cn(On),yt(yt.S+yt.F*X(function(){On(1)}),"Object",Pn);var Dn=$t("unscopables"),Fn=Array.prototype;null==Fn[Dn]&&ut(Fn,Dn,{});var Rn=function(t){Fn[Dn][t]=!0},Hn=zt(!0);yt(yt.P,"Array",{includes:function(t){return Hn(this,t,1<arguments.length?arguments[1]:void 0)}}),Rn("includes");var Un=$t("match"),Wn="includes";yt(yt.P+yt.F*function(n){var e=/./;try{"/./"[n](e)}catch(t){try{return e[Un]=!1,!"/./"[n](e)}catch(t){}}return!0}(Wn),"String",{includes:function(t){return!!~function(t,n,e){if(Zt(n))throw TypeError("String#"+e+" doesn't accept regex!");return String(Ct(t))}(this,t,Wn).indexOf(t,1<arguments.length?arguments[1]:void 0)}});var Bn=function(t,n){return{value:n,done:!!t}},qn={},zn=Q?Object.defineProperties:function(t,n){Y(t);for(var e,i=$n(n),r=i.length,o=0;o<r;)rt.f(t,e=i[o++],n[e]);return t},Gn=z.document,Kn=Gn&&Gn.documentElement,Yn=Ln("IE_PROTO"),Xn=function(){},Qn="prototype",Jn=function(){var t,n=tt("iframe"),e=jn.length;for(n.style.display="none",Kn.appendChild(n),n.src="javascript:",(t=n.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),Jn=t.F;e--;)delete Jn[Qn][jn[e]];return Jn()},Zn=Object.create||function(t,n){var e;return null!==t?(Xn[Qn]=Y(t),e=new Xn,Xn[Qn]=null,e[Yn]=t):e=Jn(),void 0===n?e:zn(e,n)},te=rt.f,ne=$t("toStringTag"),ee=function(t,n,e){t&&!at(t=e?t:t.prototype,ne)&&te(t,ne,{configurable:!0,value:n})},ie={};ut(ie,$t("iterator"),function(){return this});var re=Ln("IE_PROTO"),oe=Object.prototype,ue=Object.getPrototypeOf||function(t){return t=Ot(t),at(t,re)?t[re]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?oe:null},se=$t("iterator"),ae=!([].keys&&"next"in[].keys()),ce="values",le=function(){return this},he=function(t,n,e,i,r,o,u){var s,a,c;a=n,c=i,(s=e).prototype=Zn(ie,{next:ot(1,c)}),ee(s,a+" Iterator");var l,h,f,_=function(t){if(!ae&&t in y)return y[t];switch(t){case"keys":case ce:return function(){return new e(this,t)}}return function(){return new e(this,t)}},d=n+" Iterator",p=r==ce,v=!1,y=t.prototype,m=y[se]||y["@@iterator"]||r&&y[r],g=m||_(r),b=r?p?_("entries"):g:void 0,E="Array"==n&&y.entries||m;if(E&&(f=ue(E.call(new t)))!==Object.prototype&&f.next&&(ee(f,d,!0),"function"!=typeof f[se]&&ut(f,se,le)),p&&m&&m.name!==ce&&(v=!0,g=function(){return m.call(this)}),(ae||v||!y[se])&&ut(y,se,g),qn[n]=g,qn[d]=le,r)if(l={values:p?g:_(ce),keys:o?g:_("keys"),entries:b},u)for(h in l)h in y||ft(y,h,l[h]);else yt(yt.P+yt.F*(ae||v),n,l);return l},fe=he(Array,"Array",function(t,n){this._t=Wt(t),this._i=0,this._k=n},function(){var t=this._t,n=this._k,e=this._i++;return!t||e>=t.length?(this._t=void 0,Bn(1)):Bn(0,"keys"==n?e:"values"==n?t[e]:[e,t[e]])},"values");qn.Arguments=qn.Array,Rn("keys"),Rn("values"),Rn("entries");for(var _e=$t("iterator"),de=$t("toStringTag"),pe=qn.Array,ve={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},ye=$n(ve),me=0;me<ye.length;me++){var ge,be=ye[me],Ee=ve[be],we=z[be],Se=we&&we.prototype;if(Se&&(Se[_e]||ut(Se,_e,pe),Se[de]||ut(Se,de,be),qn[be]=pe,Ee))for(ge in fe)Se[ge]||ft(Se,ge,fe[ge],!0)}var Ae,ke={f:{}.propertyIsEnumerable},xe=ke.f,Te=(Ae=!0,function(t){for(var n,e=Wt(t),i=$n(e),r=i.length,o=0,u=[];o<r;)xe.call(e,n=i[o++])&&u.push(Ae?[n,e[n]]:e[n]);return u});yt(yt.S,"Object",{entries:function(t){return Te(t)}});var Ce=Rt(2);yt(yt.P+yt.F*!Ht([].filter,!0),"Array",{filter:function(t){return Ce(this,t,arguments[1])}});var Oe,Pe,Ve,Le=function(t,n,e,i){if(!(t instanceof n)||void 0!==i&&i in t)throw TypeError(e+": incorrect invocation!");return t},Ie=function(n,t,e,i){try{return i?t(Y(e)[0],e[1]):t(e)}catch(t){var r=n.return;throw void 0!==r&&Y(r.call(n)),t}},Ne=$t("iterator"),Me=Array.prototype,je=$t("iterator"),$e=G.getIteratorMethod=function(t){if(null!=t)return t[je]||t["@@iterator"]||qn[sn(t)]},De=t(function(t){var _={},d={},n=t.exports=function(t,n,e,i,r){var o,u,s,a,c,l=r?function(){return t}:$e(t),h=dt(e,i,n?2:1),f=0;if("function"!=typeof l)throw TypeError(t+" is not iterable!");if(void 0===(c=l)||qn.Array!==c&&Me[Ne]!==c){for(s=l.call(t);!(u=s.next()).done;)if((a=Ie(s,h,u.value,n))===_||a===d)return a}else for(o=Nt(t.length);f<o;f++)if((a=n?h(Y(u=t[f])[0],u[1]):h(t[f]))===_||a===d)return a};n.BREAK=_,n.RETURN=d}),Fe=z.process,Re=z.setImmediate,He=z.clearImmediate,Ue=z.MessageChannel,We=z.Dispatch,Be=0,qe={},ze="onreadystatechange",Ge=function(){var t=+this;if(qe.hasOwnProperty(t)){var n=qe[t];delete qe[t],n()}},Ke=function(t){Ge.call(t.data)};Re&&He||(Re=function(t){for(var n=[],e=1;arguments.length>e;)n.push(arguments[e++]);return qe[++Be]=function(){mt("function"==typeof t?t:Function(t),n)},Oe(Be),Be},He=function(t){delete qe[t]},"process"==xt(Fe)?Oe=function(t){Fe.nextTick(dt(Ge,t,1))}:We&&We.now?Oe=function(t){We.now(dt(Ge,t,1))}:Ue?(Ve=(Pe=new Ue).port2,Pe.port1.onmessage=Ke,Oe=dt(Ve.postMessage,Ve,1)):z.addEventListener&&"function"==typeof postMessage&&!z.importScripts?(Oe=function(t){z.postMessage(t+"","*")},z.addEventListener("message",Ke,!1)):Oe=ze in tt("script")?function(t){Kn.appendChild(tt("script"))[ze]=function(){Kn.removeChild(this),Ge.call(t)}}:function(t){setTimeout(dt(Ge,t,1),0)});var Ye={set:Re,clear:He},Xe=Ye.set,Qe=z.MutationObserver||z.WebKitMutationObserver,Je=z.process,Ze=z.Promise,ti="process"==xt(Je);function ni(t){var e,i;this.promise=new t(function(t,n){if(void 0!==e||void 0!==i)throw TypeError("Bad Promise constructor");e=t,i=n}),this.resolve=_t(e),this.reject=_t(i)}var ei={f:function(t){return new ni(t)}},ii=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}},ri=z.navigator,oi=ri&&ri.userAgent||"",ui=function(t,n,e){for(var i in n)ft(t,i,n[i],e);return t},si=$t("species"),ai=function(t){var n=z[t];Q&&n&&!n[si]&&rt.f(n,si,{configurable:!0,get:function(){return this}})},ci=$t("iterator"),li=!1;try{[7][ci]().return=function(){li=!0}}catch(St){}var hi,fi,_i,di,pi=function(t,n){if(!n&&!li)return!1;var e=!1;try{var i=[7],r=i[ci]();r.next=function(){return{done:e=!0}},i[ci]=function(){return r},t(i)}catch(t){}return e},vi=Ye.set,yi=function(){var e,i,r,t=function(){var t,n;for(ti&&(t=Je.domain)&&t.exit();e;){n=e.fn,e=e.next;try{n()}catch(t){throw e?r():i=void 0,t}}i=void 0,t&&t.enter()};if(ti)r=function(){Je.nextTick(t)};else if(!Qe||z.navigator&&z.navigator.standalone)if(Ze&&Ze.resolve){var n=Ze.resolve(void 0);r=function(){n.then(t)}}else r=function(){Xe.call(z,t)};else{var o=!0,u=document.createTextNode("");new Qe(t).observe(u,{characterData:!0}),r=function(){u.data=o=!o}}return function(t){var n={fn:t,next:void 0};i&&(i.next=n),e||(e=n,r()),i=n}}(),mi="Promise",gi=z.TypeError,bi=z.process,Ei=bi&&bi.versions,wi=Ei&&Ei.v8||"",Si=z[mi],Ai="process"==sn(bi),ki=function(){},xi=fi=ei.f,Ti=!!function(){try{var t=Si.resolve(1),n=(t.constructor={})[$t("species")]=function(t){t(ki,ki)};return(Ai||"function"==typeof PromiseRejectionEvent)&&t.then(ki)instanceof n&&0!==wi.indexOf("6.6")&&-1===oi.indexOf("Chrome/66")}catch(t){}}(),Ci=function(t){var n;return!(!K(t)||"function"!=typeof(n=t.then))&&n},Oi=function(l,e){if(!l._n){l._n=!0;var i=l._c;yi(function(){for(var a=l._v,c=1==l._s,t=0,n=function(t){var n,e,i,r=c?t.ok:t.fail,o=t.resolve,u=t.reject,s=t.domain;try{r?(c||(2==l._h&&Li(l),l._h=1),!0===r?n=a:(s&&s.enter(),n=r(a),s&&(s.exit(),i=!0)),n===t.promise?u(gi("Promise-chain cycle")):(e=Ci(n))?e.call(n,o,u):o(n)):u(a)}catch(t){s&&!i&&s.exit(),u(t)}};i.length>t;)n(i[t++]);l._c=[],l._n=!1,e&&!l._h&&Pi(l)})}},Pi=function(o){vi.call(z,function(){var t,n,e,i=o._v,r=Vi(o);if(r&&(t=ii(function(){Ai?bi.emit("unhandledRejection",i,o):(n=z.onunhandledrejection)?n({promise:o,reason:i}):(e=z.console)&&e.error&&e.error("Unhandled promise rejection",i)}),o._h=Ai||Vi(o)?2:1),o._a=void 0,r&&t.e)throw t.v})},Vi=function(t){return 1!==t._h&&0===(t._a||t._c).length},Li=function(n){vi.call(z,function(){var t;Ai?bi.emit("rejectionHandled",n):(t=z.onrejectionhandled)&&t({promise:n,reason:n._v})})},Ii=function(t){var n=this;n._d||(n._d=!0,(n=n._w||n)._v=t,n._s=2,n._a||(n._a=n._c.slice()),Oi(n,!0))},Ni=function(t){var e,i=this;if(!i._d){i._d=!0,i=i._w||i;try{if(i===t)throw gi("Promise can't be resolved itself");(e=Ci(t))?yi(function(){var n={_w:i,_d:!1};try{e.call(t,dt(Ni,n,1),dt(Ii,n,1))}catch(t){Ii.call(n,t)}}):(i._v=t,i._s=1,Oi(i,!1))}catch(t){Ii.call({_w:i,_d:!1},t)}}};Ti||(Si=function(t){Le(this,Si,mi,"_h"),_t(t),hi.call(this);try{t(dt(Ni,this,1),dt(Ii,this,1))}catch(t){Ii.call(this,t)}},(hi=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=ui(Si.prototype,{then:function(t,n){var e=xi(nn(this,Si));return e.ok="function"!=typeof t||t,e.fail="function"==typeof n&&n,e.domain=Ai?bi.domain:void 0,this._c.push(e),this._a&&this._a.push(e),this._s&&Oi(this,!1),e.promise},catch:function(t){return this.then(void 0,t)}}),_i=function(){var t=new hi;this.promise=t,this.resolve=dt(Ni,t,1),this.reject=dt(Ii,t,1)},ei.f=xi=function(t){return t===Si||t===di?new _i(t):fi(t)}),yt(yt.G+yt.W+yt.F*!Ti,{Promise:Si}),ee(Si,mi),ai(mi),di=G[mi],yt(yt.S+yt.F*!Ti,mi,{reject:function(t){var n=xi(this);return(0,n.reject)(t),n.promise}}),yt(yt.S+yt.F*!Ti,mi,{resolve:function(t){return function(t,n){if(Y(t),K(n)&&n.constructor===t)return n;var e=ei.f(t);return(0,e.resolve)(n),e.promise}(this,t)}}),yt(yt.S+yt.F*!(Ti&&pi(function(t){Si.all(t).catch(ki)})),mi,{all:function(t){var u=this,n=xi(u),s=n.resolve,a=n.reject,e=ii(function(){var i=[],r=0,o=1;De(t,!1,function(t){var n=r++,e=!1;i.push(void 0),o++,u.resolve(t).then(function(t){e||(e=!0,i[n]=t,--o||s(i))},a)}),--o||s(i)});return e.e&&a(e.v),n.promise},race:function(t){var n=this,e=xi(n),i=e.reject,r=ii(function(){De(t,!1,function(t){n.resolve(t).then(e.resolve,i)})});return r.e&&i(r.v),e.promise}});var Mi=rt.f,ji=Function.prototype,$i=/^\s*function ([^ (]*)/;"name"in ji||Q&&Mi(ji,"name",{configurable:!0,get:function(){try{return(""+this).match($i)[1]}catch(t){return""}}});function Di(t){var n=arguments.length,e=void 0,i=void 0;for(e=1;e<n;e++)for(i in arguments[e])t[i]=arguments[e][i];return t}function Fi(t,n){var e,i,r=arguments.length,o=void 0;for(t.prototype=(e=n.prototype,(i=function(){}).prototype=e,new i),t.prototype.constructor=t,o=2;o<r;o++)Di(t.prototype,arguments[o]);return t}var Ri=["<nothing>"],Hi="end",Ui="value",Wi="error",Bi="any";function qi(t,n){var e=void 0,i=void 0,r=void 0,o=void 0;if(0===t.length)return n;if(0===n.length)return t;for(o=0,e=new Array(t.length+n.length),i=t.length,r=0;r<i;r++,o++)e[o]=t[r];for(i=n.length,r=0;r<i;r++,o++)e[o]=n[r];return e}function zi(t,n){var e=t.length,i=void 0;for(i=0;i<e;i++)if(t[i]===n)return i;return-1}function Gi(t,n){var e=t.length,i=void 0;for(i=0;i<e;i++)if(n(t[i]))return i;return-1}function Ki(t){var n=t.length,e=new Array(n),i=void 0;for(i=0;i<n;i++)e[i]=t[i];return e}function Yi(t,n){var e=t.length,i=void 0,r=void 0,o=void 0;if(0<=n&&n<e){if(1===e)return[];for(i=new Array(e-1),o=r=0;r<e;r++)r!==n&&(i[o]=t[r],o++);return i}return t}function Xi(t,n){var e=t.length,i=new Array(e),r=void 0;for(r=0;r<e;r++)i[r]=n(t[r]);return i}function Qi(t,n,e){t===Bi?n(e):t===e.type&&(t===Ui||t===Wi?n(e.value):n())}function Ji(){this._items=[],this._spies=[],this._inLoop=0,this._removedItems=null}function Zi(){this._dispatcher=new Ji,this._active=!1,this._alive=!0,this._activating=!1,this._logHandlers=null,this._spyHandlers=null}function tr(){Zi.call(this)}function nr(){Zi.call(this),this._currentEvent=null}Di(Ji.prototype,{add:function(t,n){return this._items=qi(this._items,[{type:t,fn:n}]),this._items.length},remove:function(n,e){var t=Gi(this._items,function(t){return t.type===n&&t.fn===e});return 0!==this._inLoop&&-1!==t&&(null===this._removedItems&&(this._removedItems=[]),this._removedItems.push(this._items[t])),this._items=Yi(this._items,t),this._items.length},addSpy:function(t){return this._spies=qi(this._spies,[t]),this._spies.length},removeSpy:function(t){return this._spies=Yi(this._spies,this._spies.indexOf(t)),this._spies.length},dispatch:function(t){this._inLoop++;for(var n=0,e=this._spies;null!==this._spies&&n<e.length;n++)e[n](t);for(var i=0,r=this._items;i<r.length&&null!==this._items;i++)null!==this._removedItems&&(o=this._removedItems,u=r[i],-1!==zi(o,u))||Qi(r[i].type,r[i].fn,t);var o,u;this._inLoop--,0===this._inLoop&&(this._removedItems=null)},cleanup:function(){this._items=null,this._spies=null}}),Di(Zi.prototype,{_name:"observable",_onActivation:function(){},_onDeactivation:function(){},_setActive:function(t){this._active!==t&&((this._active=t)?(this._activating=!0,this._onActivation(),this._activating=!1):this._onDeactivation())},_clear:function(){this._setActive(!1),this._dispatcher.cleanup(),this._dispatcher=null,this._logHandlers=null},_emit:function(t,n){switch(t){case Ui:return this._emitValue(n);case Wi:return this._emitError(n);case Hi:return this._emitEnd()}},_emitValue:function(t){this._alive&&this._dispatcher.dispatch({type:Ui,value:t})},_emitError:function(t){this._alive&&this._dispatcher.dispatch({type:Wi,value:t})},_emitEnd:function(){this._alive&&(this._alive=!1,this._dispatcher.dispatch({type:Hi}),this._clear())},_on:function(t,n){return this._alive?(this._dispatcher.add(t,n),this._setActive(!0)):Qi(t,n,{type:Hi}),this},_off:function(t,n){this._alive&&(0===this._dispatcher.remove(t,n)&&this._setActive(!1));return this},onValue:function(t){return this._on(Ui,t)},onError:function(t){return this._on(Wi,t)},onEnd:function(t){return this._on(Hi,t)},onAny:function(t){return this._on(Bi,t)},offValue:function(t){return this._off(Ui,t)},offError:function(t){return this._off(Wi,t)},offEnd:function(t){return this._off(Hi,t)},offAny:function(t){return this._off(Bi,t)},observe:function(t,n,e){var i=this,r=!1,o=t&&"function"!=typeof t?t:{value:t,error:n,end:e},u=function(t){t.type===Hi&&(r=!0),t.type===Ui&&o.value?o.value(t.value):t.type===Wi&&o.error?o.error(t.value):t.type===Hi&&o.end&&o.end(t.value)};return this.onAny(u),{unsubscribe:function(){r||(i.offAny(u),r=!0)},get closed(){return r}}},_ofSameType:function(t,n){return t.prototype.getType()===this.getType()?t:n},setName:function(t,n){return this._name=n?t._name+"."+n:t,this},log:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.toString(),i=void 0,t=function(t){var n="<"+t.type+(i?":current":"")+">";t.type===Hi?console.log(e,n):console.log(e,n,t.value)};return this._alive&&(this._logHandlers||(this._logHandlers=[]),this._logHandlers.push({name:e,handler:t})),i=!0,this.onAny(t),i=!1,this},offLog:function(){var n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.toString();if(this._logHandlers){var t=Gi(this._logHandlers,function(t){return t.name===n});-1!==t&&(this.offAny(this._logHandlers[t].handler),this._logHandlers.splice(t,1))}return this},spy:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.toString(),t=function(t){var n="<"+t.type+">";t.type===Hi?console.log(e,n):console.log(e,n,t.value)};return this._alive&&(this._spyHandlers||(this._spyHandlers=[]),this._spyHandlers.push({name:e,handler:t}),this._dispatcher.addSpy(t)),this},offSpy:function(){var n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.toString();if(this._spyHandlers){var t=Gi(this._spyHandlers,function(t){return t.name===n});-1!==t&&(this._dispatcher.removeSpy(this._spyHandlers[t].handler),this._spyHandlers.splice(t,1))}return this}}),Zi.prototype.toString=function(){return"["+this._name+"]"},Fi(tr,Zi,{_name:"stream",getType:function(){return"stream"}}),Fi(nr,Zi,{_name:"property",_emitValue:function(t){this._alive&&(this._currentEvent={type:Ui,value:t},this._activating||this._dispatcher.dispatch({type:Ui,value:t}))},_emitError:function(t){this._alive&&(this._currentEvent={type:Wi,value:t},this._activating||this._dispatcher.dispatch({type:Wi,value:t}))},_emitEnd:function(){this._alive&&(this._alive=!1,this._activating||this._dispatcher.dispatch({type:Hi}),this._clear())},_on:function(t,n){return this._alive&&(this._dispatcher.add(t,n),this._setActive(!0)),null!==this._currentEvent&&Qi(t,n,this._currentEvent),this._alive||Qi(t,n,{type:Hi}),this},getType:function(){return"property"}});var er=new tr;function ir(){return er}function rr(t){function n(t,n){var e=this;tr.call(this),this._wait=t,this._intervalId=null,this._$onTick=function(){return e._onTick()},this._init(n)}return Fi(n,tr,{_init:function(){},_free:function(){},_onTick:function(){},_onActivation:function(){this._intervalId=setInterval(this._$onTick,this._wait)},_onDeactivation:function(){null!==this._intervalId&&(clearInterval(this._intervalId),this._intervalId=null)},_clear:function(){tr.prototype._clear.call(this),this._$onTick=null,this._free()}},t),n}er._emitEnd(),er._name="never";var or=rr({_name:"later",_init:function(t){var n=t.x;this._x=n},_free:function(){this._x=null},_onTick:function(){this._emitValue(this._x),this._emitEnd()}});var ur=rr({_name:"interval",_init:function(t){var n=t.x;this._x=n},_free:function(){this._x=null},_onTick:function(){this._emitValue(this._x)}});var sr=rr({_name:"sequentially",_init:function(t){var n=t.xs;this._xs=Ki(n)},_free:function(){this._xs=null},_onTick:function(){1===this._xs.length?(this._emitValue(this._xs[0]),this._emitEnd()):this._emitValue(this._xs.shift())}});var ar=rr({_name:"fromPoll",_init:function(t){var n=t.fn;this._fn=n},_free:function(){this._fn=null},_onTick:function(){var t=this._fn;this._emitValue(t())}});function cr(n){function t(t){return n._emitValue(t),n._active}function e(t){return n._emit(t.type,t.value),n._active}return{value:t,error:function(t){return n._emitError(t),n._active},end:function(){return n._emitEnd(),n._active},event:e,emit:t,emitEvent:e}}var lr=rr({_name:"withInterval",_init:function(t){var n=t.fn;this._fn=n,this._emitter=cr(this)},_free:function(){this._fn=null,this._emitter=null},_onTick:function(){(0,this._fn)(this._emitter)}});function hr(t){tr.call(this),this._fn=t,this._unsubscribe=null}function fr(t){return new hr(t)}function _r(n,t){switch(t){case 0:return function(){return n()};case 1:return function(t){return n(t[0])};case 2:return function(t){return n(t[0],t[1])};case 3:return function(t){return n(t[0],t[1],t[2])};case 4:return function(t){return n(t[0],t[1],t[2],t[3])};default:return function(t){return n.apply(null,t)}}}Fi(hr,tr,{_name:"stream",_onActivation:function(){var t=(0,this._fn)(cr(this));this._unsubscribe="function"==typeof t?t:null,this._active||this._callUnsubscribe()},_callUnsubscribe:function(){null!==this._unsubscribe&&(this._unsubscribe(),this._unsubscribe=null)},_onDeactivation:function(){this._callUnsubscribe()},_clear:function(){tr.prototype._clear.call(this),this._fn=null}});var dr=[["addEventListener","removeEventListener"],["addListener","removeListener"],["on","off"]];function pr(t){this._currentEvent={type:"value",value:t,current:!0}}function vr(t){return new pr(t)}function yr(t){this._currentEvent={type:"error",value:t,current:!0}}function mr(i,r){return function(t,n){var e=this;i.call(this),this._source=t,this._name=t._name+"."+r,this._init(n),this._$handleAny=function(t){return e._handleAny(t)}}}function gr(t){return{_init:function(){},_free:function(){},_handleValue:function(t){this._emitValue(t)},_handleError:function(t){this._emitError(t)},_handleEnd:function(){this._emitEnd()},_handleAny:function(t){switch(t.type){case Ui:return this._handleValue(t.value);case Wi:return this._handleError(t.value);case Hi:return this._handleEnd()}},_onActivation:function(){this._source.onAny(this._$handleAny)},_onDeactivation:function(){this._source.offAny(this._$handleAny)},_clear:function(){t.prototype._clear.call(this),this._source=null,this._$handleAny=null,this._free()}}}function br(t,n){var e=mr(tr,t);return Fi(e,tr,gr(tr),n),e}function Er(t,n){var e=mr(nr,t);return Fi(e,nr,gr(nr),n),e}Fi(pr,nr,{_name:"constant",_active:!1,_activating:!1,_alive:!1,_dispatcher:null,_logHandlers:null}),Fi(yr,nr,{_name:"constantError",_active:!1,_activating:!1,_alive:!1,_dispatcher:null,_logHandlers:null});var wr=Er("toProperty",{_init:function(t){var n=t.fn;this._getInitialCurrent=n},_onActivation:function(){if(null!==this._getInitialCurrent){var t=this._getInitialCurrent;this._emitValue(t())}this._source.onAny(this._$handleAny)}});function Sr(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;if(null!==n&&"function"!=typeof n)throw new Error("You should call toProperty() with a function or no arguments.");return new wr(t,{fn:n})}var Ar=br("changes",{_handleValue:function(t){this._activating||this._emitValue(t)},_handleError:function(t){this._activating||this._emitError(t)}});var kr=function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){if("function"==typeof Promise)return Promise;throw new Error("There isn't default Promise, use shim or parameter")}(),i=null;return new n(function(n,e){t.onAny(function(t){i=t.type===Hi&&null!==i?((i.type===Ui?n:e)(i.value),null):t})})},xr="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function Tr(t,n){return t(n={exports:{}},n.exports),n.exports}var Cr=Tr(function(t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){var n,e=t.Symbol;"function"==typeof e?e.observable?n=e.observable:(n=e("observable"),e.observable=n):n="@@observable";return n}}),Or=Tr(function(t,n){Object.defineProperty(n,"__esModule",{value:!0});var e,i,r=(e=Cr)&&e.__esModule?e:{default:e};i="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==xr?xr:t;var o=(0,r.default)(i);n.default=o}),Pr=Or.default?Or.default:Or;function Vr(t){this._observable=t.takeErrors(1)}function Lr(){return new Vr(this)}function Ir(t,n,e){for(var i in t)t.hasOwnProperty(i)&&(n.push(i),e.push(t[i]))}function Nr(t,n,e){var i=this;tr.call(this),this._activeCount=t.length,this._sources=qi(t,n),this._combinator=e,this._aliveCount=0,this._latestValues=new Array(this._sources.length),this._latestErrors=new Array(this._sources.length),function(t,n){var e=t.length,i=void 0;for(i=0;i<e;i++)t[i]=n}(this._latestValues,Ri),this._emitAfterActivation=!1,this._endAfterActivation=!1,this._latestErrorIndex=0,this._$handlers=[];for(var r=function(n){i._$handlers.push(function(t){return i._handleAny(n,t)})},o=0;o<this._sources.length;o++)r(o)}function Mr(t,n,e){return"function"==typeof n&&(e=n,n=void 0),Array.isArray(t)?function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],e=arguments[2];if(!Array.isArray(n))throw new Error("Combine can only combine active and passive collections of the same type.");return e=e?_r(e,t.length+n.length):function(t){return t},0===t.length?ir():new Nr(t,n,e)}(t,n,e):function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=arguments[2];if("object"!=typeof n||Array.isArray(n))throw new Error("Combine can only combine active and passive collections of the same type.");var r=[],e=[],o=[];return Ir(t,r,e),Ir(n,r,o),0===e.length?ir():new Nr(e,o,function(t){for(var n={},e=t.length-1;0<=e;e--)n[r[e]]=t[e];return i?i(n):n})}(t,n,e)}Di(Vr.prototype,{subscribe:function(t,n,e){var i=this,r="function"==typeof t?{next:t,error:n,complete:e}:t,o=function(t){t.type===Hi&&(u=!0),t.type===Ui&&r.next?r.next(t.value):t.type===Wi&&r.error?r.error(t.value):t.type===Hi&&r.complete&&r.complete(t.value)};this._observable.onAny(o);var u=!1;return{unsubscribe:function(){u=!0,i._observable.offAny(o)},get closed(){return u}}}}),Vr.prototype[Pr]=function(){return this},Fi(Nr,tr,{_name:"combine",_onActivation:function(){this._aliveCount=this._activeCount;for(var t=this._activeCount;t<this._sources.length;t++)this._sources[t].onAny(this._$handlers[t]);for(var n=0;n<this._activeCount;n++)this._sources[n].onAny(this._$handlers[n]);this._emitAfterActivation&&(this._emitAfterActivation=!1,this._emitIfFull()),this._endAfterActivation&&this._emitEnd()},_onDeactivation:function(){var t=this._sources.length,n=void 0;for(n=0;n<t;n++)this._sources[n].offAny(this._$handlers[n])},_emitIfFull:function(){for(var t=!0,n=!1,e=this._latestValues.length,i=new Array(e),r=new Array(e),o=0;o<e;o++)i[o]=this._latestValues[o],r[o]=this._latestErrors[o],i[o]===Ri&&(t=!1),void 0!==r[o]&&(n=!0);if(t){var u=this._combinator;this._emitValue(u(i))}n&&this._emitError(function(t){for(var n=void 0,e=0;e<t.length;e++)void 0!==t[e]&&(void 0===n||n.index<t[e].index)&&(n=t[e]);return n.error}(r))},_handleAny:function(t,n){n.type===Ui||n.type===Wi?(n.type===Ui&&(this._latestValues[t]=n.value,this._latestErrors[t]=void 0),n.type===Wi&&(this._latestValues[t]=Ri,this._latestErrors[t]={index:this._latestErrorIndex++,error:n.value}),t<this._activeCount&&(this._activating?this._emitAfterActivation=!0:this._emitIfFull())):t<this._activeCount&&(this._aliveCount--,0===this._aliveCount&&(this._activating?this._endAfterActivation=!0:this._emitEnd()))},_clear:function(){tr.prototype._clear.call(this),this._sources=null,this._latestValues=null,this._latestErrors=null,this._combinator=null,this._$handlers=null}});var jr={empty:function(){return ir()},concat:function(t,n){return t.merge(n)},of:function(t){return vr(t)},map:function(t,n){return n.map(t)},bimap:function(t,n,e){return e.mapErrors(t).map(n)},ap:function(t,n){return Mr([t,n],function(t,n){return t(n)})},chain:function(t,n){return n.flatMap(t)}},$r=Object.freeze({Observable:jr}),Dr={_init:function(t){var n=t.fn;this._fn=n},_free:function(){this._fn=null},_handleValue:function(t){var n=this._fn;this._emitValue(n(t))}},Fr=br("map",Dr),Rr=Er("map",Dr),Hr=function(t){return t};function Ur(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:Hr;return new(t._ofSameType(Fr,Rr))(t,{fn:n})}var Wr={_init:function(t){var n=t.fn;this._fn=n},_free:function(){this._fn=null},_handleValue:function(t){(0,this._fn)(t)&&this._emitValue(t)}},Br=br("filter",Wr),qr=Er("filter",Wr),zr=function(t){return t};var Gr={_init:function(t){var n=t.n;(this._n=n)<=0&&this._emitEnd()},_handleValue:function(t){0!==this._n&&(this._n--,this._emitValue(t),0===this._n&&this._emitEnd())}},Kr=br("take",Gr),Yr=Er("take",Gr);var Xr={_init:function(t){var n=t.n;(this._n=n)<=0&&this._emitEnd()},_handleError:function(t){0!==this._n&&(this._n--,this._emitError(t),0===this._n&&this._emitEnd())}},Qr=br("takeErrors",Xr),Jr=Er("takeErrors",Xr);var Zr={_init:function(t){var n=t.fn;this._fn=n},_free:function(){this._fn=null},_handleValue:function(t){(0,this._fn)(t)?this._emitValue(t):this._emitEnd()}},to=br("takeWhile",Zr),no=Er("takeWhile",Zr),eo=function(t){return t};var io={_init:function(){this._lastValue=Ri},_free:function(){this._lastValue=null},_handleValue:function(t){this._lastValue=t},_handleEnd:function(){this._lastValue!==Ri&&this._emitValue(this._lastValue),this._emitEnd()}},ro=br("last",io),oo=Er("last",io);var uo={_init:function(t){var n=t.n;this._n=Math.max(0,n)},_handleValue:function(t){0===this._n?this._emitValue(t):this._n--}},so=br("skip",uo),ao=Er("skip",uo);var co={_init:function(t){var n=t.fn;this._fn=n},_free:function(){this._fn=null},_handleValue:function(t){var n=this._fn;null===this._fn||n(t)||(this._fn=null),null===this._fn&&this._emitValue(t)}},lo=br("skipWhile",co),ho=Er("skipWhile",co),fo=function(t){return t};var _o={_init:function(t){var n=t.fn;this._fn=n,this._prev=Ri},_free:function(){this._fn=null,this._prev=null},_handleValue:function(t){var n=this._fn;this._prev!==Ri&&n(this._prev,t)||(this._prev=t,this._emitValue(t))}},po=br("skipDuplicates",_o),vo=Er("skipDuplicates",_o),yo=function(t,n){return t===n};function mo(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:yo;return new(t._ofSameType(po,vo))(t,{fn:n})}var go={_init:function(t){var n=t.fn,e=t.seed;this._fn=n,this._prev=e},_free:function(){this._prev=null,this._fn=null},_handleValue:function(t){if(this._prev!==Ri){var n=this._fn;this._emitValue(n(this._prev,t))}this._prev=t}},bo=br("diff",go),Eo=Er("diff",go);function wo(t,n){return[t,n]}var So=Er("scan",{_init:function(t){var n=t.fn,e=t.seed;this._fn=n,(this._seed=e)!==Ri&&this._emitValue(e)},_free:function(){this._fn=null,this._seed=null},_handleValue:function(t){var n=this._fn;null===this._currentEvent||this._currentEvent.type===Wi?this._emitValue(this._seed===Ri?t:n(this._seed,t)):this._emitValue(n(this._currentEvent.value,t))}});var Ao=br("flatten",{_init:function(t){var n=t.fn;this._fn=n},_free:function(){this._fn=null},_handleValue:function(t){for(var n=(0,this._fn)(t),e=0;e<n.length;e++)this._emitValue(n[e])}}),ko=function(t){return t};var xo={},To={_init:function(t){var n=this,e=t.wait;this._wait=Math.max(0,e),this._buff=[],this._$shiftBuff=function(){var t=n._buff.shift();t===xo?n._emitEnd():n._emitValue(t)}},_free:function(){this._buff=null,this._$shiftBuff=null},_handleValue:function(t){this._activating?this._emitValue(t):(this._buff.push(t),setTimeout(this._$shiftBuff,this._wait))},_handleEnd:function(){this._activating?this._emitEnd():(this._buff.push(xo),setTimeout(this._$shiftBuff,this._wait))}},Co=br("delay",To),Oo=Er("delay",To);var Po=Date.now?function(){return Date.now()}:function(){return(new Date).getTime()},Vo={_init:function(t){var n=this,e=t.wait,i=t.leading,r=t.trailing;this._wait=Math.max(0,e),this._leading=i,this._trailing=r,this._trailingValue=null,this._timeoutId=null,this._endLater=!1,this._lastCallTime=0,this._$trailingCall=function(){return n._trailingCall()}},_free:function(){this._trailingValue=null,this._$trailingCall=null},_handleValue:function(t){if(this._activating)this._emitValue(t);else{var n=Po();0!==this._lastCallTime||this._leading||(this._lastCallTime=n);var e=this._wait-(n-this._lastCallTime);e<=0?(this._cancelTrailing(),this._lastCallTime=n,this._emitValue(t)):this._trailing&&(this._cancelTrailing(),this._trailingValue=t,this._timeoutId=setTimeout(this._$trailingCall,e))}},_handleEnd:function(){this._activating?this._emitEnd():this._timeoutId?this._endLater=!0:this._emitEnd()},_cancelTrailing:function(){null!==this._timeoutId&&(clearTimeout(this._timeoutId),this._timeoutId=null)},_trailingCall:function(){this._emitValue(this._trailingValue),this._timeoutId=null,this._trailingValue=null,this._lastCallTime=this._leading?Po():0,this._endLater&&this._emitEnd()}},Lo=br("throttle",Vo),Io=Er("throttle",Vo);var No={_init:function(t){var n=this,e=t.wait,i=t.immediate;this._wait=Math.max(0,e),this._immediate=i,this._lastAttempt=0,this._timeoutId=null,this._laterValue=null,this._endLater=!1,this._$later=function(){return n._later()}},_free:function(){this._laterValue=null,this._$later=null},_handleValue:function(t){this._activating?this._emitValue(t):(this._lastAttempt=Po(),this._immediate&&!this._timeoutId&&this._emitValue(t),this._timeoutId||(this._timeoutId=setTimeout(this._$later,this._wait)),this._immediate||(this._laterValue=t))},_handleEnd:function(){this._activating?this._emitEnd():this._timeoutId&&!this._immediate?this._endLater=!0:this._emitEnd()},_later:function(){var t=Po()-this._lastAttempt;t<this._wait&&0<=t?this._timeoutId=setTimeout(this._$later,this._wait-t):(this._timeoutId=null,this._immediate||(this._emitValue(this._laterValue),this._laterValue=null),this._endLater&&this._emitEnd())}},Mo=br("debounce",No),jo=Er("debounce",No);var $o={_init:function(t){var n=t.fn;this._fn=n},_free:function(){this._fn=null},_handleError:function(t){var n=this._fn;this._emitError(n(t))}},Do=br("mapErrors",$o),Fo=Er("mapErrors",$o),Ro=function(t){return t};var Ho={_init:function(t){var n=t.fn;this._fn=n},_free:function(){this._fn=null},_handleError:function(t){(0,this._fn)(t)&&this._emitError(t)}},Uo=br("filterErrors",Ho),Wo=Er("filterErrors",Ho),Bo=function(t){return t};var qo={_handleValue:function(){}},zo=br("ignoreValues",qo),Go=Er("ignoreValues",qo);var Ko={_handleError:function(){}},Yo=br("ignoreErrors",Ko),Xo=Er("ignoreErrors",Ko);var Qo={_handleEnd:function(){}},Jo=br("ignoreEnd",Qo),Zo=Er("ignoreEnd",Qo);var tu={_init:function(t){var n=t.fn;this._fn=n},_free:function(){this._fn=null},_handleEnd:function(){var t=this._fn;this._emitValue(t()),this._emitEnd()}},nu=br("beforeEnd",tu),eu=Er("beforeEnd",tu);var iu={_init:function(t){var n=t.min,e=t.max;this._max=e,this._min=n,this._buff=[]},_free:function(){this._buff=null},_handleValue:function(t){this._buff=function(t,n,e){var i=Math.min(e,t.length+1),r=t.length-i+1,o=new Array(i),u=void 0;for(u=r;u<i;u++)o[u-r]=t[u];return o[i-1]=n,o}(this._buff,t,this._max),this._buff.length>=this._min&&this._emitValue(this._buff)}},ru=br("slidingWindow",iu),ou=Er("slidingWindow",iu);var uu={_init:function(t){var n=t.fn,e=t.flushOnEnd;this._fn=n,this._flushOnEnd=e,this._buff=[]},_free:function(){this._buff=null},_flush:function(){null!==this._buff&&0!==this._buff.length&&(this._emitValue(this._buff),this._buff=[])},_handleValue:function(t){this._buff.push(t),(0,this._fn)(t)||this._flush()},_handleEnd:function(){this._flushOnEnd&&this._flush(),this._emitEnd()}},su=br("bufferWhile",uu),au=Er("bufferWhile",uu),cu=function(t){return t};var lu={_init:function(t){var n=t.count,e=t.flushOnEnd;this._count=n,this._flushOnEnd=e,this._buff=[]},_free:function(){this._buff=null},_flush:function(){null!==this._buff&&0!==this._buff.length&&(this._emitValue(this._buff),this._buff=[])},_handleValue:function(t){this._buff.push(t),this._buff.length>=this._count&&this._flush()},_handleEnd:function(){this._flushOnEnd&&this._flush(),this._emitEnd()}},hu=br("bufferWithCount",lu),fu=Er("bufferWithCount",lu);var _u={_init:function(t){var n=this,e=t.wait,i=t.count,r=t.flushOnEnd;this._wait=e,this._count=i,this._flushOnEnd=r,this._intervalId=null,this._$onTick=function(){return n._flush()},this._buff=[]},_free:function(){this._$onTick=null,this._buff=null},_flush:function(){null!==this._buff&&(this._emitValue(this._buff),this._buff=[])},_handleValue:function(t){this._buff.push(t),this._buff.length>=this._count&&(clearInterval(this._intervalId),this._flush(),this._intervalId=setInterval(this._$onTick,this._wait))},_handleEnd:function(){this._flushOnEnd&&0!==this._buff.length&&this._flush(),this._emitEnd()},_onActivation:function(){this._intervalId=setInterval(this._$onTick,this._wait),this._source.onAny(this._$handleAny)},_onDeactivation:function(){null!==this._intervalId&&(clearInterval(this._intervalId),this._intervalId=null),this._source.offAny(this._$handleAny)}},du=br("bufferWithTimeOrCount",_u),pu=Er("bufferWithTimeOrCount",_u);var vu={_init:function(t){var e,n=t.transducer;this._xform=n((e=this,{"@@transducer/step":function(t,n){return e._emitValue(n),null},"@@transducer/result":function(){return e._emitEnd(),null}}))},_free:function(){this._xform=null},_handleValue:function(t){null!==this._xform["@@transducer/step"](null,t)&&this._xform["@@transducer/result"](null)},_handleEnd:function(){this._xform["@@transducer/result"](null)}},yu=br("transduce",vu),mu=Er("transduce",vu);var gu={_init:function(t){var n=t.fn;this._handler=n,this._emitter=cr(this)},_free:function(){this._handler=null,this._emitter=null},_handleAny:function(t){this._handler(this._emitter,t)}},bu=br("withHandler",gu),Eu=Er("withHandler",gu);var wu=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function Su(t,n){var e=this;tr.call(this),this._buffers=Xi(t,function(t){return wu(t)?Ki(t):[]}),this._sources=Xi(t,function(t){return wu(t)?ir():t}),this._combinator=n?_r(n,this._sources.length):function(t){return t},this._aliveCount=0,this._$handlers=[];for(var i=function(n){e._$handlers.push(function(t){return e._handleAny(n,t)})},r=0;r<this._sources.length;r++)i(r)}function Au(t,n){return 0===t.length?ir():new Su(t,n)}Fi(Su,tr,{_name:"zip",_onActivation:function(){for(;this._isFull();)this._emit();var t=this._sources.length;this._aliveCount=t;for(var n=0;n<t&&this._active;n++)this._sources[n].onAny(this._$handlers[n])},_onDeactivation:function(){for(var t=0;t<this._sources.length;t++)this._sources[t].offAny(this._$handlers[t])},_emit:function(){for(var t=new Array(this._buffers.length),n=0;n<this._buffers.length;n++)t[n]=this._buffers[n].shift();var e=this._combinator;this._emitValue(e(t))},_isFull:function(){for(var t=0;t<this._buffers.length;t++)if(0===this._buffers[t].length)return!1;return!0},_handleAny:function(t,n){n.type===Ui&&(this._buffers[t].push(n.value),this._isFull()&&this._emit()),n.type===Wi&&this._emitError(n.value),n.type===Hi&&(this._aliveCount--,0===this._aliveCount&&this._emitEnd())},_clear:function(){tr.prototype._clear.call(this),this._sources=null,this._buffers=null,this._combinator=null,this._$handlers=null}});var ku=function(t){return t};function xu(){var n=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.queueLim,i=void 0===e?0:e,r=t.concurLim,o=void 0===r?-1:r,u=t.drop,s=void 0===u?"new":u;tr.call(this),this._queueLim=i<0?-1:i,this._concurLim=o<0?-1:o,this._drop=s,this._queue=[],this._curSources=[],this._$handleSubAny=function(t){return n._handleSubAny(t)},this._$endHandlers=[],this._currentlyAdding=null,0===this._concurLim&&this._emitEnd()}function Tu(t){xu.call(this),this._addAll(t),this._initialised=!0}function Cu(t){return 0===t.length?ir():new Tu(t)}function Ou(t){var n=this;tr.call(this),this._generator=t,this._source=null,this._inLoop=!1,this._iteration=0,this._$handleAny=function(t){return n._handleAny(t)}}Fi(xu,tr,{_name:"abstractPool",_add:function(t,n){n=n||ku,-1===this._concurLim||this._curSources.length<this._concurLim?this._addToCur(n(t)):-1===this._queueLim||this._queue.length<this._queueLim?this._addToQueue(n(t)):"old"===this._drop&&(this._removeOldest(),this._add(t,n))},_addAll:function(t){var n=this;!function(t,n){var e=t.length,i=void 0;for(i=0;i<e;i++)n(t[i])}(t,function(t){return n._add(t)})},_remove:function(t){-1===this._removeCur(t)&&this._removeQueue(t)},_addToQueue:function(t){this._queue=qi(this._queue,[t])},_addToCur:function(t){if(this._active){if(!t._alive)return t._currentEvent&&this._emit(t._currentEvent.type,t._currentEvent.value),void(this._active&&(0!==this._queue.length?this._pullQueue():0===this._curSources.length&&this._onEmpty()));(this._currentlyAdding=t).onAny(this._$handleSubAny),this._currentlyAdding=null,t._alive&&(this._curSources=qi(this._curSources,[t]),this._active&&this._subToEnd(t))}else this._curSources=qi(this._curSources,[t])},_subToEnd:function(t){var n=this,e=function(){return n._removeCur(t)};this._$endHandlers.push({obs:t,handler:e}),t.onEnd(e)},_subscribe:function(t){t.onAny(this._$handleSubAny),this._active&&this._subToEnd(t)},_unsubscribe:function(n){n.offAny(this._$handleSubAny);var t=Gi(this._$endHandlers,function(t){return t.obs===n});-1!==t&&(n.offEnd(this._$endHandlers[t].handler),this._$endHandlers.splice(t,1))},_handleSubAny:function(t){t.type===Ui?this._emitValue(t.value):t.type===Wi&&this._emitError(t.value)},_removeQueue:function(t){var n=zi(this._queue,t);return this._queue=Yi(this._queue,n),n},_removeCur:function(t){this._active&&this._unsubscribe(t);var n=zi(this._curSources,t);return this._curSources=Yi(this._curSources,n),-1!==n&&(0!==this._queue.length?this._pullQueue():0===this._curSources.length&&this._onEmpty()),n},_removeOldest:function(){this._removeCur(this._curSources[0])},_pullQueue:function(){0!==this._queue.length&&(this._queue=Ki(this._queue),this._addToCur(this._queue.shift()))},_onActivation:function(){for(var t=0,n=this._curSources;t<n.length&&this._active;t++)this._subscribe(n[t])},_onDeactivation:function(){for(var t=0,n=this._curSources;t<n.length;t++)this._unsubscribe(n[t]);null!==this._currentlyAdding&&this._unsubscribe(this._currentlyAdding)},_isEmpty:function(){return 0===this._curSources.length},_onEmpty:function(){},_clear:function(){tr.prototype._clear.call(this),this._queue=null,this._curSources=null,this._$handleSubAny=null,this._$endHandlers=null}}),Fi(Tu,xu,{_name:"merge",_onEmpty:function(){this._initialised&&this._emitEnd()}}),Fi(Ou,tr,{_name:"repeat",_handleAny:function(t){t.type===Hi?(this._source=null,this._getSource()):this._emit(t.type,t.value)},_getSource:function(){if(!this._inLoop){this._inLoop=!0;for(var t=this._generator;null===this._source&&this._alive&&this._active;)this._source=t(this._iteration++),this._source?this._source.onAny(this._$handleAny):this._emitEnd();this._inLoop=!1}},_onActivation:function(){this._source?this._source.onAny(this._$handleAny):this._getSource()},_onDeactivation:function(){this._source&&this._source.offAny(this._$handleAny)},_clear:function(){tr.prototype._clear.call(this),this._generator=null,this._source=null,this._$handleAny=null}});var Pu=function(t){return new Ou(t)};function Vu(n){return Pu(function(t){return n.length>t&&n[t]}).setName("concat")}function Lu(){xu.call(this)}function Iu(t,n,e){var i=this;xu.call(this,e),this._source=t,this._fn=n,this._mainEnded=!1,this._lastCurrent=null,this._$handleMain=function(t){return i._handleMain(t)}}function Nu(t,n){Iu.call(this,t,n)}function Mu(r,o){return function(t,n,e){var i=this;r.call(this),this._primary=t,this._secondary=n,this._name=t._name+"."+o,this._lastSecondary=Ri,this._$handleSecondaryAny=function(t){return i._handleSecondaryAny(t)},this._$handlePrimaryAny=function(t){return i._handlePrimaryAny(t)},this._init(e)}}function ju(t){return{_init:function(){},_free:function(){},_handlePrimaryValue:function(t){this._emitValue(t)},_handlePrimaryError:function(t){this._emitError(t)},_handlePrimaryEnd:function(){this._emitEnd()},_handleSecondaryValue:function(t){this._lastSecondary=t},_handleSecondaryError:function(t){this._emitError(t)},_handleSecondaryEnd:function(){},_handlePrimaryAny:function(t){switch(t.type){case Ui:return this._handlePrimaryValue(t.value);case Wi:return this._handlePrimaryError(t.value);case Hi:return this._handlePrimaryEnd(t.value)}},_handleSecondaryAny:function(t){switch(t.type){case Ui:return this._handleSecondaryValue(t.value);case Wi:return this._handleSecondaryError(t.value);case Hi:this._handleSecondaryEnd(t.value),this._removeSecondary()}},_removeSecondary:function(){null!==this._secondary&&(this._secondary.offAny(this._$handleSecondaryAny),this._$handleSecondaryAny=null,this._secondary=null)},_onActivation:function(){null!==this._secondary&&this._secondary.onAny(this._$handleSecondaryAny),this._active&&this._primary.onAny(this._$handlePrimaryAny)},_onDeactivation:function(){null!==this._secondary&&this._secondary.offAny(this._$handleSecondaryAny),this._primary.offAny(this._$handlePrimaryAny)},_clear:function(){t.prototype._clear.call(this),this._primary=null,this._secondary=null,this._lastSecondary=null,this._$handleSecondaryAny=null,this._$handlePrimaryAny=null,this._free()}}}function $u(t,n){var e=Mu(tr,t);return Fi(e,tr,ju(tr),n),e}function Du(t,n){var e=Mu(nr,t);return Fi(e,nr,ju(nr),n),e}Fi(Lu,xu,{_name:"pool",plug:function(t){return this._add(t),this},unplug:function(t){return this._remove(t),this}}),Fi(Iu,xu,{_onActivation:function(){xu.prototype._onActivation.call(this),this._active&&this._source.onAny(this._$handleMain)},_onDeactivation:function(){xu.prototype._onDeactivation.call(this),this._source.offAny(this._$handleMain),this._hadNoEvSinceDeact=!0},_handleMain:function(t){t.type===Ui&&(this._activating&&this._hadNoEvSinceDeact&&this._lastCurrent===t.value||this._add(t.value,this._fn),this._lastCurrent=t.value,this._hadNoEvSinceDeact=!1);t.type===Wi&&this._emitError(t.value),t.type===Hi&&(this._isEmpty()?this._emitEnd():this._mainEnded=!0)},_onEmpty:function(){this._mainEnded&&this._emitEnd()},_clear:function(){xu.prototype._clear.call(this),this._source=null,this._lastCurrent=null,this._$handleMain=null}}),Fi(Nu,Iu,{_handleMain:function(t){t.type===Wi&&(this._activating&&this._hadNoEvSinceDeact&&this._lastCurrent===t.value||this._add(t.value,this._fn),this._lastCurrent=t.value,this._hadNoEvSinceDeact=!1);t.type===Ui&&this._emitValue(t.value),t.type===Hi&&(this._isEmpty()?this._emitEnd():this._mainEnded=!0)}});var Fu={_handlePrimaryValue:function(t){this._lastSecondary!==Ri&&this._lastSecondary&&this._emitValue(t)},_handleSecondaryEnd:function(){this._lastSecondary!==Ri&&this._lastSecondary||this._emitEnd()}},Ru=$u("filterBy",Fu),Hu=Du("filterBy",Fu);var Uu=function(t,n){return n};var Wu={_handlePrimaryValue:function(t){this._lastSecondary!==Ri&&this._emitValue(t)},_handleSecondaryEnd:function(){this._lastSecondary===Ri&&this._emitEnd()}},Bu=$u("skipUntilBy",Wu),qu=Du("skipUntilBy",Wu);var zu={_handleSecondaryValue:function(){this._emitEnd()}},Gu=$u("takeUntilBy",zu),Ku=Du("takeUntilBy",zu);var Yu={_init:function(){var t=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).flushOnEnd,n=void 0===t||t;this._buff=[],this._flushOnEnd=n},_free:function(){this._buff=null},_flush:function(){null!==this._buff&&(this._emitValue(this._buff),this._buff=[])},_handlePrimaryEnd:function(){this._flushOnEnd&&this._flush(),this._emitEnd()},_onActivation:function(){this._primary.onAny(this._$handlePrimaryAny),this._alive&&null!==this._secondary&&this._secondary.onAny(this._$handleSecondaryAny)},_handlePrimaryValue:function(t){this._buff.push(t)},_handleSecondaryValue:function(){this._flush()},_handleSecondaryEnd:function(){this._flushOnEnd||this._emitEnd()}},Xu=$u("bufferBy",Yu),Qu=Du("bufferBy",Yu);var Ju={_init:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=t.flushOnEnd,e=void 0===n||n,i=t.flushOnChange,r=void 0!==i&&i;this._buff=[],this._flushOnEnd=e,this._flushOnChange=r},_free:function(){this._buff=null},_flush:function(){null!==this._buff&&(this._emitValue(this._buff),this._buff=[])},_handlePrimaryEnd:function(){this._flushOnEnd&&this._flush(),this._emitEnd()},_handlePrimaryValue:function(t){this._buff.push(t),this._lastSecondary===Ri||this._lastSecondary||this._flush()},_handleSecondaryEnd:function(){this._flushOnEnd||this._lastSecondary!==Ri&&!this._lastSecondary||this._emitEnd()},_handleSecondaryValue:function(t){this._flushOnChange&&!t&&this._flush(),this._lastSecondary=t}},Zu=$u("bufferWhileBy",Ju),ts=Du("bufferWhileBy",Ju);var ns=function(){return!1},es=function(){return!0};var is={_init:function(t){var n=t.fn;this._fn=n},_free:function(){this._fn=null},_handleValue:function(t){var n=(0,this._fn)(t);n.convert?this._emitError(n.error):this._emitValue(t)}},rs=br("valuesToErrors",is),os=Er("valuesToErrors",is),us=function(t){return{convert:!0,error:t}};var ss={_init:function(t){var n=t.fn;this._fn=n},_free:function(){this._fn=null},_handleError:function(t){var n=(0,this._fn)(t);n.convert?this._emitValue(n.value):this._emitError(t)}},as=br("errorsToValues",ss),cs=Er("errorsToValues",ss),ls=function(t){return{convert:!0,value:t}};var hs={_handleError:function(t){this._emitError(t),this._emitEnd()}},fs=br("endOnError",hs),_s=Er("endOnError",hs);Zi.prototype.toProperty=function(t){return Sr(this,t)},Zi.prototype.changes=function(){return new Ar(this)},Zi.prototype.toPromise=function(t){return kr(this,t)},Zi.prototype.toESObservable=Lr,Zi.prototype[Pr]=Lr,Zi.prototype.map=function(t){return Ur(this,t)},Zi.prototype.filter=function(t){return function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:zr;return new(t._ofSameType(Br,qr))(t,{fn:n})}(this,t)},Zi.prototype.take=function(t){return e=t,new((n=this)._ofSameType(Kr,Yr))(n,{n:e});var n,e},Zi.prototype.takeErrors=function(t){return e=t,new((n=this)._ofSameType(Qr,Jr))(n,{n:e});var n,e},Zi.prototype.takeWhile=function(t){return function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:eo;return new(t._ofSameType(to,no))(t,{fn:n})}(this,t)},Zi.prototype.last=function(){return new((t=this)._ofSameType(ro,oo))(t);var t},Zi.prototype.skip=function(t){return e=t,new((n=this)._ofSameType(so,ao))(n,{n:e});var n,e},Zi.prototype.skipWhile=function(t){return function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:fo;return new(t._ofSameType(lo,ho))(t,{fn:n})}(this,t)},Zi.prototype.skipDuplicates=function(t){return mo(this,t)},Zi.prototype.diff=function(t,n){return function(t,n){var e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:Ri;return new(t._ofSameType(bo,Eo))(t,{fn:n||wo,seed:e})}(this,t,n)},Zi.prototype.scan=function(t,n){return function(t,n){var e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:Ri;return new So(t,{fn:n,seed:e})}(this,t,n)},Zi.prototype.flatten=function(t){return function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:ko;return new Ao(t,{fn:n})}(this,t)},Zi.prototype.delay=function(t){return e=t,new((n=this)._ofSameType(Co,Oo))(n,{wait:e});var n,e},Zi.prototype.throttle=function(t,n){return function(t,n){var e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},i=e.leading,r=void 0===i||i,o=e.trailing,u=void 0===o||o;return new(t._ofSameType(Lo,Io))(t,{wait:n,leading:r,trailing:u})}(this,t,n)},Zi.prototype.debounce=function(t,n){return function(t,n){var e=(2<arguments.length&&void 0!==arguments[2]?arguments[2]:{}).immediate,i=void 0!==e&&e;return new(t._ofSameType(Mo,jo))(t,{wait:n,immediate:i})}(this,t,n)},Zi.prototype.mapErrors=function(t){return function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:Ro;return new(t._ofSameType(Do,Fo))(t,{fn:n})}(this,t)},Zi.prototype.filterErrors=function(t){return function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:Bo;return new(t._ofSameType(Uo,Wo))(t,{fn:n})}(this,t)},Zi.prototype.ignoreValues=function(){return new((t=this)._ofSameType(zo,Go))(t);var t},Zi.prototype.ignoreErrors=function(){return new((t=this)._ofSameType(Yo,Xo))(t);var t},Zi.prototype.ignoreEnd=function(){return new((t=this)._ofSameType(Jo,Zo))(t);var t},Zi.prototype.beforeEnd=function(t){return e=t,new((n=this)._ofSameType(nu,eu))(n,{fn:e});var n,e},Zi.prototype.slidingWindow=function(t,n){return function(t,n){var e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;return new(t._ofSameType(ru,ou))(t,{min:e,max:n})}(this,t,n)},Zi.prototype.bufferWhile=function(t,n){return function(t,n){var e=(2<arguments.length&&void 0!==arguments[2]?arguments[2]:{}).flushOnEnd,i=void 0===e||e;return new(t._ofSameType(su,au))(t,{fn:n||cu,flushOnEnd:i})}(this,t,n)},Zi.prototype.bufferWithCount=function(t,n){return function(t,n){var e=(2<arguments.length&&void 0!==arguments[2]?arguments[2]:{}).flushOnEnd,i=void 0===e||e;return new(t._ofSameType(hu,fu))(t,{count:n,flushOnEnd:i})}(this,t,n)},Zi.prototype.bufferWithTimeOrCount=function(t,n,e){return function(t,n,e){var i=(3<arguments.length&&void 0!==arguments[3]?arguments[3]:{}).flushOnEnd,r=void 0===i||i;return new(t._ofSameType(du,pu))(t,{wait:n,count:e,flushOnEnd:r})}(this,t,n,e)},Zi.prototype.transduce=function(t){return e=t,new((n=this)._ofSameType(yu,mu))(n,{transducer:e});var n,e},Zi.prototype.withHandler=function(t){return e=t,new((n=this)._ofSameType(bu,Eu))(n,{fn:e});var n,e},Zi.prototype.thru=function(t){return t(this)},Zi.prototype.combine=function(t,n){return Mr([this,t],n)},Zi.prototype.zip=function(t,n){return Au([this,t],n)},Zi.prototype.merge=function(t){return Cu([this,t])},Zi.prototype.concat=function(t){return Vu([this,t])};Zi.prototype.flatMap=function(t){return new Iu(this,t).setName(this,"flatMap")},Zi.prototype.flatMapLatest=function(t){return new Iu(this,t,{concurLim:1,drop:"old"}).setName(this,"flatMapLatest")},Zi.prototype.flatMapFirst=function(t){return new Iu(this,t,{concurLim:1}).setName(this,"flatMapFirst")},Zi.prototype.flatMapConcat=function(t){return new Iu(this,t,{queueLim:-1,concurLim:1}).setName(this,"flatMapConcat")},Zi.prototype.flatMapConcurLimit=function(t,n){return new Iu(this,t,{queueLim:-1,concurLim:n}).setName(this,"flatMapConcurLimit")},Zi.prototype.flatMapErrors=function(t){return new Nu(this,t).setName(this,"flatMapErrors")},Zi.prototype.filterBy=function(t){return e=t,new((n=this)._ofSameType(Ru,Hu))(n,e);var n,e},Zi.prototype.sampledBy=function(t,n){return Mr([t],[e=this],(i=n)?function(t,n){return i(n,t)}:Uu).setName(e,"sampledBy");var e,i},Zi.prototype.skipUntilBy=function(t){return e=t,new((n=this)._ofSameType(Bu,qu))(n,e);var n,e},Zi.prototype.takeUntilBy=function(t){return e=t,new((n=this)._ofSameType(Gu,Ku))(n,e);var n,e},Zi.prototype.bufferBy=function(t,n){return i=t,r=n,new((e=this)._ofSameType(Xu,Qu))(e,i,r);var e,i,r},Zi.prototype.bufferWhileBy=function(t,n){return i=t,r=n,new((e=this)._ofSameType(Zu,ts))(e,i,r);var e,i,r};function ds(t){if(console&&"function"==typeof console.warn){console.warn(t,"\nHere is an Error object for you containing the call stack:",new Error)}}Zi.prototype.awaiting=function(t){return ds("You are using deprecated .awaiting() method, see https://github.com/kefirjs/kefir/issues/145"),e=t,Sr(mo(Cu([Ur(n=this,es),Ur(e,ns)])),ns).setName(n,"awaiting");var n,e},Zi.prototype.valuesToErrors=function(t){return ds("You are using deprecated .valuesToErrors() method, see https://github.com/kefirjs/kefir/issues/149"),function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:us;return new(t._ofSameType(rs,os))(t,{fn:n})}(this,t)},Zi.prototype.errorsToValues=function(t){return ds("You are using deprecated .errorsToValues() method, see https://github.com/kefirjs/kefir/issues/149"),function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:ls;return new(t._ofSameType(as,cs))(t,{fn:n})}(this,t)},Zi.prototype.endOnError=function(){return ds("You are using deprecated .endOnError() method, see https://github.com/kefirjs/kefir/issues/150"),new((t=this)._ofSameType(fs,_s))(t);var t};var ps,vs={Observable:Zi,Stream:tr,Property:nr,never:ir,later:function(t,n){return new or(t,{x:n})},interval:function(t,n){return new ur(t,{x:n})},sequentially:function(t,n){return 0===n.length?ir():new sr(t,{xs:n})},fromPoll:function(t,n){return new ar(t,{fn:n})},withInterval:function(t,n){return new lr(t,{fn:n})},fromCallback:function(t){var e=!1;return fr(function(n){e||(t(function(t){n.emit(t),n.end()}),e=!0)}).setName("fromCallback")},fromNodeCallback:function(t){var n=!1;return fr(function(e){n||(t(function(t,n){t?e.error(t):e.emit(n),e.end()}),n=!0)}).setName("fromNodeCallback")},fromEvents:function(n,e,t){for(var i,r,o,u=void 0,s=void 0,a=0;a<dr.length;a++)if("function"==typeof n[dr[a][0]]&&"function"==typeof n[dr[a][1]]){u=dr[a][0],s=dr[a][1];break}if(void 0===u)throw new Error("target don't support any of addEventListener/removeEventListener, addListener/removeListener, on/off method pair");return(i=function(t){return n[u](e,t)},r=function(t){return n[s](e,t)},o=t,fr(function(n){var t=o?function(){n.emit(function(t,n,e){var i=e?e.length:0;if(null==n)switch(i){case 0:return t();case 1:return t(e[0]);case 2:return t(e[0],e[1]);case 3:return t(e[0],e[1],e[2]);case 4:return t(e[0],e[1],e[2],e[3]);default:return t.apply(null,e)}else switch(i){case 0:return t.call(n);default:return t.apply(n,e)}}(o,this,arguments))}:function(t){n.emit(t)};return i(t),function(){return r(t)}}).setName("fromSubUnsub")).setName("fromEvents")},stream:fr,constant:vr,constantError:function(t){return new yr(t)},fromPromise:function(e){var i=!1;return Sr(fr(function(n){if(!i){var t=e.then(function(t){n.emit(t),n.end()},function(t){n.error(t),n.end()});t&&"function"==typeof t.done&&t.done(),i=!0}}),null).setName("fromPromise")},fromESObservable:function(t){var e=t[Pr]?t[Pr]():t;return fr(function(n){var t=e.subscribe({error:function(t){n.error(t),n.end()},next:function(t){n.emit(t)},complete:function(){n.end()}});return t.unsubscribe?function(){t.unsubscribe()}:t}).setName("fromESObservable")},combine:Mr,zip:Au,merge:Cu,concat:Vu,Pool:Lu,pool:function(){return new Lu},repeat:Pu,staticLand:$r},ys=(vs.Kefir=vs).stream(function(t){return ps=t.emit}).scan(function(t,n){return n(t)},{amount:null,destinationPocket:null,exchangeLoading:!1,pockets:[],rates:[],ratesError:!1,ratesHidden:!0,ratesLoading:!1,sourcePocket:null}),ms=function(t){return ps(t)},gs=function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:void 0;ms(function(t){return F({},t,{ratesLoading:!0})}),function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:void 0,e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:void 0,i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:void 0;fetch(t,{signal:n}).then(function(t){return t.ok?t.json():Promise.reject()}).then(function(t){return e&&e(t)}).catch(function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};"NetworkError when attempting to fetch resource."===t.message||"AbortError"===t.name||n&&n.aborted||(t instanceof Error&&console.error(t),i&&i(t))})}(t,n,function(n){return ms(function(t){return F({},t,{rates:Object.entries(n.rates).map(function(t){var n=B(t,2);return{currency:n[0],rate:n[1]}}).filter(function(t){return["EUR","GBP","USD"].includes(t.currency)}),ratesError:!1,ratesHidden:bs(t.sourcePocket,t.destinationPocket,!Object.keys(n.rates).length),ratesLoading:!1})})},function(){return ms(function(t){return F({},t,{ratesError:!0,ratesLoading:!1})})})},bs=function(t,n,e){return t===n||e},Es=function(n){return ms(function(t){return F({},t,{destinationPocket:n,ratesHidden:bs(t.sourcePocket,n,!t.rates.length)})})},ws=function(n){return ms(function(t){return F({},t,{amount:t.amount&&t.amount>n.sum?n.sum:t.amount,ratesHidden:bs(n,t.destinationPocket,!t.rates.length),sourcePocket:n})})},Ss=function(t){function n(){var t;return E(this,n),(t=W(this,H(n).call(this))).input={},t.inputText={},t.prefix={},t}return R(n,g),S(n,[{key:"componentDidUpdate",value:function(){this.inputValue!==this.input.current.value&&(this.inputValue=this.input.current.value,this.inputText.current.textContent=this.input.current.value,this.prefix.current.style.right="".concat(this.inputText.current.clientWidth,"px"))}}]),S(n,[{key:"onInput",value:function(t){var n,e=B(t.target.value.split(/[.,]/),2),i=e[0],r=e[1],o=void 0===r?"":r;t.target.validity.valid&&!/^0./.test(i)&&o.length<=2?t.target.valueAsNumber===this.context.amount||(n=isNaN(t.target.valueAsNumber)?null:(this.props.setAmount||function(t){return t})(Math.min(t.target.valueAsNumber,this.props.max)),ms(function(t){return F({},t,{amount:n})})):t.target.value=this.props.value}},{key:"render",value:function(t){var n=this;return u("span",{class:"CurrencyInput"},u("span",{ref:this.prefix},this.props.prefix),u("input",{min:"0",onInput:function(t){return n.onInput(t)},ref:this.input,step:"any",tabindex:this.props.tabindex,type:"number",value:this.input.current&&this.input.current.valueAsNumber===t.value?this.input.current.value:t.value}),u("span",{ref:this.inputText}))}}]),n}(),As=function(r,o,u){return function(t){function n(){return E(this,n),W(this,H(n).apply(this,arguments))}return R(n,g),S(n,[{key:"render",value:function(t,n,e){var i=r(t,e);return this.cache=i?this.cache||{}:o(t,e),u(F({},t,this.cache,{hidden:i}),e)}}]),n}()},ks=en(!0);he(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,n=this._t,e=this._i;return e>=n.length?{value:void 0,done:!0}:(t=ks(n,e),this._i+=t.length,{value:t,done:!1})});var xs=t(function(t){var e=ht("meta"),n=rt.f,i=0,r=Object.isExtensible||function(){return!0},o=!X(function(){return r(Object.preventExtensions({}))}),u=function(t){n(t,e,{value:{i:"O"+ ++i,w:{}}})},s=t.exports={KEY:e,NEED:!1,fastKey:function(t,n){if(!K(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!at(t,e)){if(!r(t))return"F";if(!n)return"E";u(t)}return t[e].i},getWeak:function(t,n){if(!at(t,e)){if(!r(t))return!0;if(!n)return!1;u(t)}return t[e].w},onFreeze:function(t){return o&&s.NEED&&r(t)&&!at(t,e)&&u(t),t}}}),Ts=(xs.KEY,xs.NEED,xs.fastKey,xs.getWeak,xs.onFreeze,function(t,n){if(!K(t)||t._t!==n)throw TypeError("Incompatible receiver, "+n+" required!");return t}),Cs=rt.f,Os=xs.fastKey,Ps=Q?"_s":"size",Vs=function(t,n){var e,i=Os(n);if("F"!==i)return t._i[i];for(e=t._f;e;e=e.n)if(e.k==n)return e},Ls={getConstructor:function(t,o,e,i){var r=t(function(t,n){Le(t,r,o,"_i"),t._t=o,t._i=Zn(null),t._f=void 0,t._l=void 0,t[Ps]=0,null!=n&&De(n,e,t[i],t)});return ui(r.prototype,{clear:function(){for(var t=Ts(this,o),n=t._i,e=t._f;e;e=e.n)e.r=!0,e.p&&(e.p=e.p.n=void 0),delete n[e.i];t._f=t._l=void 0,t[Ps]=0},delete:function(t){var n=Ts(this,o),e=Vs(n,t);if(e){var i=e.n,r=e.p;delete n._i[e.i],e.r=!0,r&&(r.n=i),i&&(i.p=r),n._f==e&&(n._f=i),n._l==e&&(n._l=r),n[Ps]--}return!!e},forEach:function(t){Ts(this,o);for(var n,e=dt(t,1<arguments.length?arguments[1]:void 0,3);n=n?n.n:this._f;)for(e(n.v,n.k,this);n&&n.r;)n=n.p},has:function(t){return!!Vs(Ts(this,o),t)}}),Q&&Cs(r.prototype,"size",{get:function(){return Ts(this,o)[Ps]}}),r},def:function(t,n,e){var i,r,o=Vs(t,n);return o?o.v=e:(t._l=o={i:r=Os(n,!0),k:n,v:e,p:i=t._l,n:void 0,r:!1},t._f||(t._f=o),i&&(i.n=o),t[Ps]++,"F"!==r&&(t._i[r]=o)),t},getEntry:Vs,setStrong:function(t,e,n){he(t,e,function(t,n){this._t=Ts(t,e),this._k=n,this._l=void 0},function(){for(var t=this,n=t._k,e=t._l;e&&e.r;)e=e.p;return t._t&&(t._l=e=e?e.n:t._t._f)?Bn(0,"keys"==n?e.k:"values"==n?e.v:[e.k,e.v]):(t._t=void 0,Bn(1))},n?"entries":"values",!n,!0),ai(e)}},Is=Object.getOwnPropertyDescriptor,Ns={f:Q?Is:function(t,n){if(t=Wt(t),n=et(n,!0),nt)try{return Is(t,n)}catch(t){}if(at(t,n))return ot(!ke.f.call(t,n),t[n])}},Ms=function(t,n){if(Y(t),!K(n)&&null!==n)throw TypeError(n+": can't set as prototype!")},js={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,i){try{(i=dt(Function.call,Ns.f(Object.prototype,"__proto__").set,2))(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,n){return Ms(t,n),e?t.__proto__=n:i(t,n),t}}({},!1):void 0),check:Ms}.set,$s=function(t,n,e){var i,r=n.constructor;return r!==e&&"function"==typeof r&&(i=r.prototype)!==e.prototype&&K(i)&&js&&js(t,i),t},Ds=(function(i,t,n,e,r,o){var u=z[i],s=u,a=r?"set":"add",c=s&&s.prototype,l={},h=function(t){var e=c[t];ft(c,t,"delete"==t?function(t){return!(o&&!K(t))&&e.call(this,0===t?0:t)}:"has"==t?function(t){return!(o&&!K(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return o&&!K(t)?void 0:e.call(this,0===t?0:t)}:"add"==t?function(t){return e.call(this,0===t?0:t),this}:function(t,n){return e.call(this,0===t?0:t,n),this})};if("function"==typeof s&&(o||c.forEach&&!X(function(){(new s).entries().next()}))){var f=new s,_=f[a](o?{}:-0,1)!=f,d=X(function(){f.has(1)}),p=pi(function(t){new s(t)}),v=!o&&X(function(){for(var t=new s,n=5;n--;)t[a](n,n);return!t.has(-0)});p||(((s=t(function(t,n){Le(t,s,i);var e=$s(new u,t,s);return null!=n&&De(n,r,e[a],e),e})).prototype=c).constructor=s),(d||v)&&(h("delete"),h("has"),r&&h("get")),(v||_)&&h(a),o&&c.clear&&delete c.clear}else s=e.getConstructor(t,i,r,a),ui(s.prototype,n),xs.NEED=!0;ee(s,i),l[i]=s,yt(yt.G+yt.W+yt.F*(s!=u),l),o||e.setStrong(s,i,r)}("Map",function(t){return function(){return t(this,0<arguments.length?arguments[0]:void 0)}},{get:function(t){var n=Ls.getEntry(Ts(this,"Map"),t);return n&&n.v},set:function(t,n){return Ls.def(Ts(this,"Map"),0===t?0:t,n)}},Ls,!0),Rt(5)),Fs="find",Rs=!0;Fs in[]&&Array(1)[Fs](function(){Rs=!1}),yt(yt.P+yt.F*Rs,"Array",{find:function(t){return Ds(this,t,1<arguments.length?arguments[1]:void 0)}}),Rn(Fs);var Hs,Us=function(t,n){return(t.find(function(t){return t.currency===n})||{rate:NaN}).rate},Ws=new Map,Bs=function(t,n,e){t!==Hs&&(Ws.clear(),Hs=t);var i="".concat(n,":").concat(e);if(Ws.has(i))return Ws.get(i);var r,o,u,s=(r=t,u=e,"USD"===(o=n)?Us(r,u):"USD"===u?1/Us(r,o):Us(r,u)*(1/Us(r,o)));return Ws.set(i,s),s},qs=jn.concat("length","prototype"),zs={f:Object.getOwnPropertyNames||function(t){return Mn(t,qs)}},Gs="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff",Ks="["+Gs+"]",Ys=RegExp("^"+Ks+Ks+"*"),Xs=RegExp(Ks+Ks+"*$"),Qs=function(t,n,e){var i={},r=X(function(){return!!Gs[t]()||"​"!="​"[t]()}),o=i[t]=r?n(Js):Gs[t];e&&(i[e]=o),yt(yt.P+yt.F*r,"String",i)},Js=Qs.trim=function(t,n){return t=String(Ct(t)),1&n&&(t=t.replace(Ys,"")),2&n&&(t=t.replace(Xs,"")),t},Zs=Qs,ta=zs.f,na=Ns.f,ea=rt.f,ia=Zs.trim,ra="Number",oa=z[ra],ua=oa,sa=oa.prototype,aa=xt(Zn(sa))==ra,ca="trim"in String.prototype,la=function(t){var n=et(t,!1);if("string"==typeof n&&2<n.length){var e,i,r,o=(n=ca?n.trim():ia(n,3)).charCodeAt(0);if(43===o||45===o){if(88===(e=n.charCodeAt(2))||120===e)return NaN}else if(48===o){switch(n.charCodeAt(1)){case 66:case 98:i=2,r=49;break;case 79:case 111:i=8,r=55;break;default:return+n}for(var u,s=n.slice(2),a=0,c=s.length;a<c;a++)if((u=s.charCodeAt(a))<48||r<u)return NaN;return parseInt(s,i)}}return+n};if(!oa(" 0o1")||!oa("0b1")||oa("+0x1")){oa=function(t){var n=arguments.length<1?0:t,e=this;return e instanceof oa&&(aa?X(function(){sa.valueOf.call(e)}):xt(e)!=ra)?$s(new ua(la(n)),e,oa):la(n)};for(var ha,fa=Q?ta(ua):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),_a=0;fa.length>_a;_a++)at(ua,ha=fa[_a])&&!at(oa,ha)&&ea(oa,ha,na(ua,ha));(oa.prototype=sa).constructor=oa,ft(z,ra,oa)}var da=function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:2;return Number("".concat(Math.round("".concat(t,"e+").concat(n)),"e-").concat(n))},pa=As(function(t,n){return n.ratesHidden},function(t,n){var e=Bs(n.rates,n.sourcePocket.currency,t.pocket.currency);return{rate:e,value:n.amount&&da(e*n.amount)}},function(n,t){return u("span",{class:"DestinationInput animated ".concat(n.hidden?"hidden":"")},u(Ss,{max:n.rate*t.sourcePocket.sum,prefix:null===t.amount||"+",setAmount:function(t){return 1/n.rate*t},tabindex:"-1",value:n.value}))}),va=function(t,n){var e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return t.toLocaleString("en-US",F({currency:n,style:"currency"},e))},ya=function(t,n,e){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:void 0;return"".concat(va(1,n,{maximumFractionDigits:0,minimumFractionDigits:0})," = ").concat(va(Bs(t,n,e),e,i))},ma=As(function(t,n){return n.ratesHidden},function(t,n){return{text:ya(n.rates,t.pocket.currency,n.sourcePocket.currency)}},function(t,n){return u("span",{class:"DestinationRate animated ".concat(t.hidden?"hidden":"")},t.text)}),ga=function(t,n){return u("span",{class:"SourceInput"},u(Ss,{max:t.pocket.sum,prefix:null===n.amount||"-",tabindex:"-1",value:n.amount&&da(n.amount)}))},ba=function(t,n){return u("div",{class:"ExchangeSlide"},u("div",null,u("div",{class:"ExchangeSlide-currency"},t.pocket.currency),u("source"===t.type?ga:pa,{pocket:t.pocket})),u("div",null,u("div",null,"You have ",va(t.pocket.sum,t.pocket.currency)),"destination"===t.type&&u(ma,{pocket:t.pocket})))},Ea=Rt(0),wa=Ht([].forEach,!0);yt(yt.P+yt.F*!wa,"Array",{forEach:function(t){return Ea(this,t,arguments[1])}});var Sa=function(t){function n(){var t;return E(this,n),(t=W(this,H(n).call(this))).pagination={},t.slides={},t}return R(n,g),S(n,[{key:"activatePage",value:function(t){var n=this.pagination.current.children[this.normalizeIndex(t)];q(this.pagination.current.querySelectorAll(".active")).forEach(function(t){return t===n||t.classList.remove("active")}),n&&n.classList.add("active")}},{key:"componentDidMount",value:function(){var e=this;this.globalListeners=[["mousemove",this.onDragMove],["mouseup",this.onDragStop]].map(function(t){var n=B(t,2);return[n[0],n[1].bind(e)]}),this.globalListeners.forEach(function(t){return addEventListener.apply(void 0,q(t))}),this.slidesListeners=[["mousedown",this.onDragStart],["touchend",this.onDragStop],["touchmove",this.onDragMove],["touchstart",this.onDragStart]].map(function(t){var n=B(t,2);return[n[0],n[1].bind(e)]}),this.slidesListeners.forEach(function(t){var n;return(n=e.slides.current).addEventListener.apply(n,q(t))}),this.props.onMount&&this.props.onMount(this.props.index,this.slides.current.children[this.props.index+1])}},{key:"componentWillReceiveProps",value:function(t){var n=Math.max(Math.min(t.index,this.props.children.length-1),0);n===this.index||this.startAnimation(n)}},{key:"componentWillUnmount",value:function(){var e=this;this.globalListeners.forEach(function(t){return removeEventListener.apply(void 0,q(t))}),this.slidesListeners.forEach(function(t){var n;return(n=e.slides.current).removeEventListener.apply(n,q(t))})}}]),S(n,[{key:"normalizeIndex",value:function(t){var n=this.slides.current.children.length-2;return t<0?n-1:n-1<t?0:t}},{key:"onAnimation",value:function(t){this.slides.current.classList.remove("animating"),this.selectSlide(this.normalizeIndex(t))}},{key:"onDragMove",value:function(t){if("touchmove"===t.type||"mousemove"===t.type&&this.dragging){t.preventDefault();var n=(t.touches?t.touches[0]:t).clientX;this.slides.current.style.left="".concat(this.slides.current.offsetLeft-(this.clientX-n),"px"),this.clientX=n}}},{key:"onDragStart",value:function(t){this.clientX=(t.touches?t.touches[0]:t).clientX,this.dragging=!0,this.offsetLeft=this.slides.current.offsetLeft,this.stopAnimation()}},{key:"onDragStop",value:function(t){if("touchend"===t.type||"mouseup"===t.type&&this.dragging){this.dragging=!1;var n=this.slides.current.offsetLeft;n-this.offsetLeft<-100?this.startAnimation(this.index+1):100<n-this.offsetLeft?this.startAnimation(this.index-1):this.startAnimation(this.index)}}},{key:"render",value:function(n){var e=this;return u("div",{class:"Slider"},u("div",null,u("div",{ref:this.slides,style:{width:"".concat(100*(n.children.length+2),"%")}},[].concat(q(n.children.length?[n.children[n.children.length-1]]:[]),q(n.children),q(n.children.length?[n.children[0]]:[])).map(function(t){return u("div",{style:{width:"".concat(100/(n.children.length+2),"%")}},t)}))),u("nav",{ref:this.pagination},n.children.map(function(t,n){return[u("a",{onClick:function(){return e.startAnimation(n)}},n+1)," "]})))}},{key:"selectSlide",value:function(t){t!==this.index&&(this.slides.current.style.left="".concat(100*-(t+1),"%"),void 0===this.index||this.props.onSlide&&this.props.onSlide(t,this.slides.current.children[t+1]),this.index=t)}},{key:"startAnimation",value:function(t){var n=this;this.activatePage(t),this.animationTimeout&&clearTimeout(this.animationTimeout),this.animationTimeout=setTimeout(function(){return n.onAnimation(t)},300),this.slides.current.classList.add("animating"),this.slides.current.style.left="".concat(100*-(t+1),"%")}},{key:"stopAnimation",value:function(){this.slides.current.classList.remove("animating"),this.animationTimeout&&clearTimeout(this.animationTimeout)}}]),n}(),Aa=function(t){function n(){var t;return E(this,n),(t=W(this,H(n).call(this))).destination={},t.source={},t}return R(n,g),S(n,[{key:"componentDidMount",value:function(){this.onDestinationFocus=this.onFocus.bind(this,"destination"),this.destination.current.base.addEventListener("focus",this.onDestinationFocus,!0),this.onSourceFocus=this.onFocus.bind(this,"source"),this.source.current.base.addEventListener("focus",this.onSourceFocus,!0)}},{key:"componentWillUnmount",value:function(){this.destination.current.base.removeEventListener("focus",this.onDestinationFocus),this.source.current.base.removeEventListener("focus",this.onSourceFocus)}}]),S(n,[{key:"focusSlideInput",value:function(t,n){var e=n!==this.focusedInputType&&this.focusedInputType?this.focusedInput:t.querySelector("input");if(e){var i=t.parentElement.parentElement,r=i.scrollLeft,o=i.scrollTop;e.focus({preventScroll:!0});var u=[r,o];t.parentElement.parentElement.scrollLeft=u[0],t.parentElement.parentElement.scrollTop=u[1]}}},{key:"onFocus",value:function(t){var n;"INPUT"===event.target.tagName&&(n=[event.target,t],this.focusedInput=n[0],this.focusedInputType=n[1])}},{key:"render",value:function(t,n,e){var i=this;return u("div",{class:"ExchangeSliders"},u(Sa,{index:e.pockets.indexOf(e.sourcePocket),onMount:function(t,n){return i.focusSlideInput(n,"source")},onSlide:function(t,n){ws(e.pockets[t]),i.focusSlideInput(n,"source")},ref:this.source},e.pockets.map(function(t){return u(ba,{pocket:t,type:"source"})})),u(Sa,{index:e.pockets.indexOf(e.destinationPocket),onSlide:function(t,n){Es(e.pockets[t]),i.focusSlideInput(n,"destination")},ref:this.destination},e.pockets.map(function(t){return u(ba,{pocket:t,type:"destination"})})))}}]),n}(),ka=function(t,r){return u("select",{onChange:function(t){var n=B(t.target.value.split(":"),2),e=n[0],i=n[1];ws(r.pockets.find(function(t){return t.currency===e})),Es(r.pockets.find(function(t){return t.currency===i}))}},r.pockets.map(function(n){return r.pockets.map(function(t){return t.currency===n.currency||u("option",{selected:t===r.destinationPocket&&n===r.sourcePocket,value:"".concat(n.currency,":").concat(t.currency)},!r.rates.length||ya(r.rates,n.currency,t.currency,{minimumFractionDigits:4}))})}))},xa=As(function(t,n){return n.ratesHidden},function(t,n){return{text:ya(n.rates,n.sourcePocket.currency,n.destinationPocket.currency,{minimumFractionDigits:4})}},function(t,n){return u("span",{class:"RateDropdown animated ".concat(t.hidden?"hidden":"")},u("span",{class:"button"},t.text),u(ka,null))}),Ta=function(t,n){return u("nav",{class:"Header"},u("div",null,u("button",{onClick:function(){return t.destroy()}},"Cancel")),u("div",null,u(xa,null)),u("div",null,u("button",{class:"animated",disabled:n.ratesHidden||!n.amount||n.exchangeLoading,onClick:function(){return t.exchange()}},"Exchange")))},Ca=function(t){function n(){return E(this,n),W(this,H(n).apply(this,arguments))}return R(n,g),S(n,[{key:"componentDidMount",value:function(){var t=this;this.progressInterval=setInterval(function(){return t.updateProgress(t.progress+.01*(1-t.progress))},10),this.updateProgress(0)}},{key:"componentWillReceiveProps",value:function(t){t.visible||this.updateProgress(1)}},{key:"componentWillUnmount",value:function(){clearInterval(this.progressInterval)}},{key:"render",value:function(t){return u("div",{class:"LoadingIndicator animated ".concat(t.visible?"":"hidden")})}},{key:"updateProgress",value:function(t){this.progress=t,this.base.style.transform=this.base.style.webkitTransform="translateX(".concat(100*t-100,"%)"),.9999<this.progress&&clearInterval(this.progressInterval)}}]),n}(),Oa=function(t){function n(){return E(this,n),W(this,H(n).apply(this,arguments))}return R(n,g),S(n,[{key:"componentDidMount",value:function(){var t=this;this.onKeyUp=this.onKeyUp.bind(this),addEventListener("keyup",this.onKeyUp),this.fetchRates(),this.fetchRatesInterval=setInterval(function(){return t.fetchRates()},1e4)}},{key:"componentWillMount",value:function(){var t,n,e=this;t=function(t){return e.setState(t)},ys.observe(t),n=this.props.pockets,ms(function(t){return F({},t,{pockets:n})}),Es(this.props.pockets[1===this.props.pockets.length?0:1]),ws(this.props.pockets[0])}},{key:"componentWillUnmount",value:function(){removeEventListener("keyup",this.onKeyUp),clearInterval(this.fetchRatesInterval),this.fetchRatesAbort.abort()}},{key:"exchange",value:function(){var t,n,e,i,r=this;this.state.ratesHidden||!this.state.amount||(t=da(this.state.amount),n=Bs(this.state.rates,this.state.sourcePocket.currency,this.state.destinationPocket.currency),e=this.state.sourcePocket.currency,i=this.state.destinationPocket.currency,console.log("exchange:",t,n,e,i),ms(function(t){return F({},t,{exchangeLoading:!0})}),new Promise(function(t){return setTimeout(t,1e3)}).then(function(){return ms(function(t){return F({},t,{exchangeLoading:!1})})})).then(function(){return r.props.destroy()})}},{key:"fetchRates",value:function(){return this.fetchRatesAbort&&this.fetchRatesAbort.abort(),this.fetchRatesAbort=new AbortController,gs(this.props.ratesURL,this.fetchRatesAbort.signal)}},{key:"getChildContext",value:function(){return this.state}},{key:"onKeyUp",value:function(t){"Enter"===t.key?this.exchange():"Escape"===t.key&&this.props.destroy()}},{key:"render",value:function(t,n){var e=this;return u("div",{class:"App"},u(Ca,{visible:n.ratesLoading&&!n.rates.length}),u(At,{visible:n.ratesError},"Failed to update rates ",u("button",{onClick:function(){return e.fetchRates()}},"Retry")),u(Ta,{destroy:t.destroy,exchange:t.exchange}),u(Aa,null))}}]),n}();return function(t,n){var e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:void 0,i=b(u(Oa,A({},n,{destroy:function(){b(null,t,i),e&&e()}})),t)}}();
//# sourceMappingURL=exchange-widget.min.js.map
