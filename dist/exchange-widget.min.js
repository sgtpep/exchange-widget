var exchangeWidget=function(){"use strict";var a=function(){},o={},c=[],l=[];function u(t,n){var e,i,r,o,u=l;for(o=arguments.length;2<o--;)c.push(arguments[o]);for(n&&null!=n.children&&(c.length||c.push(n.children),delete n.children);c.length;)if((i=c.pop())&&void 0!==i.pop)for(o=i.length;o--;)c.push(i[o]);else"boolean"==typeof i&&(i=null),(r="function"!=typeof t)&&(null==i?i="":"number"==typeof i?i=String(i):"string"!=typeof i&&(r=!1)),r&&e?u[u.length-1]+=i:u===l?u=[i]:u.push(i),e=r;var s=new a;return s.nodeName=t,s.children=u,s.attributes=null==n?void 0:n,s.key=null==n?void 0:n.key,s}function A(t,n){for(var e in n)t[e]=n[e];return t}function h(t,n){null!=t&&("function"==typeof t?t(n):t.current=n)}var n="function"==typeof Promise?Promise.resolve().then.bind(Promise.resolve()):setTimeout,f=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,e=[];function s(t){!t._dirty&&(t._dirty=!0)&&1==e.push(t)&&n(i)}function i(){for(var t;t=e.pop();)t._dirty&&j(t)}function k(t,n){return t.normalizedNodeName===n||t.nodeName.toLowerCase()===n.toLowerCase()}function T(t){var n=A({},t.attributes);n.children=t.children;var e=t.nodeName.defaultProps;if(void 0!==e)for(var i in e)void 0===n[i]&&(n[i]=e[i]);return n}function C(t){var n=t.parentNode;n&&n.removeChild(t)}function p(t,n,e,i,r){if("className"===n&&(n="class"),"key"===n);else if("ref"===n)h(e,null),h(i,t);else if("class"!==n||r)if("style"===n){if(i&&"string"!=typeof i&&"string"!=typeof e||(t.style.cssText=i||""),i&&"object"==typeof i){if("string"!=typeof e)for(var o in e)o in i||(t.style[o]="");for(var o in i)t.style[o]="number"==typeof i[o]&&!1===f.test(o)?i[o]+"px":i[o]}}else if("dangerouslySetInnerHTML"===n)i&&(t.innerHTML=i.__html||"");else if("o"==n[0]&&"n"==n[1]){var u=n!==(n=n.replace(/Capture$/,""));n=n.toLowerCase().substring(2),i?e||t.addEventListener(n,_,u):t.removeEventListener(n,_,u),(t._listeners||(t._listeners={}))[n]=i}else if("list"!==n&&"type"!==n&&!r&&n in t){try{t[n]=null==i?"":i}catch(t){}null!=i&&!1!==i||"spellcheck"==n||t.removeAttribute(n)}else{var s=r&&n!==(n=n.replace(/^xlink:?/,""));null==i||!1===i?s?t.removeAttributeNS("http://www.w3.org/1999/xlink",n.toLowerCase()):t.removeAttribute(n):"function"!=typeof i&&(s?t.setAttributeNS("http://www.w3.org/1999/xlink",n.toLowerCase(),i):t.setAttribute(n,i))}else t.className=i||""}function _(t){return this._listeners[t.type](t)}var P=[],O=0,v=!1,y=!1;function V(){for(var t;t=P.shift();)t.componentDidMount&&t.componentDidMount()}function I(t,n,e,i,r,o){O++||(v=null!=r&&void 0!==r.ownerSVGElement,y=null!=t&&!("__preactattr_"in t));var u=L(t,n,e,i,o);return r&&u.parentNode!==r&&r.appendChild(u),--O||(y=!1,o||V()),u}function L(t,n,e,i,r){var o=t,u=v;if(null!=n&&"boolean"!=typeof n||(n=""),"string"==typeof n||"number"==typeof n)return t&&void 0!==t.splitText&&t.parentNode&&(!t._component||r)?t.nodeValue!=n&&(t.nodeValue=n):(o=document.createTextNode(n),t&&(t.parentNode&&t.parentNode.replaceChild(o,t),N(t,!0))),o.__preactattr_=!0,o;var s,a,c=n.nodeName;if("function"==typeof c)return function(t,n,e,i){var r=t&&t._component,o=r,u=t,s=r&&t._componentConstructor===n.nodeName,a=s,c=T(n);for(;r&&!a&&(r=r._parentComponent);)a=r.constructor===n.nodeName;r&&a&&(!i||r._component)?(D(r,c,3,e,i),t=r.base):(o&&!s&&($(o),t=u=null),r=M(n.nodeName,c,e),t&&!r.nextBase&&(r.nextBase=t,u=null),D(r,c,1,e,i),t=r.base,u&&t!==u&&(u._component=null,N(u,!1)));return t}(t,n,e,i);if(v="svg"===c||"foreignObject"!==c&&v,c=String(c),(!t||!k(t,c))&&(s=c,(a=v?document.createElementNS("http://www.w3.org/2000/svg",s):document.createElement(s)).normalizedNodeName=s,o=a,t)){for(;t.firstChild;)o.appendChild(t.firstChild);t.parentNode&&t.parentNode.replaceChild(o,t),N(t,!0)}var l=o.firstChild,h=o.__preactattr_,f=n.children;if(null==h){h=o.__preactattr_={};for(var _=o.attributes,d=_.length;d--;)h[_[d].name]=_[d].value}return!y&&f&&1===f.length&&"string"==typeof f[0]&&null!=l&&void 0!==l.splitText&&null==l.nextSibling?l.nodeValue!=f[0]&&(l.nodeValue=f[0]):(f&&f.length||null!=l)&&function(t,n,e,i,r){var o,u,s,a,c,l=t.childNodes,h=[],f={},_=0,d=0,p=l.length,v=0,y=n?n.length:0;if(0!==p)for(var m=0;m<p;m++){var g=l[m],b=g.__preactattr_,E=y&&b?g._component?g._component.__key:b.key:null;null!=E?(_++,f[E]=g):(b||(void 0!==g.splitText?!r||g.nodeValue.trim():r))&&(h[v++]=g)}if(0!==y)for(var m=0;m<y;m++){a=n[m],c=null;var E=a.key;if(null!=E)_&&void 0!==f[E]&&(c=f[E],f[E]=void 0,_--);else if(d<v)for(o=d;o<v;o++)if(void 0!==h[o]&&(w=u=h[o],x=r,"string"==typeof(S=a)||"number"==typeof S?void 0!==w.splitText:"string"==typeof S.nodeName?!w._componentConstructor&&k(w,S.nodeName):x||w._componentConstructor===S.nodeName)){c=u,h[o]=void 0,o===v-1&&v--,o===d&&d++;break}c=L(c,a,e,i),s=l[m],c&&c!==t&&c!==s&&(null==s?t.appendChild(c):c===s.nextSibling?C(s):t.insertBefore(c,s))}var w,S,x;if(_)for(var m in f)void 0!==f[m]&&N(f[m],!1);for(;d<=v;)void 0!==(c=h[v--])&&N(c,!1)}(o,f,e,i,y||null!=h.dangerouslySetInnerHTML),function(t,n,e){var i;for(i in e)n&&null!=n[i]||null==e[i]||p(t,i,e[i],e[i]=void 0,v);for(i in n)"children"===i||"innerHTML"===i||i in e&&n[i]===("value"===i||"checked"===i?t[i]:e[i])||p(t,i,e[i],e[i]=n[i],v)}(o,n.attributes,h),v=u,o}function N(t,n){var e=t._component;e?$(e):(null!=t.__preactattr_&&h(t.__preactattr_.ref,null),!1!==n&&null!=t.__preactattr_||C(t),r(t))}function r(t){for(t=t.lastChild;t;){var n=t.previousSibling;N(t,!0),t=n}}var d=[];function M(t,n,e){var i,r=d.length;for(t.prototype&&t.prototype.render?(i=new t(n,e),g.call(i,n,e)):((i=new g(n,e)).constructor=t,i.render=m);r--;)if(d[r].constructor===t)return i.nextBase=d[r].nextBase,d.splice(r,1),i;return i}function m(t,n,e){return this.constructor(t,e)}function D(t,n,e,i,r){t._disable||(t._disable=!0,t.__ref=n.ref,t.__key=n.key,delete n.ref,delete n.key,void 0===t.constructor.getDerivedStateFromProps&&(!t.base||r?t.componentWillMount&&t.componentWillMount():t.componentWillReceiveProps&&t.componentWillReceiveProps(n,i)),i&&i!==t.context&&(t.prevContext||(t.prevContext=t.context),t.context=i),t.prevProps||(t.prevProps=t.props),t.props=n,t._disable=!1,0!==e&&(1!==e&&!1===o.syncComponentUpdates&&t.base?s(t):j(t,1,r)),h(t.__ref,t))}function j(t,n,e,i){if(!t._disable){var r,o,u,s=t.props,a=t.state,c=t.context,l=t.prevProps||s,h=t.prevState||a,f=t.prevContext||c,_=t.base,d=t.nextBase,p=_||d,v=t._component,y=!1,m=f;if(t.constructor.getDerivedStateFromProps&&(a=A(A({},a),t.constructor.getDerivedStateFromProps(s,a)),t.state=a),_&&(t.props=l,t.state=h,t.context=f,2!==n&&t.shouldComponentUpdate&&!1===t.shouldComponentUpdate(s,a,c)?y=!0:t.componentWillUpdate&&t.componentWillUpdate(s,a,c),t.props=s,t.state=a,t.context=c),t.prevProps=t.prevState=t.prevContext=t.nextBase=null,t._dirty=!1,!y){r=t.render(s,a,c),t.getChildContext&&(c=A(A({},c),t.getChildContext())),_&&t.getSnapshotBeforeUpdate&&(m=t.getSnapshotBeforeUpdate(l,h));var g,b,E=r&&r.nodeName;if("function"==typeof E){var w=T(r);(o=v)&&o.constructor===E&&w.key==o.__key?D(o,w,1,c,!1):(g=o,t._component=o=M(E,w,c),o.nextBase=o.nextBase||d,o._parentComponent=t,D(o,w,0,c,!1),j(o,1,e,!0)),b=o.base}else u=p,(g=v)&&(u=t._component=null),(p||1===n)&&(u&&(u._component=null),b=I(u,r,c,e||!_,p&&p.parentNode,!0));if(p&&b!==p&&o!==v){var S=p.parentNode;S&&b!==S&&(S.replaceChild(b,p),g||(p._component=null,N(p,!1)))}if(g&&$(g),(t.base=b)&&!i){for(var x=t,k=t;k=k._parentComponent;)(x=k).base=b;b._component=x,b._componentConstructor=x.constructor}}for(!_||e?P.push(t):y||t.componentDidUpdate&&t.componentDidUpdate(l,h,m);t._renderCallbacks.length;)t._renderCallbacks.pop().call(t);O||i||V()}}function $(t){var n=t.base;t._disable=!0,t.componentWillUnmount&&t.componentWillUnmount(),t.base=null;var e=t._component;e?$(e):n&&(null!=n.__preactattr_&&h(n.__preactattr_.ref,null),C(t.nextBase=n),d.push(t),r(n)),h(t.__ref,null)}function g(t,n){this._dirty=!0,this.context=n,this.props=t,this.state=this.state||{},this._renderCallbacks=[]}function b(t,n,e){return I(e,t,{},!1,n,!1)}function t(t,n){return t(n={exports:{}},n.exports),n.exports}A(g.prototype,{setState:function(t,n){this.prevState||(this.prevState=this.state),this.state=A(A({},this.state),"function"==typeof t?t(this.state,this.props):t),n&&this._renderCallbacks.push(n),s(this)},forceUpdate:function(t){t&&this._renderCallbacks.push(t),j(this,2)},render:function(){}});var E=t(function(t){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)}),w=t(function(t){var n=t.exports={version:"2.6.3"};"number"==typeof __e&&(__e=n)}),S=(w.version,function(t){return"object"==typeof t?null!==t:"function"==typeof t}),x=function(t){if(!S(t))throw TypeError(t+" is not an object!");return t},F=function(t){try{return!!t()}catch(t){return!0}},R=!F(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),U=E.document,W=S(U)&&S(U.createElement),H=function(t){return W?U.createElement(t):{}},B=!R&&!F(function(){return 7!=Object.defineProperty(H("div"),"a",{get:function(){return 7}}).a}),q=function(t,n){if(!S(t))return t;var e,i;if(n&&"function"==typeof(e=t.toString)&&!S(i=e.call(t)))return i;if("function"==typeof(e=t.valueOf)&&!S(i=e.call(t)))return i;if(!n&&"function"==typeof(e=t.toString)&&!S(i=e.call(t)))return i;throw TypeError("Can't convert object to primitive value")},K=Object.defineProperty,z={f:R?Object.defineProperty:function(t,n,e){if(x(t),n=q(n,!0),x(e),B)try{return K(t,n,e)}catch(t){}if("get"in e||"set"in e)throw TypeError("Accessors not supported!");return"value"in e&&(t[n]=e.value),t}},G=function(t,n){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:n}},X=R?function(t,n,e){return z.f(t,n,G(1,e))}:function(t,n,e){return t[n]=e,t},Y={}.hasOwnProperty,Q=function(t,n){return Y.call(t,n)},J=0,Z=Math.random(),tt=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++J+Z).toString(36))},nt=t(function(t){var o=tt("src"),n="toString",e=Function[n],u=(""+e).split(n);w.inspectSource=function(t){return e.call(t)},(t.exports=function(t,n,e,i){var r="function"==typeof e;r&&(Q(e,"name")||X(e,"name",n)),t[n]!==e&&(r&&(Q(e,o)||X(e,o,t[n]?""+t[n]:u.join(String(n)))),t===E?t[n]=e:i?t[n]?t[n]=e:X(t,n,e):(delete t[n],X(t,n,e)))})(Function.prototype,n,function(){return"function"==typeof this&&this[o]||e.call(this)})}),et=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t},it=function(i,r,t){if(et(i),void 0===r)return i;switch(t){case 1:return function(t){return i.call(r,t)};case 2:return function(t,n){return i.call(r,t,n)};case 3:return function(t,n,e){return i.call(r,t,n,e)}}return function(){return i.apply(r,arguments)}},rt="prototype",ot=function(t,n,e){var i,r,o,u,s=t&ot.F,a=t&ot.G,c=t&ot.S,l=t&ot.P,h=t&ot.B,f=a?E:c?E[n]||(E[n]={}):(E[n]||{})[rt],_=a?w:w[n]||(w[n]={}),d=_[rt]||(_[rt]={});for(i in a&&(e=n),e)o=((r=!s&&f&&void 0!==f[i])?f:e)[i],u=h&&r?it(o,E):l&&"function"==typeof o?it(Function.call,o):o,f&&nt(f,i,o,t&ot.U),_[i]!=o&&X(_,i,u),l&&d[i]!=o&&(d[i]=o)};E.core=w,ot.F=1,ot.G=2,ot.S=4,ot.P=8,ot.B=16,ot.W=32,ot.U=64,ot.R=128;var ut=ot,st=function(t,n,e){var i=void 0===e;switch(n.length){case 0:return i?t():t.call(e);case 1:return i?t(n[0]):t.call(e,n[0]);case 2:return i?t(n[0],n[1]):t.call(e,n[0],n[1]);case 3:return i?t(n[0],n[1],n[2]):t.call(e,n[0],n[1],n[2]);case 4:return i?t(n[0],n[1],n[2],n[3]):t.call(e,n[0],n[1],n[2],n[3])}return t.apply(e,n)},at=[].slice,ct={},lt=Function.bind||function(n){var e=et(this),i=at.call(arguments,1),r=function(){var t=i.concat(at.call(arguments));return this instanceof r?function(t,n,e){if(!(n in ct)){for(var i=[],r=0;r<n;r++)i[r]="a["+r+"]";ct[n]=Function("F,a","return new F("+i.join(",")+")")}return ct[n](t,e)}(e,t.length,t):st(e,t,n)};return S(e.prototype)&&(r.prototype=e.prototype),r};function ht(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function ft(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _t(t,n,e){return n&&ft(t.prototype,n),e&&ft(t,e),t}function dt(r){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{},n=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(o).filter(function(t){return Object.getOwnPropertyDescriptor(o,t).enumerable}))),n.forEach(function(t){var n,e,i;n=r,i=o[e=t],e in n?Object.defineProperty(n,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[e]=i})}return r}function pt(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&yt(t,n)}function vt(t){return(vt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function yt(t,n){return(yt=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}function mt(t,n){return!n||"object"!=typeof n&&"function"!=typeof n?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):n}function gt(t,n){return Et(t)||function(t,n){var e=[],i=!0,r=!1,o=void 0;try{for(var u,s=t[Symbol.iterator]();!(i=(u=s.next()).done)&&(e.push(u.value),!n||e.length!==n);i=!0);}catch(t){r=!0,o=t}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return e}(t,n)||St()}function bt(t){return function(t){if(Array.isArray(t)){for(var n=0,e=new Array(t.length);n<t.length;n++)e[n]=t[n];return e}}(t)||wt(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Et(t){if(Array.isArray(t))return t}function wt(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function St(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}ut(ut.P,"Function",{bind:lt});var xt={},kt=JSON.stringify;(function(t){for(var n=".",e=0;e<t.length;e++)n+=t[e].length+","+t[e];return(xt[n]||(xt[n]=function(t){for(var n,e,i,r,o,u=0,s="return ",a="",c="",l=0,h="",f="",_="",d=0,p=function(){i?9===u?(l++&&(s+=","),s+="h("+(c||kt(a)),u=0):13===u||0===u&&"..."===a?(0===u?(_||(_=")",h=h?"Object.assign("+h:"Object.assign({}"),h+=f+","+c,f=""):r&&(h+=h?","+(f?"":"{"):"{",f="}",h+=kt(r)+":",h+=c||(o||a)&&kt(a)||"true",r=""),o=!1):0===u&&(u=13,r=a,a=c="",p(),u=0):(c||(a=a.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))&&(l++&&(s+=","),s+=c||kt(a)),a=c=""},v=0;v<t.length;v++){0<v&&(i||p(),c="$["+v+"]",p());for(var y=0;y<t[v].length;y++){if(e=t[v].charCodeAt(y),i){if(39===e||34===e){if(d===e){d=0;continue}if(0===d){d=e;continue}}if(0===d)switch(e){case 62:p(),47!==u&&(s+=h?","+h+f+_:",null"),n&&(s+=")"),i=0,h="",u=1;continue;case 61:u=13,o=!0,r=a,a="";continue;case 47:n||(n=!0,9!==u||a.trim()||(a=c="",u=47));continue;case 9:case 10:case 13:case 32:p(),u=0;continue}}else if(60===e){p(),_=f=h="",n=o=!(i=1),u=9;continue}a+=t[v].charAt(y)}}return p(),Function("h","$",s)}(t)))(this,arguments)}).bind(u);var At=function(t){function n(){return ht(this,n),mt(this,vt(n).apply(this,arguments))}return pt(n,g),_t(n,[{key:"componentWillReceiveProps",value:function(t){var n=this;t.visible&&(this.base.classList.remove("hidden"),clearTimeout(this.hidingTimeout),this.hidingTimeout=setTimeout(function(){return n.base.classList.add("hidden")},3e3))}},{key:"componentWillUnmount",value:function(){clearInterval(this.hidingTimeout)}},{key:"render",value:function(t){return u("div",{class:"ErrorIndicator animated".concat(t.visible?"":" hidden")},u("div",null,t.children))}}]),n}(),Tt={}.toString,Ct=function(t){return Tt.call(t).slice(8,-1)},Pt=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==Ct(t)?t.split(""):Object(t)},Ot=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t},Vt=function(t){return Object(Ot(t))},It=Math.ceil,Lt=Math.floor,Nt=function(t){return isNaN(t=+t)?0:(0<t?Lt:It)(t)},Mt=Math.min,Dt=function(t){return 0<t?Mt(Nt(t),9007199254740991):0},jt=Array.isArray||function(t){return"Array"==Ct(t)},$t=t(function(t){var n="__core-js_shared__",e=E[n]||(E[n]={});(t.exports=function(t,n){return e[t]||(e[t]=void 0!==n?n:{})})("versions",[]).push({version:w.version,mode:"global",copyright:"Â© 2019 Denis Pushkarev (zloirock.ru)"})}),Ft=t(function(t){var n=$t("wks"),e=E.Symbol,i="function"==typeof e;(t.exports=function(t){return n[t]||(n[t]=i&&e[t]||(i?e:tt)("Symbol."+t))}).store=n}),Rt=Ft("species"),Ut=function(t,n){return jt(e=t)&&("function"!=typeof(i=e.constructor)||i!==Array&&!jt(i.prototype)||(i=void 0),S(i)&&null===(i=i[Rt])&&(i=void 0)),new(void 0===i?Array:i)(n);var e,i},Wt=function(h,t){var f=1==h,_=2==h,d=3==h,p=4==h,v=6==h,y=5==h||v,m=t||Ut;return function(t,n,e){for(var i,r,o=Vt(t),u=Pt(o),s=it(n,e,3),a=Dt(u.length),c=0,l=f?m(t,a):_?m(t,0):void 0;c<a;c++)if((y||c in u)&&(r=s(i=u[c],c,o),h))if(f)l[c]=r;else if(r)switch(h){case 3:return!0;case 5:return i;case 6:return c;case 2:l.push(i)}else if(p)return!1;return v?-1:d||p?p:l}},Ht=function(t,n){return!!t&&F(function(){n?t.call(null,function(){},1):t.call(null)})},Bt=Wt(1);ut(ut.P+ut.F*!Ht([].map,!0),"Array",{map:function(t){return Bt(this,t,arguments[1])}});var qt=function(t){return Pt(Ot(t))},Kt=Math.max,zt=Math.min,Gt=function(c){return function(t,n,e){var i,r,o,u=qt(t),s=Dt(u.length),a=(r=s,(i=Nt(i=e))<0?Kt(i+r,0):zt(i,r));if(c&&n!=n){for(;a<s;)if((o=u[a++])!=o)return!0}else for(;a<s;a++)if((c||a in u)&&u[a]===n)return c||a||0;return!c&&-1}},Xt=Gt(!1),Yt=[].indexOf,Qt=!!Yt&&1/[1].indexOf(1,-0)<0;ut(ut.P+ut.F*(Qt||!Ht(Yt)),"Array",{indexOf:function(t){return Qt?Yt.apply(this,arguments)||0:Xt(this,t,arguments[1])}});var Jt=Ft("unscopables"),Zt=Array.prototype;null==Zt[Jt]&&X(Zt,Jt,{});var tn=function(t){Zt[Jt][t]=!0},nn=Gt(!0);ut(ut.P,"Array",{includes:function(t){return nn(this,t,1<arguments.length?arguments[1]:void 0)}}),tn("includes");var en=Ft("match"),rn=function(t){var n;return S(t)&&(void 0!==(n=t[en])?!!n:"RegExp"==Ct(t))},on=function(t,n,e){if(rn(n))throw TypeError("String#"+e+" doesn't accept regex!");return String(Ot(t))},un=Ft("match"),sn=function(n){var e=/./;try{"/./"[n](e)}catch(t){try{return e[un]=!1,!"/./"[n](e)}catch(t){}}return!0},an="includes";ut(ut.P+ut.F*sn(an),"String",{includes:function(t){return!!~on(this,t,an).indexOf(t,1<arguments.length?arguments[1]:void 0)}});var cn="startsWith",ln=""[cn];ut(ut.P+ut.F*sn(cn),"String",{startsWith:function(t){var n=on(this,t,cn),e=Dt(Math.min(1<arguments.length?arguments[1]:void 0,n.length)),i=String(t);return ln?ln.call(n,i,e):n.slice(e,e+i.length)===i}});var hn,fn,_n=Ft("species"),dn=function(t,n){var e,i=x(t).constructor;return void 0===i||null==(e=x(i)[_n])?n:et(e)},pn=function(s){return function(t,n){var e,i,r=String(Ot(t)),o=Nt(n),u=r.length;return o<0||u<=o?s?"":void 0:(e=r.charCodeAt(o))<55296||56319<e||o+1===u||(i=r.charCodeAt(o+1))<56320||57343<i?s?r.charAt(o):e:s?r.slice(o,o+2):i-56320+(e-55296<<10)+65536}},vn=pn(!0),yn=Ft("toStringTag"),mn="Arguments"==Ct(function(){return arguments}()),gn=function(t){var n,e,i;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(e=function(t,n){try{return t[n]}catch(t){}}(n=Object(t),yn))?e:mn?Ct(n):"Object"==(i=Ct(n))&&"function"==typeof n.callee?"Arguments":i},bn=RegExp.prototype.exec,En=function(t,n){var e=t.exec;if("function"==typeof e){var i=e.call(t,n);if("object"!=typeof i)throw new TypeError("RegExp exec method returned something other than an Object or null");return i}if("RegExp"!==gn(t))throw new TypeError("RegExp#exec called on incompatible receiver");return bn.call(t,n)},wn=RegExp.prototype.exec,Sn=String.prototype.replace,xn=wn,kn="lastIndex",An=(hn=/a/,fn=/b*/g,wn.call(hn,"a"),wn.call(fn,"a"),0!==hn[kn]||0!==fn[kn]),Tn=void 0!==/()??/.exec("")[1];(An||Tn)&&(xn=function(t){var n,e,i,r,o=this;return Tn&&(e=new RegExp("^"+o.source+"$(?!\\s)",function(){var t=x(this),n="";return t.global&&(n+="g"),t.ignoreCase&&(n+="i"),t.multiline&&(n+="m"),t.unicode&&(n+="u"),t.sticky&&(n+="y"),n}.call(o))),An&&(n=o[kn]),i=wn.call(o,t),An&&i&&(o[kn]=o.global?i.index+i[0].length:n),Tn&&i&&1<i.length&&Sn.call(i[0],e,function(){for(r=1;r<arguments.length-2;r++)void 0===arguments[r]&&(i[r]=void 0)}),i});var Cn=xn;ut({target:"RegExp",proto:!0,forced:Cn!==/./.exec},{exec:Cn});var Pn=Ft("species"),On=!F(function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}),Vn=function(){var t=/(?:)/,n=t.exec;t.exec=function(){return n.apply(this,arguments)};var e="ab".split(t);return 2===e.length&&"a"===e[0]&&"b"===e[1]}(),In=Math.min,Ln=[].push,Nn="split",Mn="length",Dn="lastIndex",jn=4294967295,$n=!F(function(){});!function(e,t,n){var i=Ft(e),o=!F(function(){var t={};return t[i]=function(){return 7},7!=""[e](t)}),r=o?!F(function(){var t=!1,n=/a/;return n.exec=function(){return t=!0,null},"split"===e&&(n.constructor={},n.constructor[Pn]=function(){return n}),n[i](""),!t}):void 0;if(!o||!r||"replace"===e&&!On||"split"===e&&!Vn){var u=/./[i],s=n(Ot,i,""[e],function(t,n,e,i,r){return n.exec===Cn?o&&!r?{done:!0,value:u.call(n,e,i)}:{done:!0,value:t.call(e,n,i)}:{done:!1}}),a=s[0],c=s[1];nt(String.prototype,e,a),X(RegExp.prototype,i,2==t?function(t,n){return c.call(t,this,n)}:function(t){return c.call(t,this)})}}("split",2,function(r,o,m,g){var b;return b="c"=="abbc"[Nn](/(b)*/)[1]||4!="test"[Nn](/(?:)/,-1)[Mn]||2!="ab"[Nn](/(?:ab)*/)[Mn]||4!="."[Nn](/(.?)(.?)/)[Mn]||1<"."[Nn](/()()/)[Mn]||""[Nn](/.?/)[Mn]?function(t,n){var e=String(this);if(void 0===t&&0===n)return[];if(!rn(t))return m.call(e,t,n);for(var i,r,o,u=[],s=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),a=0,c=void 0===n?jn:n>>>0,l=new RegExp(t.source,s+"g");(i=Cn.call(l,e))&&!(a<(r=l[Dn])&&(u.push(e.slice(a,i.index)),1<i[Mn]&&i.index<e[Mn]&&Ln.apply(u,i.slice(1)),o=i[0][Mn],a=r,u[Mn]>=c));)l[Dn]===i.index&&l[Dn]++;return a===e[Mn]?!o&&l.test("")||u.push(""):u.push(e.slice(a)),u[Mn]>c?u.slice(0,c):u}:"0"[Nn](void 0,0)[Mn]?function(t,n){return void 0===t&&0===n?[]:m.call(this,t,n)}:m,[function(t,n){var e=r(this),i=null==t?void 0:t[o];return void 0!==i?i.call(t,e,n):b.call(String(e),t,n)},function(t,n){var e=g(b,t,this,n,b!==m);if(e.done)return e.value;var i=x(t),r=String(this),o=dn(i,RegExp),u=i.unicode,s=(i.ignoreCase?"i":"")+(i.multiline?"m":"")+(i.unicode?"u":"")+($n?"y":"g"),a=new o($n?i:"^(?:"+i.source+")",s),c=void 0===n?jn:n>>>0;if(0===c)return[];if(0===r.length)return null===En(a,r)?[r]:[];for(var l,h,f=0,_=0,d=[];_<r.length;){a.lastIndex=$n?_:0;var p,v=En(a,$n?r:r.slice(_));if(null===v||(p=In(Dt(a.lastIndex+($n?0:_)),r.length))===f)l=r,_=(h=_)+(u?vn(l,h).length:1);else{if(d.push(r.slice(f,_)),d.length===c)return d;for(var y=1;y<=v.length-1;y++)if(d.push(v[y]),d.length===c)return d;_=f=p}}return d.push(r.slice(f)),d}]});var Fn,Rn=$t("keys"),Un=function(t){return Rn[t]||(Rn[t]=tt(t))},Wn=Gt(!1),Hn=Un("IE_PROTO"),Bn=function(t,n){var e,i=qt(t),r=0,o=[];for(e in i)e!=Hn&&Q(i,e)&&o.push(e);for(;n.length>r;)Q(i,e=n[r++])&&(~Wn(o,e)||o.push(e));return o},qn="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),Kn=Object.keys||function(t){return Bn(t,qn)},zn={f:{}.propertyIsEnumerable},Gn=zn.f,Xn=(Fn=!0,function(t){for(var n,e=qt(t),i=Kn(e),r=i.length,o=0,u=[];o<r;)Gn.call(e,n=i[o++])&&u.push(Fn?[n,e[n]]:e[n]);return u});ut(ut.S,"Object",{entries:function(t){return Xn(t)}});var Yn=Wt(2);ut(ut.P+ut.F*!Ht([].filter,!0),"Array",{filter:function(t){return Yn(this,t,arguments[1])}});var Qn=function(t,n){return{value:n,done:!!t}},Jn={},Zn=R?Object.defineProperties:function(t,n){x(t);for(var e,i=Kn(n),r=i.length,o=0;o<r;)z.f(t,e=i[o++],n[e]);return t},te=E.document,ne=te&&te.documentElement,ee=Un("IE_PROTO"),ie=function(){},re="prototype",oe=function(){var t,n=H("iframe"),e=qn.length;for(n.style.display="none",ne.appendChild(n),n.src="javascript:",(t=n.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),oe=t.F;e--;)delete oe[re][qn[e]];return oe()},ue=Object.create||function(t,n){var e;return null!==t?(ie[re]=x(t),e=new ie,ie[re]=null,e[ee]=t):e=oe(),void 0===n?e:Zn(e,n)},se=z.f,ae=Ft("toStringTag"),ce=function(t,n,e){t&&!Q(t=e?t:t.prototype,ae)&&se(t,ae,{configurable:!0,value:n})},le={};X(le,Ft("iterator"),function(){return this});var he=Un("IE_PROTO"),fe=Object.prototype,_e=Object.getPrototypeOf||function(t){return t=Vt(t),Q(t,he)?t[he]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?fe:null},de=Ft("iterator"),pe=!([].keys&&"next"in[].keys()),ve="values",ye=function(){return this},me=function(t,n,e,i,r,o,u){var s,a,c;a=n,c=i,(s=e).prototype=ue(le,{next:G(1,c)}),ce(s,a+" Iterator");var l,h,f,_=function(t){if(!pe&&t in y)return y[t];switch(t){case"keys":case ve:return function(){return new e(this,t)}}return function(){return new e(this,t)}},d=n+" Iterator",p=r==ve,v=!1,y=t.prototype,m=y[de]||y["@@iterator"]||r&&y[r],g=m||_(r),b=r?p?_("entries"):g:void 0,E="Array"==n&&y.entries||m;if(E&&(f=_e(E.call(new t)))!==Object.prototype&&f.next&&(ce(f,d,!0),"function"!=typeof f[de]&&X(f,de,ye)),p&&m&&m.name!==ve&&(v=!0,g=function(){return m.call(this)}),(pe||v||!y[de])&&X(y,de,g),Jn[n]=g,Jn[d]=ye,r)if(l={values:p?g:_(ve),keys:o?g:_("keys"),entries:b},u)for(h in l)h in y||nt(y,h,l[h]);else ut(ut.P+ut.F*(pe||v),n,l);return l},ge=me(Array,"Array",function(t,n){this._t=qt(t),this._i=0,this._k=n},function(){var t=this._t,n=this._k,e=this._i++;return!t||e>=t.length?(this._t=void 0,Qn(1)):Qn(0,"keys"==n?e:"values"==n?t[e]:[e,t[e]])},"values");Jn.Arguments=Jn.Array,tn("keys"),tn("values"),tn("entries");for(var be=Ft("iterator"),Ee=Ft("toStringTag"),we=Jn.Array,Se={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},xe=Kn(Se),ke=0;ke<xe.length;ke++){var Ae,Te=xe[ke],Ce=Se[Te],Pe=E[Te],Oe=Pe&&Pe.prototype;if(Oe&&(Oe[be]||X(Oe,be,we),Oe[Ee]||X(Oe,Ee,Te),Jn[Te]=we,Ce))for(Ae in ge)Oe[Ae]||nt(Oe,Ae,ge[Ae],!0)}var Ve,Ie,Le,Ne;Ve="keys",Ie=function(){return function(t){return Kn(Vt(t))}},Le=(w.Object||{})[Ve]||Object[Ve],(Ne={})[Ve]=Ie(Le),ut(ut.S+ut.F*F(function(){Le(1)}),"Object",Ne),ut(ut.S,"Array",{isArray:jt});ut(ut.P+ut.F*!Ht([].reduce,!0),"Array",{reduce:function(t){return function(t,n,e,i,r){et(n);var o=Vt(t),u=Pt(o),s=Dt(o.length),a=r?s-1:0,c=r?-1:1;if(e<2)for(;;){if(a in u){i=u[a],a+=c;break}if(a+=c,r?a<0:s<=a)throw TypeError("Reduce of empty array with no initial value")}for(;r?0<=a:a<s;a+=c)a in u&&(i=n(i,u[a],a,o));return i}(this,t,arguments.length,arguments[1],!1)}});var Me,De,je,$e=function(t,n,e,i){if(!(t instanceof n)||void 0!==i&&i in t)throw TypeError(e+": incorrect invocation!");return t},Fe=function(n,t,e,i){try{return i?t(x(e)[0],e[1]):t(e)}catch(t){var r=n.return;throw void 0!==r&&x(r.call(n)),t}},Re=Ft("iterator"),Ue=Array.prototype,We=Ft("iterator"),He=w.getIteratorMethod=function(t){if(null!=t)return t[We]||t["@@iterator"]||Jn[gn(t)]},Be=t(function(t){var _={},d={},n=t.exports=function(t,n,e,i,r){var o,u,s,a,c,l=r?function(){return t}:He(t),h=it(e,i,n?2:1),f=0;if("function"!=typeof l)throw TypeError(t+" is not iterable!");if(void 0===(c=l)||Jn.Array!==c&&Ue[Re]!==c){for(s=l.call(t);!(u=s.next()).done;)if((a=Fe(s,h,u.value,n))===_||a===d)return a}else for(o=Dt(t.length);f<o;f++)if((a=n?h(x(u=t[f])[0],u[1]):h(t[f]))===_||a===d)return a};n.BREAK=_,n.RETURN=d}),qe=E.process,Ke=E.setImmediate,ze=E.clearImmediate,Ge=E.MessageChannel,Xe=E.Dispatch,Ye=0,Qe={},Je="onreadystatechange",Ze=function(){var t=+this;if(Qe.hasOwnProperty(t)){var n=Qe[t];delete Qe[t],n()}},ti=function(t){Ze.call(t.data)};Ke&&ze||(Ke=function(t){for(var n=[],e=1;arguments.length>e;)n.push(arguments[e++]);return Qe[++Ye]=function(){st("function"==typeof t?t:Function(t),n)},Me(Ye),Ye},ze=function(t){delete Qe[t]},"process"==Ct(qe)?Me=function(t){qe.nextTick(it(Ze,t,1))}:Xe&&Xe.now?Me=function(t){Xe.now(it(Ze,t,1))}:Ge?(je=(De=new Ge).port2,De.port1.onmessage=ti,Me=it(je.postMessage,je,1)):E.addEventListener&&"function"==typeof postMessage&&!E.importScripts?(Me=function(t){E.postMessage(t+"","*")},E.addEventListener("message",ti,!1)):Me=Je in H("script")?function(t){ne.appendChild(H("script"))[Je]=function(){ne.removeChild(this),Ze.call(t)}}:function(t){setTimeout(it(Ze,t,1),0)});var ni={set:Ke,clear:ze},ei=ni.set,ii=E.MutationObserver||E.WebKitMutationObserver,ri=E.process,oi=E.Promise,ui="process"==Ct(ri);function si(t){var e,i;this.promise=new t(function(t,n){if(void 0!==e||void 0!==i)throw TypeError("Bad Promise constructor");e=t,i=n}),this.resolve=et(e),this.reject=et(i)}var ai={f:function(t){return new si(t)}},ci=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}},li=E.navigator,hi=li&&li.userAgent||"",fi=function(t,n,e){for(var i in n)nt(t,i,n[i],e);return t},_i=Ft("species"),di=function(t){var n=E[t];R&&n&&!n[_i]&&z.f(n,_i,{configurable:!0,get:function(){return this}})},pi=Ft("iterator"),vi=!1;try{[7][pi]().return=function(){vi=!0}}catch(kt){}var yi,mi,gi,bi,Ei=function(t,n){if(!n&&!vi)return!1;var e=!1;try{var i=[7],r=i[pi]();r.next=function(){return{done:e=!0}},i[pi]=function(){return r},t(i)}catch(t){}return e},wi=ni.set,Si=function(){var e,i,r,t=function(){var t,n;for(ui&&(t=ri.domain)&&t.exit();e;){n=e.fn,e=e.next;try{n()}catch(t){throw e?r():i=void 0,t}}i=void 0,t&&t.enter()};if(ui)r=function(){ri.nextTick(t)};else if(!ii||E.navigator&&E.navigator.standalone)if(oi&&oi.resolve){var n=oi.resolve(void 0);r=function(){n.then(t)}}else r=function(){ei.call(E,t)};else{var o=!0,u=document.createTextNode("");new ii(t).observe(u,{characterData:!0}),r=function(){u.data=o=!o}}return function(t){var n={fn:t,next:void 0};i&&(i.next=n),e||(e=n,r()),i=n}}(),xi="Promise",ki=E.TypeError,Ai=E.process,Ti=Ai&&Ai.versions,Ci=Ti&&Ti.v8||"",Pi=E[xi],Oi="process"==gn(Ai),Vi=function(){},Ii=mi=ai.f,Li=!!function(){try{var t=Pi.resolve(1),n=(t.constructor={})[Ft("species")]=function(t){t(Vi,Vi)};return(Oi||"function"==typeof PromiseRejectionEvent)&&t.then(Vi)instanceof n&&0!==Ci.indexOf("6.6")&&-1===hi.indexOf("Chrome/66")}catch(t){}}(),Ni=function(t){var n;return!(!S(t)||"function"!=typeof(n=t.then))&&n},Mi=function(l,e){if(!l._n){l._n=!0;var i=l._c;Si(function(){for(var a=l._v,c=1==l._s,t=0,n=function(t){var n,e,i,r=c?t.ok:t.fail,o=t.resolve,u=t.reject,s=t.domain;try{r?(c||(2==l._h&&$i(l),l._h=1),!0===r?n=a:(s&&s.enter(),n=r(a),s&&(s.exit(),i=!0)),n===t.promise?u(ki("Promise-chain cycle")):(e=Ni(n))?e.call(n,o,u):o(n)):u(a)}catch(t){s&&!i&&s.exit(),u(t)}};i.length>t;)n(i[t++]);l._c=[],l._n=!1,e&&!l._h&&Di(l)})}},Di=function(o){wi.call(E,function(){var t,n,e,i=o._v,r=ji(o);if(r&&(t=ci(function(){Oi?Ai.emit("unhandledRejection",i,o):(n=E.onunhandledrejection)?n({promise:o,reason:i}):(e=E.console)&&e.error&&e.error("Unhandled promise rejection",i)}),o._h=Oi||ji(o)?2:1),o._a=void 0,r&&t.e)throw t.v})},ji=function(t){return 1!==t._h&&0===(t._a||t._c).length},$i=function(n){wi.call(E,function(){var t;Oi?Ai.emit("rejectionHandled",n):(t=E.onrejectionhandled)&&t({promise:n,reason:n._v})})},Fi=function(t){var n=this;n._d||(n._d=!0,(n=n._w||n)._v=t,n._s=2,n._a||(n._a=n._c.slice()),Mi(n,!0))},Ri=function(t){var e,i=this;if(!i._d){i._d=!0,i=i._w||i;try{if(i===t)throw ki("Promise can't be resolved itself");(e=Ni(t))?Si(function(){var n={_w:i,_d:!1};try{e.call(t,it(Ri,n,1),it(Fi,n,1))}catch(t){Fi.call(n,t)}}):(i._v=t,i._s=1,Mi(i,!1))}catch(t){Fi.call({_w:i,_d:!1},t)}}};Li||(Pi=function(t){$e(this,Pi,xi,"_h"),et(t),yi.call(this);try{t(it(Ri,this,1),it(Fi,this,1))}catch(t){Fi.call(this,t)}},(yi=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=fi(Pi.prototype,{then:function(t,n){var e=Ii(dn(this,Pi));return e.ok="function"!=typeof t||t,e.fail="function"==typeof n&&n,e.domain=Oi?Ai.domain:void 0,this._c.push(e),this._a&&this._a.push(e),this._s&&Mi(this,!1),e.promise},catch:function(t){return this.then(void 0,t)}}),gi=function(){var t=new yi;this.promise=t,this.resolve=it(Ri,t,1),this.reject=it(Fi,t,1)},ai.f=Ii=function(t){return t===Pi||t===bi?new gi(t):mi(t)}),ut(ut.G+ut.W+ut.F*!Li,{Promise:Pi}),ce(Pi,xi),di(xi),bi=w[xi],ut(ut.S+ut.F*!Li,xi,{reject:function(t){var n=Ii(this);return(0,n.reject)(t),n.promise}}),ut(ut.S+ut.F*!Li,xi,{resolve:function(t){return function(t,n){if(x(t),S(n)&&n.constructor===t)return n;var e=ai.f(t);return(0,e.resolve)(n),e.promise}(this,t)}}),ut(ut.S+ut.F*!(Li&&Ei(function(t){Pi.all(t).catch(Vi)})),xi,{all:function(t){var u=this,n=Ii(u),s=n.resolve,a=n.reject,e=ci(function(){var i=[],r=0,o=1;Be(t,!1,function(t){var n=r++,e=!1;i.push(void 0),o++,u.resolve(t).then(function(t){e||(e=!0,i[n]=t,--o||s(i))},a)}),--o||s(i)});return e.e&&a(e.v),n.promise},race:function(t){var n=this,e=Ii(n),i=e.reject,r=ci(function(){Be(t,!1,function(t){n.resolve(t).then(e.resolve,i)})});return r.e&&i(r.v),e.promise}});var Ui=z.f,Wi=Function.prototype,Hi=/^\s*function ([^ (]*)/;"name"in Wi||R&&Ui(Wi,"name",{configurable:!0,get:function(){try{return(""+this).match(Hi)[1]}catch(t){return""}}});function Bi(t){var n=arguments.length,e=void 0,i=void 0;for(e=1;e<n;e++)for(i in arguments[e])t[i]=arguments[e][i];return t}function qi(t,n){var e,i,r=arguments.length,o=void 0;for(t.prototype=(e=n.prototype,(i=function(){}).prototype=e,new i),t.prototype.constructor=t,o=2;o<r;o++)Bi(t.prototype,arguments[o]);return t}var Ki=["<nothing>"],zi="end",Gi="value",Xi="error",Yi="any";function Qi(t,n){var e=void 0,i=void 0,r=void 0,o=void 0;if(0===t.length)return n;if(0===n.length)return t;for(o=0,e=new Array(t.length+n.length),i=t.length,r=0;r<i;r++,o++)e[o]=t[r];for(i=n.length,r=0;r<i;r++,o++)e[o]=n[r];return e}function Ji(t,n){var e=t.length,i=void 0;for(i=0;i<e;i++)if(t[i]===n)return i;return-1}function Zi(t,n){var e=t.length,i=void 0;for(i=0;i<e;i++)if(n(t[i]))return i;return-1}function tr(t){var n=t.length,e=new Array(n),i=void 0;for(i=0;i<n;i++)e[i]=t[i];return e}function nr(t,n){var e=t.length,i=void 0,r=void 0,o=void 0;if(0<=n&&n<e){if(1===e)return[];for(i=new Array(e-1),o=r=0;r<e;r++)r!==n&&(i[o]=t[r],o++);return i}return t}function er(t,n){var e=t.length,i=new Array(e),r=void 0;for(r=0;r<e;r++)i[r]=n(t[r]);return i}function ir(t,n,e){t===Yi?n(e):t===e.type&&(t===Gi||t===Xi?n(e.value):n())}function rr(){this._items=[],this._spies=[],this._inLoop=0,this._removedItems=null}function or(){this._dispatcher=new rr,this._active=!1,this._alive=!0,this._activating=!1,this._logHandlers=null,this._spyHandlers=null}function ur(){or.call(this)}function sr(){or.call(this),this._currentEvent=null}Bi(rr.prototype,{add:function(t,n){return this._items=Qi(this._items,[{type:t,fn:n}]),this._items.length},remove:function(n,e){var t=Zi(this._items,function(t){return t.type===n&&t.fn===e});return 0!==this._inLoop&&-1!==t&&(null===this._removedItems&&(this._removedItems=[]),this._removedItems.push(this._items[t])),this._items=nr(this._items,t),this._items.length},addSpy:function(t){return this._spies=Qi(this._spies,[t]),this._spies.length},removeSpy:function(t){return this._spies=nr(this._spies,this._spies.indexOf(t)),this._spies.length},dispatch:function(t){this._inLoop++;for(var n=0,e=this._spies;null!==this._spies&&n<e.length;n++)e[n](t);for(var i=0,r=this._items;i<r.length&&null!==this._items;i++)null!==this._removedItems&&(o=this._removedItems,u=r[i],-1!==Ji(o,u))||ir(r[i].type,r[i].fn,t);var o,u;this._inLoop--,0===this._inLoop&&(this._removedItems=null)},cleanup:function(){this._items=null,this._spies=null}}),Bi(or.prototype,{_name:"observable",_onActivation:function(){},_onDeactivation:function(){},_setActive:function(t){this._active!==t&&((this._active=t)?(this._activating=!0,this._onActivation(),this._activating=!1):this._onDeactivation())},_clear:function(){this._setActive(!1),this._dispatcher.cleanup(),this._dispatcher=null,this._logHandlers=null},_emit:function(t,n){switch(t){case Gi:return this._emitValue(n);case Xi:return this._emitError(n);case zi:return this._emitEnd()}},_emitValue:function(t){this._alive&&this._dispatcher.dispatch({type:Gi,value:t})},_emitError:function(t){this._alive&&this._dispatcher.dispatch({type:Xi,value:t})},_emitEnd:function(){this._alive&&(this._alive=!1,this._dispatcher.dispatch({type:zi}),this._clear())},_on:function(t,n){return this._alive?(this._dispatcher.add(t,n),this._setActive(!0)):ir(t,n,{type:zi}),this},_off:function(t,n){this._alive&&(0===this._dispatcher.remove(t,n)&&this._setActive(!1));return this},onValue:function(t){return this._on(Gi,t)},onError:function(t){return this._on(Xi,t)},onEnd:function(t){return this._on(zi,t)},onAny:function(t){return this._on(Yi,t)},offValue:function(t){return this._off(Gi,t)},offError:function(t){return this._off(Xi,t)},offEnd:function(t){return this._off(zi,t)},offAny:function(t){return this._off(Yi,t)},observe:function(t,n,e){var i=this,r=!1,o=t&&"function"!=typeof t?t:{value:t,error:n,end:e},u=function(t){t.type===zi&&(r=!0),t.type===Gi&&o.value?o.value(t.value):t.type===Xi&&o.error?o.error(t.value):t.type===zi&&o.end&&o.end(t.value)};return this.onAny(u),{unsubscribe:function(){r||(i.offAny(u),r=!0)},get closed(){return r}}},_ofSameType:function(t,n){return t.prototype.getType()===this.getType()?t:n},setName:function(t,n){return this._name=n?t._name+"."+n:t,this},log:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.toString(),i=void 0,t=function(t){var n="<"+t.type+(i?":current":"")+">";t.type===zi?console.log(e,n):console.log(e,n,t.value)};return this._alive&&(this._logHandlers||(this._logHandlers=[]),this._logHandlers.push({name:e,handler:t})),i=!0,this.onAny(t),i=!1,this},offLog:function(){var n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.toString();if(this._logHandlers){var t=Zi(this._logHandlers,function(t){return t.name===n});-1!==t&&(this.offAny(this._logHandlers[t].handler),this._logHandlers.splice(t,1))}return this},spy:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.toString(),t=function(t){var n="<"+t.type+">";t.type===zi?console.log(e,n):console.log(e,n,t.value)};return this._alive&&(this._spyHandlers||(this._spyHandlers=[]),this._spyHandlers.push({name:e,handler:t}),this._dispatcher.addSpy(t)),this},offSpy:function(){var n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.toString();if(this._spyHandlers){var t=Zi(this._spyHandlers,function(t){return t.name===n});-1!==t&&(this._dispatcher.removeSpy(this._spyHandlers[t].handler),this._spyHandlers.splice(t,1))}return this}}),or.prototype.toString=function(){return"["+this._name+"]"},qi(ur,or,{_name:"stream",getType:function(){return"stream"}}),qi(sr,or,{_name:"property",_emitValue:function(t){this._alive&&(this._currentEvent={type:Gi,value:t},this._activating||this._dispatcher.dispatch({type:Gi,value:t}))},_emitError:function(t){this._alive&&(this._currentEvent={type:Xi,value:t},this._activating||this._dispatcher.dispatch({type:Xi,value:t}))},_emitEnd:function(){this._alive&&(this._alive=!1,this._activating||this._dispatcher.dispatch({type:zi}),this._clear())},_on:function(t,n){return this._alive&&(this._dispatcher.add(t,n),this._setActive(!0)),null!==this._currentEvent&&ir(t,n,this._currentEvent),this._alive||ir(t,n,{type:zi}),this},getType:function(){return"property"}});var ar=new ur;function cr(){return ar}function lr(t){function n(t,n){var e=this;ur.call(this),this._wait=t,this._intervalId=null,this._$onTick=function(){return e._onTick()},this._init(n)}return qi(n,ur,{_init:function(){},_free:function(){},_onTick:function(){},_onActivation:function(){this._intervalId=setInterval(this._$onTick,this._wait)},_onDeactivation:function(){null!==this._intervalId&&(clearInterval(this._intervalId),this._intervalId=null)},_clear:function(){ur.prototype._clear.call(this),this._$onTick=null,this._free()}},t),n}ar._emitEnd(),ar._name="never";var hr=lr({_name:"later",_init:function(t){var n=t.x;this._x=n},_free:function(){this._x=null},_onTick:function(){this._emitValue(this._x),this._emitEnd()}});var fr=lr({_name:"interval",_init:function(t){var n=t.x;this._x=n},_free:function(){this._x=null},_onTick:function(){this._emitValue(this._x)}});var _r=lr({_name:"sequentially",_init:function(t){var n=t.xs;this._xs=tr(n)},_free:function(){this._xs=null},_onTick:function(){1===this._xs.length?(this._emitValue(this._xs[0]),this._emitEnd()):this._emitValue(this._xs.shift())}});var dr=lr({_name:"fromPoll",_init:function(t){var n=t.fn;this._fn=n},_free:function(){this._fn=null},_onTick:function(){var t=this._fn;this._emitValue(t())}});function pr(n){function t(t){return n._emitValue(t),n._active}function e(t){return n._emit(t.type,t.value),n._active}return{value:t,error:function(t){return n._emitError(t),n._active},end:function(){return n._emitEnd(),n._active},event:e,emit:t,emitEvent:e}}var vr=lr({_name:"withInterval",_init:function(t){var n=t.fn;this._fn=n,this._emitter=pr(this)},_free:function(){this._fn=null,this._emitter=null},_onTick:function(){(0,this._fn)(this._emitter)}});function yr(t){ur.call(this),this._fn=t,this._unsubscribe=null}function mr(t){return new yr(t)}function gr(n,t){switch(t){case 0:return function(){return n()};case 1:return function(t){return n(t[0])};case 2:return function(t){return n(t[0],t[1])};case 3:return function(t){return n(t[0],t[1],t[2])};case 4:return function(t){return n(t[0],t[1],t[2],t[3])};default:return function(t){return n.apply(null,t)}}}qi(yr,ur,{_name:"stream",_onActivation:function(){var t=(0,this._fn)(pr(this));this._unsubscribe="function"==typeof t?t:null,this._active||this._callUnsubscribe()},_callUnsubscribe:function(){null!==this._unsubscribe&&(this._unsubscribe(),this._unsubscribe=null)},_onDeactivation:function(){this._callUnsubscribe()},_clear:function(){ur.prototype._clear.call(this),this._fn=null}});var br=[["addEventListener","removeEventListener"],["addListener","removeListener"],["on","off"]];function Er(t){this._currentEvent={type:"value",value:t,current:!0}}function wr(t){return new Er(t)}function Sr(t){this._currentEvent={type:"error",value:t,current:!0}}function xr(i,r){return function(t,n){var e=this;i.call(this),this._source=t,this._name=t._name+"."+r,this._init(n),this._$handleAny=function(t){return e._handleAny(t)}}}function kr(t){return{_init:function(){},_free:function(){},_handleValue:function(t){this._emitValue(t)},_handleError:function(t){this._emitError(t)},_handleEnd:function(){this._emitEnd()},_handleAny:function(t){switch(t.type){case Gi:return this._handleValue(t.value);case Xi:return this._handleError(t.value);case zi:return this._handleEnd()}},_onActivation:function(){this._source.onAny(this._$handleAny)},_onDeactivation:function(){this._source.offAny(this._$handleAny)},_clear:function(){t.prototype._clear.call(this),this._source=null,this._$handleAny=null,this._free()}}}function Ar(t,n){var e=xr(ur,t);return qi(e,ur,kr(ur),n),e}function Tr(t,n){var e=xr(sr,t);return qi(e,sr,kr(sr),n),e}qi(Er,sr,{_name:"constant",_active:!1,_activating:!1,_alive:!1,_dispatcher:null,_logHandlers:null}),qi(Sr,sr,{_name:"constantError",_active:!1,_activating:!1,_alive:!1,_dispatcher:null,_logHandlers:null});var Cr=Tr("toProperty",{_init:function(t){var n=t.fn;this._getInitialCurrent=n},_onActivation:function(){if(null!==this._getInitialCurrent){var t=this._getInitialCurrent;this._emitValue(t())}this._source.onAny(this._$handleAny)}});function Pr(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;if(null!==n&&"function"!=typeof n)throw new Error("You should call toProperty() with a function or no arguments.");return new Cr(t,{fn:n})}var Or=Ar("changes",{_handleValue:function(t){this._activating||this._emitValue(t)},_handleError:function(t){this._activating||this._emitError(t)}});var Vr=function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){if("function"==typeof Promise)return Promise;throw new Error("There isn't default Promise, use shim or parameter")}(),i=null;return new n(function(n,e){t.onAny(function(t){i=t.type===zi&&null!==i?((i.type===Gi?n:e)(i.value),null):t})})},Ir="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function Lr(t,n){return t(n={exports:{}},n.exports),n.exports}var Nr=Lr(function(t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){var n,e=t.Symbol;"function"==typeof e?e.observable?n=e.observable:(n=e("observable"),e.observable=n):n="@@observable";return n}}),Mr=Lr(function(t,n){Object.defineProperty(n,"__esModule",{value:!0});var e,i,r=(e=Nr)&&e.__esModule?e:{default:e};i="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==Ir?Ir:t;var o=(0,r.default)(i);n.default=o}),Dr=Mr.default?Mr.default:Mr;function jr(t){this._observable=t.takeErrors(1)}function $r(){return new jr(this)}function Fr(t,n,e){for(var i in t)t.hasOwnProperty(i)&&(n.push(i),e.push(t[i]))}function Rr(t,n,e){var i=this;ur.call(this),this._activeCount=t.length,this._sources=Qi(t,n),this._combinator=e,this._aliveCount=0,this._latestValues=new Array(this._sources.length),this._latestErrors=new Array(this._sources.length),function(t,n){var e=t.length,i=void 0;for(i=0;i<e;i++)t[i]=n}(this._latestValues,Ki),this._emitAfterActivation=!1,this._endAfterActivation=!1,this._latestErrorIndex=0,this._$handlers=[];for(var r=function(n){i._$handlers.push(function(t){return i._handleAny(n,t)})},o=0;o<this._sources.length;o++)r(o)}function Ur(t,n,e){return"function"==typeof n&&(e=n,n=void 0),Array.isArray(t)?function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],e=arguments[2];if(!Array.isArray(n))throw new Error("Combine can only combine active and passive collections of the same type.");return e=e?gr(e,t.length+n.length):function(t){return t},0===t.length?cr():new Rr(t,n,e)}(t,n,e):function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=arguments[2];if("object"!=typeof n||Array.isArray(n))throw new Error("Combine can only combine active and passive collections of the same type.");var r=[],e=[],o=[];return Fr(t,r,e),Fr(n,r,o),0===e.length?cr():new Rr(e,o,function(t){for(var n={},e=t.length-1;0<=e;e--)n[r[e]]=t[e];return i?i(n):n})}(t,n,e)}Bi(jr.prototype,{subscribe:function(t,n,e){var i=this,r="function"==typeof t?{next:t,error:n,complete:e}:t,o=function(t){t.type===zi&&(u=!0),t.type===Gi&&r.next?r.next(t.value):t.type===Xi&&r.error?r.error(t.value):t.type===zi&&r.complete&&r.complete(t.value)};this._observable.onAny(o);var u=!1;return{unsubscribe:function(){u=!0,i._observable.offAny(o)},get closed(){return u}}}}),jr.prototype[Dr]=function(){return this},qi(Rr,ur,{_name:"combine",_onActivation:function(){this._aliveCount=this._activeCount;for(var t=this._activeCount;t<this._sources.length;t++)this._sources[t].onAny(this._$handlers[t]);for(var n=0;n<this._activeCount;n++)this._sources[n].onAny(this._$handlers[n]);this._emitAfterActivation&&(this._emitAfterActivation=!1,this._emitIfFull()),this._endAfterActivation&&this._emitEnd()},_onDeactivation:function(){var t=this._sources.length,n=void 0;for(n=0;n<t;n++)this._sources[n].offAny(this._$handlers[n])},_emitIfFull:function(){for(var t=!0,n=!1,e=this._latestValues.length,i=new Array(e),r=new Array(e),o=0;o<e;o++)i[o]=this._latestValues[o],r[o]=this._latestErrors[o],i[o]===Ki&&(t=!1),void 0!==r[o]&&(n=!0);if(t){var u=this._combinator;this._emitValue(u(i))}n&&this._emitError(function(t){for(var n=void 0,e=0;e<t.length;e++)void 0!==t[e]&&(void 0===n||n.index<t[e].index)&&(n=t[e]);return n.error}(r))},_handleAny:function(t,n){n.type===Gi||n.type===Xi?(n.type===Gi&&(this._latestValues[t]=n.value,this._latestErrors[t]=void 0),n.type===Xi&&(this._latestValues[t]=Ki,this._latestErrors[t]={index:this._latestErrorIndex++,error:n.value}),t<this._activeCount&&(this._activating?this._emitAfterActivation=!0:this._emitIfFull())):t<this._activeCount&&(this._aliveCount--,0===this._aliveCount&&(this._activating?this._endAfterActivation=!0:this._emitEnd()))},_clear:function(){ur.prototype._clear.call(this),this._sources=null,this._latestValues=null,this._latestErrors=null,this._combinator=null,this._$handlers=null}});var Wr={empty:function(){return cr()},concat:function(t,n){return t.merge(n)},of:function(t){return wr(t)},map:function(t,n){return n.map(t)},bimap:function(t,n,e){return e.mapErrors(t).map(n)},ap:function(t,n){return Ur([t,n],function(t,n){return t(n)})},chain:function(t,n){return n.flatMap(t)}},Hr=Object.freeze({Observable:Wr}),Br={_init:function(t){var n=t.fn;this._fn=n},_free:function(){this._fn=null},_handleValue:function(t){var n=this._fn;this._emitValue(n(t))}},qr=Ar("map",Br),Kr=Tr("map",Br),zr=function(t){return t};function Gr(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:zr;return new(t._ofSameType(qr,Kr))(t,{fn:n})}var Xr={_init:function(t){var n=t.fn;this._fn=n},_free:function(){this._fn=null},_handleValue:function(t){(0,this._fn)(t)&&this._emitValue(t)}},Yr=Ar("filter",Xr),Qr=Tr("filter",Xr),Jr=function(t){return t};var Zr={_init:function(t){var n=t.n;(this._n=n)<=0&&this._emitEnd()},_handleValue:function(t){0!==this._n&&(this._n--,this._emitValue(t),0===this._n&&this._emitEnd())}},to=Ar("take",Zr),no=Tr("take",Zr);var eo={_init:function(t){var n=t.n;(this._n=n)<=0&&this._emitEnd()},_handleError:function(t){0!==this._n&&(this._n--,this._emitError(t),0===this._n&&this._emitEnd())}},io=Ar("takeErrors",eo),ro=Tr("takeErrors",eo);var oo={_init:function(t){var n=t.fn;this._fn=n},_free:function(){this._fn=null},_handleValue:function(t){(0,this._fn)(t)?this._emitValue(t):this._emitEnd()}},uo=Ar("takeWhile",oo),so=Tr("takeWhile",oo),ao=function(t){return t};var co={_init:function(){this._lastValue=Ki},_free:function(){this._lastValue=null},_handleValue:function(t){this._lastValue=t},_handleEnd:function(){this._lastValue!==Ki&&this._emitValue(this._lastValue),this._emitEnd()}},lo=Ar("last",co),ho=Tr("last",co);var fo={_init:function(t){var n=t.n;this._n=Math.max(0,n)},_handleValue:function(t){0===this._n?this._emitValue(t):this._n--}},_o=Ar("skip",fo),po=Tr("skip",fo);var vo={_init:function(t){var n=t.fn;this._fn=n},_free:function(){this._fn=null},_handleValue:function(t){var n=this._fn;null===this._fn||n(t)||(this._fn=null),null===this._fn&&this._emitValue(t)}},yo=Ar("skipWhile",vo),mo=Tr("skipWhile",vo),go=function(t){return t};var bo={_init:function(t){var n=t.fn;this._fn=n,this._prev=Ki},_free:function(){this._fn=null,this._prev=null},_handleValue:function(t){var n=this._fn;this._prev!==Ki&&n(this._prev,t)||(this._prev=t,this._emitValue(t))}},Eo=Ar("skipDuplicates",bo),wo=Tr("skipDuplicates",bo),So=function(t,n){return t===n};function xo(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:So;return new(t._ofSameType(Eo,wo))(t,{fn:n})}var ko={_init:function(t){var n=t.fn,e=t.seed;this._fn=n,this._prev=e},_free:function(){this._prev=null,this._fn=null},_handleValue:function(t){if(this._prev!==Ki){var n=this._fn;this._emitValue(n(this._prev,t))}this._prev=t}},Ao=Ar("diff",ko),To=Tr("diff",ko);function Co(t,n){return[t,n]}var Po=Tr("scan",{_init:function(t){var n=t.fn,e=t.seed;this._fn=n,(this._seed=e)!==Ki&&this._emitValue(e)},_free:function(){this._fn=null,this._seed=null},_handleValue:function(t){var n=this._fn;null===this._currentEvent||this._currentEvent.type===Xi?this._emitValue(this._seed===Ki?t:n(this._seed,t)):this._emitValue(n(this._currentEvent.value,t))}});var Oo=Ar("flatten",{_init:function(t){var n=t.fn;this._fn=n},_free:function(){this._fn=null},_handleValue:function(t){for(var n=(0,this._fn)(t),e=0;e<n.length;e++)this._emitValue(n[e])}}),Vo=function(t){return t};var Io={},Lo={_init:function(t){var n=this,e=t.wait;this._wait=Math.max(0,e),this._buff=[],this._$shiftBuff=function(){var t=n._buff.shift();t===Io?n._emitEnd():n._emitValue(t)}},_free:function(){this._buff=null,this._$shiftBuff=null},_handleValue:function(t){this._activating?this._emitValue(t):(this._buff.push(t),setTimeout(this._$shiftBuff,this._wait))},_handleEnd:function(){this._activating?this._emitEnd():(this._buff.push(Io),setTimeout(this._$shiftBuff,this._wait))}},No=Ar("delay",Lo),Mo=Tr("delay",Lo);var Do=Date.now?function(){return Date.now()}:function(){return(new Date).getTime()},jo={_init:function(t){var n=this,e=t.wait,i=t.leading,r=t.trailing;this._wait=Math.max(0,e),this._leading=i,this._trailing=r,this._trailingValue=null,this._timeoutId=null,this._endLater=!1,this._lastCallTime=0,this._$trailingCall=function(){return n._trailingCall()}},_free:function(){this._trailingValue=null,this._$trailingCall=null},_handleValue:function(t){if(this._activating)this._emitValue(t);else{var n=Do();0!==this._lastCallTime||this._leading||(this._lastCallTime=n);var e=this._wait-(n-this._lastCallTime);e<=0?(this._cancelTrailing(),this._lastCallTime=n,this._emitValue(t)):this._trailing&&(this._cancelTrailing(),this._trailingValue=t,this._timeoutId=setTimeout(this._$trailingCall,e))}},_handleEnd:function(){this._activating?this._emitEnd():this._timeoutId?this._endLater=!0:this._emitEnd()},_cancelTrailing:function(){null!==this._timeoutId&&(clearTimeout(this._timeoutId),this._timeoutId=null)},_trailingCall:function(){this._emitValue(this._trailingValue),this._timeoutId=null,this._trailingValue=null,this._lastCallTime=this._leading?Do():0,this._endLater&&this._emitEnd()}},$o=Ar("throttle",jo),Fo=Tr("throttle",jo);var Ro={_init:function(t){var n=this,e=t.wait,i=t.immediate;this._wait=Math.max(0,e),this._immediate=i,this._lastAttempt=0,this._timeoutId=null,this._laterValue=null,this._endLater=!1,this._$later=function(){return n._later()}},_free:function(){this._laterValue=null,this._$later=null},_handleValue:function(t){this._activating?this._emitValue(t):(this._lastAttempt=Do(),this._immediate&&!this._timeoutId&&this._emitValue(t),this._timeoutId||(this._timeoutId=setTimeout(this._$later,this._wait)),this._immediate||(this._laterValue=t))},_handleEnd:function(){this._activating?this._emitEnd():this._timeoutId&&!this._immediate?this._endLater=!0:this._emitEnd()},_later:function(){var t=Do()-this._lastAttempt;t<this._wait&&0<=t?this._timeoutId=setTimeout(this._$later,this._wait-t):(this._timeoutId=null,this._immediate||(this._emitValue(this._laterValue),this._laterValue=null),this._endLater&&this._emitEnd())}},Uo=Ar("debounce",Ro),Wo=Tr("debounce",Ro);var Ho={_init:function(t){var n=t.fn;this._fn=n},_free:function(){this._fn=null},_handleError:function(t){var n=this._fn;this._emitError(n(t))}},Bo=Ar("mapErrors",Ho),qo=Tr("mapErrors",Ho),Ko=function(t){return t};var zo={_init:function(t){var n=t.fn;this._fn=n},_free:function(){this._fn=null},_handleError:function(t){(0,this._fn)(t)&&this._emitError(t)}},Go=Ar("filterErrors",zo),Xo=Tr("filterErrors",zo),Yo=function(t){return t};var Qo={_handleValue:function(){}},Jo=Ar("ignoreValues",Qo),Zo=Tr("ignoreValues",Qo);var tu={_handleError:function(){}},nu=Ar("ignoreErrors",tu),eu=Tr("ignoreErrors",tu);var iu={_handleEnd:function(){}},ru=Ar("ignoreEnd",iu),ou=Tr("ignoreEnd",iu);var uu={_init:function(t){var n=t.fn;this._fn=n},_free:function(){this._fn=null},_handleEnd:function(){var t=this._fn;this._emitValue(t()),this._emitEnd()}},su=Ar("beforeEnd",uu),au=Tr("beforeEnd",uu);var cu={_init:function(t){var n=t.min,e=t.max;this._max=e,this._min=n,this._buff=[]},_free:function(){this._buff=null},_handleValue:function(t){this._buff=function(t,n,e){var i=Math.min(e,t.length+1),r=t.length-i+1,o=new Array(i),u=void 0;for(u=r;u<i;u++)o[u-r]=t[u];return o[i-1]=n,o}(this._buff,t,this._max),this._buff.length>=this._min&&this._emitValue(this._buff)}},lu=Ar("slidingWindow",cu),hu=Tr("slidingWindow",cu);var fu={_init:function(t){var n=t.fn,e=t.flushOnEnd;this._fn=n,this._flushOnEnd=e,this._buff=[]},_free:function(){this._buff=null},_flush:function(){null!==this._buff&&0!==this._buff.length&&(this._emitValue(this._buff),this._buff=[])},_handleValue:function(t){this._buff.push(t),(0,this._fn)(t)||this._flush()},_handleEnd:function(){this._flushOnEnd&&this._flush(),this._emitEnd()}},_u=Ar("bufferWhile",fu),du=Tr("bufferWhile",fu),pu=function(t){return t};var vu={_init:function(t){var n=t.count,e=t.flushOnEnd;this._count=n,this._flushOnEnd=e,this._buff=[]},_free:function(){this._buff=null},_flush:function(){null!==this._buff&&0!==this._buff.length&&(this._emitValue(this._buff),this._buff=[])},_handleValue:function(t){this._buff.push(t),this._buff.length>=this._count&&this._flush()},_handleEnd:function(){this._flushOnEnd&&this._flush(),this._emitEnd()}},yu=Ar("bufferWithCount",vu),mu=Tr("bufferWithCount",vu);var gu={_init:function(t){var n=this,e=t.wait,i=t.count,r=t.flushOnEnd;this._wait=e,this._count=i,this._flushOnEnd=r,this._intervalId=null,this._$onTick=function(){return n._flush()},this._buff=[]},_free:function(){this._$onTick=null,this._buff=null},_flush:function(){null!==this._buff&&(this._emitValue(this._buff),this._buff=[])},_handleValue:function(t){this._buff.push(t),this._buff.length>=this._count&&(clearInterval(this._intervalId),this._flush(),this._intervalId=setInterval(this._$onTick,this._wait))},_handleEnd:function(){this._flushOnEnd&&0!==this._buff.length&&this._flush(),this._emitEnd()},_onActivation:function(){this._intervalId=setInterval(this._$onTick,this._wait),this._source.onAny(this._$handleAny)},_onDeactivation:function(){null!==this._intervalId&&(clearInterval(this._intervalId),this._intervalId=null),this._source.offAny(this._$handleAny)}},bu=Ar("bufferWithTimeOrCount",gu),Eu=Tr("bufferWithTimeOrCount",gu);var wu={_init:function(t){var e,n=t.transducer;this._xform=n((e=this,{"@@transducer/step":function(t,n){return e._emitValue(n),null},"@@transducer/result":function(){return e._emitEnd(),null}}))},_free:function(){this._xform=null},_handleValue:function(t){null!==this._xform["@@transducer/step"](null,t)&&this._xform["@@transducer/result"](null)},_handleEnd:function(){this._xform["@@transducer/result"](null)}},Su=Ar("transduce",wu),xu=Tr("transduce",wu);var ku={_init:function(t){var n=t.fn;this._handler=n,this._emitter=pr(this)},_free:function(){this._handler=null,this._emitter=null},_handleAny:function(t){this._handler(this._emitter,t)}},Au=Ar("withHandler",ku),Tu=Tr("withHandler",ku);var Cu=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function Pu(t,n){var e=this;ur.call(this),this._buffers=er(t,function(t){return Cu(t)?tr(t):[]}),this._sources=er(t,function(t){return Cu(t)?cr():t}),this._combinator=n?gr(n,this._sources.length):function(t){return t},this._aliveCount=0,this._$handlers=[];for(var i=function(n){e._$handlers.push(function(t){return e._handleAny(n,t)})},r=0;r<this._sources.length;r++)i(r)}function Ou(t,n){return 0===t.length?cr():new Pu(t,n)}qi(Pu,ur,{_name:"zip",_onActivation:function(){for(;this._isFull();)this._emit();var t=this._sources.length;this._aliveCount=t;for(var n=0;n<t&&this._active;n++)this._sources[n].onAny(this._$handlers[n])},_onDeactivation:function(){for(var t=0;t<this._sources.length;t++)this._sources[t].offAny(this._$handlers[t])},_emit:function(){for(var t=new Array(this._buffers.length),n=0;n<this._buffers.length;n++)t[n]=this._buffers[n].shift();var e=this._combinator;this._emitValue(e(t))},_isFull:function(){for(var t=0;t<this._buffers.length;t++)if(0===this._buffers[t].length)return!1;return!0},_handleAny:function(t,n){n.type===Gi&&(this._buffers[t].push(n.value),this._isFull()&&this._emit()),n.type===Xi&&this._emitError(n.value),n.type===zi&&(this._aliveCount--,0===this._aliveCount&&this._emitEnd())},_clear:function(){ur.prototype._clear.call(this),this._sources=null,this._buffers=null,this._combinator=null,this._$handlers=null}});var Vu=function(t){return t};function Iu(){var n=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.queueLim,i=void 0===e?0:e,r=t.concurLim,o=void 0===r?-1:r,u=t.drop,s=void 0===u?"new":u;ur.call(this),this._queueLim=i<0?-1:i,this._concurLim=o<0?-1:o,this._drop=s,this._queue=[],this._curSources=[],this._$handleSubAny=function(t){return n._handleSubAny(t)},this._$endHandlers=[],this._currentlyAdding=null,0===this._concurLim&&this._emitEnd()}function Lu(t){Iu.call(this),this._addAll(t),this._initialised=!0}function Nu(t){return 0===t.length?cr():new Lu(t)}function Mu(t){var n=this;ur.call(this),this._generator=t,this._source=null,this._inLoop=!1,this._iteration=0,this._$handleAny=function(t){return n._handleAny(t)}}qi(Iu,ur,{_name:"abstractPool",_add:function(t,n){n=n||Vu,-1===this._concurLim||this._curSources.length<this._concurLim?this._addToCur(n(t)):-1===this._queueLim||this._queue.length<this._queueLim?this._addToQueue(n(t)):"old"===this._drop&&(this._removeOldest(),this._add(t,n))},_addAll:function(t){var n=this;!function(t,n){var e=t.length,i=void 0;for(i=0;i<e;i++)n(t[i])}(t,function(t){return n._add(t)})},_remove:function(t){-1===this._removeCur(t)&&this._removeQueue(t)},_addToQueue:function(t){this._queue=Qi(this._queue,[t])},_addToCur:function(t){if(this._active){if(!t._alive)return t._currentEvent&&this._emit(t._currentEvent.type,t._currentEvent.value),void(this._active&&(0!==this._queue.length?this._pullQueue():0===this._curSources.length&&this._onEmpty()));(this._currentlyAdding=t).onAny(this._$handleSubAny),this._currentlyAdding=null,t._alive&&(this._curSources=Qi(this._curSources,[t]),this._active&&this._subToEnd(t))}else this._curSources=Qi(this._curSources,[t])},_subToEnd:function(t){var n=this,e=function(){return n._removeCur(t)};this._$endHandlers.push({obs:t,handler:e}),t.onEnd(e)},_subscribe:function(t){t.onAny(this._$handleSubAny),this._active&&this._subToEnd(t)},_unsubscribe:function(n){n.offAny(this._$handleSubAny);var t=Zi(this._$endHandlers,function(t){return t.obs===n});-1!==t&&(n.offEnd(this._$endHandlers[t].handler),this._$endHandlers.splice(t,1))},_handleSubAny:function(t){t.type===Gi?this._emitValue(t.value):t.type===Xi&&this._emitError(t.value)},_removeQueue:function(t){var n=Ji(this._queue,t);return this._queue=nr(this._queue,n),n},_removeCur:function(t){this._active&&this._unsubscribe(t);var n=Ji(this._curSources,t);return this._curSources=nr(this._curSources,n),-1!==n&&(0!==this._queue.length?this._pullQueue():0===this._curSources.length&&this._onEmpty()),n},_removeOldest:function(){this._removeCur(this._curSources[0])},_pullQueue:function(){0!==this._queue.length&&(this._queue=tr(this._queue),this._addToCur(this._queue.shift()))},_onActivation:function(){for(var t=0,n=this._curSources;t<n.length&&this._active;t++)this._subscribe(n[t])},_onDeactivation:function(){for(var t=0,n=this._curSources;t<n.length;t++)this._unsubscribe(n[t]);null!==this._currentlyAdding&&this._unsubscribe(this._currentlyAdding)},_isEmpty:function(){return 0===this._curSources.length},_onEmpty:function(){},_clear:function(){ur.prototype._clear.call(this),this._queue=null,this._curSources=null,this._$handleSubAny=null,this._$endHandlers=null}}),qi(Lu,Iu,{_name:"merge",_onEmpty:function(){this._initialised&&this._emitEnd()}}),qi(Mu,ur,{_name:"repeat",_handleAny:function(t){t.type===zi?(this._source=null,this._getSource()):this._emit(t.type,t.value)},_getSource:function(){if(!this._inLoop){this._inLoop=!0;for(var t=this._generator;null===this._source&&this._alive&&this._active;)this._source=t(this._iteration++),this._source?this._source.onAny(this._$handleAny):this._emitEnd();this._inLoop=!1}},_onActivation:function(){this._source?this._source.onAny(this._$handleAny):this._getSource()},_onDeactivation:function(){this._source&&this._source.offAny(this._$handleAny)},_clear:function(){ur.prototype._clear.call(this),this._generator=null,this._source=null,this._$handleAny=null}});var Du=function(t){return new Mu(t)};function ju(n){return Du(function(t){return n.length>t&&n[t]}).setName("concat")}function $u(){Iu.call(this)}function Fu(t,n,e){var i=this;Iu.call(this,e),this._source=t,this._fn=n,this._mainEnded=!1,this._lastCurrent=null,this._$handleMain=function(t){return i._handleMain(t)}}function Ru(t,n){Fu.call(this,t,n)}function Uu(r,o){return function(t,n,e){var i=this;r.call(this),this._primary=t,this._secondary=n,this._name=t._name+"."+o,this._lastSecondary=Ki,this._$handleSecondaryAny=function(t){return i._handleSecondaryAny(t)},this._$handlePrimaryAny=function(t){return i._handlePrimaryAny(t)},this._init(e)}}function Wu(t){return{_init:function(){},_free:function(){},_handlePrimaryValue:function(t){this._emitValue(t)},_handlePrimaryError:function(t){this._emitError(t)},_handlePrimaryEnd:function(){this._emitEnd()},_handleSecondaryValue:function(t){this._lastSecondary=t},_handleSecondaryError:function(t){this._emitError(t)},_handleSecondaryEnd:function(){},_handlePrimaryAny:function(t){switch(t.type){case Gi:return this._handlePrimaryValue(t.value);case Xi:return this._handlePrimaryError(t.value);case zi:return this._handlePrimaryEnd(t.value)}},_handleSecondaryAny:function(t){switch(t.type){case Gi:return this._handleSecondaryValue(t.value);case Xi:return this._handleSecondaryError(t.value);case zi:this._handleSecondaryEnd(t.value),this._removeSecondary()}},_removeSecondary:function(){null!==this._secondary&&(this._secondary.offAny(this._$handleSecondaryAny),this._$handleSecondaryAny=null,this._secondary=null)},_onActivation:function(){null!==this._secondary&&this._secondary.onAny(this._$handleSecondaryAny),this._active&&this._primary.onAny(this._$handlePrimaryAny)},_onDeactivation:function(){null!==this._secondary&&this._secondary.offAny(this._$handleSecondaryAny),this._primary.offAny(this._$handlePrimaryAny)},_clear:function(){t.prototype._clear.call(this),this._primary=null,this._secondary=null,this._lastSecondary=null,this._$handleSecondaryAny=null,this._$handlePrimaryAny=null,this._free()}}}function Hu(t,n){var e=Uu(ur,t);return qi(e,ur,Wu(ur),n),e}function Bu(t,n){var e=Uu(sr,t);return qi(e,sr,Wu(sr),n),e}qi($u,Iu,{_name:"pool",plug:function(t){return this._add(t),this},unplug:function(t){return this._remove(t),this}}),qi(Fu,Iu,{_onActivation:function(){Iu.prototype._onActivation.call(this),this._active&&this._source.onAny(this._$handleMain)},_onDeactivation:function(){Iu.prototype._onDeactivation.call(this),this._source.offAny(this._$handleMain),this._hadNoEvSinceDeact=!0},_handleMain:function(t){t.type===Gi&&(this._activating&&this._hadNoEvSinceDeact&&this._lastCurrent===t.value||this._add(t.value,this._fn),this._lastCurrent=t.value,this._hadNoEvSinceDeact=!1);t.type===Xi&&this._emitError(t.value),t.type===zi&&(this._isEmpty()?this._emitEnd():this._mainEnded=!0)},_onEmpty:function(){this._mainEnded&&this._emitEnd()},_clear:function(){Iu.prototype._clear.call(this),this._source=null,this._lastCurrent=null,this._$handleMain=null}}),qi(Ru,Fu,{_handleMain:function(t){t.type===Xi&&(this._activating&&this._hadNoEvSinceDeact&&this._lastCurrent===t.value||this._add(t.value,this._fn),this._lastCurrent=t.value,this._hadNoEvSinceDeact=!1);t.type===Gi&&this._emitValue(t.value),t.type===zi&&(this._isEmpty()?this._emitEnd():this._mainEnded=!0)}});var qu={_handlePrimaryValue:function(t){this._lastSecondary!==Ki&&this._lastSecondary&&this._emitValue(t)},_handleSecondaryEnd:function(){this._lastSecondary!==Ki&&this._lastSecondary||this._emitEnd()}},Ku=Hu("filterBy",qu),zu=Bu("filterBy",qu);var Gu=function(t,n){return n};var Xu={_handlePrimaryValue:function(t){this._lastSecondary!==Ki&&this._emitValue(t)},_handleSecondaryEnd:function(){this._lastSecondary===Ki&&this._emitEnd()}},Yu=Hu("skipUntilBy",Xu),Qu=Bu("skipUntilBy",Xu);var Ju={_handleSecondaryValue:function(){this._emitEnd()}},Zu=Hu("takeUntilBy",Ju),ts=Bu("takeUntilBy",Ju);var ns={_init:function(){var t=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).flushOnEnd,n=void 0===t||t;this._buff=[],this._flushOnEnd=n},_free:function(){this._buff=null},_flush:function(){null!==this._buff&&(this._emitValue(this._buff),this._buff=[])},_handlePrimaryEnd:function(){this._flushOnEnd&&this._flush(),this._emitEnd()},_onActivation:function(){this._primary.onAny(this._$handlePrimaryAny),this._alive&&null!==this._secondary&&this._secondary.onAny(this._$handleSecondaryAny)},_handlePrimaryValue:function(t){this._buff.push(t)},_handleSecondaryValue:function(){this._flush()},_handleSecondaryEnd:function(){this._flushOnEnd||this._emitEnd()}},es=Hu("bufferBy",ns),is=Bu("bufferBy",ns);var rs={_init:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=t.flushOnEnd,e=void 0===n||n,i=t.flushOnChange,r=void 0!==i&&i;this._buff=[],this._flushOnEnd=e,this._flushOnChange=r},_free:function(){this._buff=null},_flush:function(){null!==this._buff&&(this._emitValue(this._buff),this._buff=[])},_handlePrimaryEnd:function(){this._flushOnEnd&&this._flush(),this._emitEnd()},_handlePrimaryValue:function(t){this._buff.push(t),this._lastSecondary===Ki||this._lastSecondary||this._flush()},_handleSecondaryEnd:function(){this._flushOnEnd||this._lastSecondary!==Ki&&!this._lastSecondary||this._emitEnd()},_handleSecondaryValue:function(t){this._flushOnChange&&!t&&this._flush(),this._lastSecondary=t}},os=Hu("bufferWhileBy",rs),us=Bu("bufferWhileBy",rs);var ss=function(){return!1},as=function(){return!0};var cs={_init:function(t){var n=t.fn;this._fn=n},_free:function(){this._fn=null},_handleValue:function(t){var n=(0,this._fn)(t);n.convert?this._emitError(n.error):this._emitValue(t)}},ls=Ar("valuesToErrors",cs),hs=Tr("valuesToErrors",cs),fs=function(t){return{convert:!0,error:t}};var _s={_init:function(t){var n=t.fn;this._fn=n},_free:function(){this._fn=null},_handleError:function(t){var n=(0,this._fn)(t);n.convert?this._emitValue(n.value):this._emitError(t)}},ds=Ar("errorsToValues",_s),ps=Tr("errorsToValues",_s),vs=function(t){return{convert:!0,value:t}};var ys={_handleError:function(t){this._emitError(t),this._emitEnd()}},ms=Ar("endOnError",ys),gs=Tr("endOnError",ys);or.prototype.toProperty=function(t){return Pr(this,t)},or.prototype.changes=function(){return new Or(this)},or.prototype.toPromise=function(t){return Vr(this,t)},or.prototype.toESObservable=$r,or.prototype[Dr]=$r,or.prototype.map=function(t){return Gr(this,t)},or.prototype.filter=function(t){return function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:Jr;return new(t._ofSameType(Yr,Qr))(t,{fn:n})}(this,t)},or.prototype.take=function(t){return e=t,new((n=this)._ofSameType(to,no))(n,{n:e});var n,e},or.prototype.takeErrors=function(t){return e=t,new((n=this)._ofSameType(io,ro))(n,{n:e});var n,e},or.prototype.takeWhile=function(t){return function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:ao;return new(t._ofSameType(uo,so))(t,{fn:n})}(this,t)},or.prototype.last=function(){return new((t=this)._ofSameType(lo,ho))(t);var t},or.prototype.skip=function(t){return e=t,new((n=this)._ofSameType(_o,po))(n,{n:e});var n,e},or.prototype.skipWhile=function(t){return function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:go;return new(t._ofSameType(yo,mo))(t,{fn:n})}(this,t)},or.prototype.skipDuplicates=function(t){return xo(this,t)},or.prototype.diff=function(t,n){return function(t,n){var e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:Ki;return new(t._ofSameType(Ao,To))(t,{fn:n||Co,seed:e})}(this,t,n)},or.prototype.scan=function(t,n){return function(t,n){var e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:Ki;return new Po(t,{fn:n,seed:e})}(this,t,n)},or.prototype.flatten=function(t){return function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:Vo;return new Oo(t,{fn:n})}(this,t)},or.prototype.delay=function(t){return e=t,new((n=this)._ofSameType(No,Mo))(n,{wait:e});var n,e},or.prototype.throttle=function(t,n){return function(t,n){var e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},i=e.leading,r=void 0===i||i,o=e.trailing,u=void 0===o||o;return new(t._ofSameType($o,Fo))(t,{wait:n,leading:r,trailing:u})}(this,t,n)},or.prototype.debounce=function(t,n){return function(t,n){var e=(2<arguments.length&&void 0!==arguments[2]?arguments[2]:{}).immediate,i=void 0!==e&&e;return new(t._ofSameType(Uo,Wo))(t,{wait:n,immediate:i})}(this,t,n)},or.prototype.mapErrors=function(t){return function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:Ko;return new(t._ofSameType(Bo,qo))(t,{fn:n})}(this,t)},or.prototype.filterErrors=function(t){return function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:Yo;return new(t._ofSameType(Go,Xo))(t,{fn:n})}(this,t)},or.prototype.ignoreValues=function(){return new((t=this)._ofSameType(Jo,Zo))(t);var t},or.prototype.ignoreErrors=function(){return new((t=this)._ofSameType(nu,eu))(t);var t},or.prototype.ignoreEnd=function(){return new((t=this)._ofSameType(ru,ou))(t);var t},or.prototype.beforeEnd=function(t){return e=t,new((n=this)._ofSameType(su,au))(n,{fn:e});var n,e},or.prototype.slidingWindow=function(t,n){return function(t,n){var e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;return new(t._ofSameType(lu,hu))(t,{min:e,max:n})}(this,t,n)},or.prototype.bufferWhile=function(t,n){return function(t,n){var e=(2<arguments.length&&void 0!==arguments[2]?arguments[2]:{}).flushOnEnd,i=void 0===e||e;return new(t._ofSameType(_u,du))(t,{fn:n||pu,flushOnEnd:i})}(this,t,n)},or.prototype.bufferWithCount=function(t,n){return function(t,n){var e=(2<arguments.length&&void 0!==arguments[2]?arguments[2]:{}).flushOnEnd,i=void 0===e||e;return new(t._ofSameType(yu,mu))(t,{count:n,flushOnEnd:i})}(this,t,n)},or.prototype.bufferWithTimeOrCount=function(t,n,e){return function(t,n,e){var i=(3<arguments.length&&void 0!==arguments[3]?arguments[3]:{}).flushOnEnd,r=void 0===i||i;return new(t._ofSameType(bu,Eu))(t,{wait:n,count:e,flushOnEnd:r})}(this,t,n,e)},or.prototype.transduce=function(t){return e=t,new((n=this)._ofSameType(Su,xu))(n,{transducer:e});var n,e},or.prototype.withHandler=function(t){return e=t,new((n=this)._ofSameType(Au,Tu))(n,{fn:e});var n,e},or.prototype.thru=function(t){return t(this)},or.prototype.combine=function(t,n){return Ur([this,t],n)},or.prototype.zip=function(t,n){return Ou([this,t],n)},or.prototype.merge=function(t){return Nu([this,t])},or.prototype.concat=function(t){return ju([this,t])};or.prototype.flatMap=function(t){return new Fu(this,t).setName(this,"flatMap")},or.prototype.flatMapLatest=function(t){return new Fu(this,t,{concurLim:1,drop:"old"}).setName(this,"flatMapLatest")},or.prototype.flatMapFirst=function(t){return new Fu(this,t,{concurLim:1}).setName(this,"flatMapFirst")},or.prototype.flatMapConcat=function(t){return new Fu(this,t,{queueLim:-1,concurLim:1}).setName(this,"flatMapConcat")},or.prototype.flatMapConcurLimit=function(t,n){return new Fu(this,t,{queueLim:-1,concurLim:n}).setName(this,"flatMapConcurLimit")},or.prototype.flatMapErrors=function(t){return new Ru(this,t).setName(this,"flatMapErrors")},or.prototype.filterBy=function(t){return e=t,new((n=this)._ofSameType(Ku,zu))(n,e);var n,e},or.prototype.sampledBy=function(t,n){return Ur([t],[e=this],(i=n)?function(t,n){return i(n,t)}:Gu).setName(e,"sampledBy");var e,i},or.prototype.skipUntilBy=function(t){return e=t,new((n=this)._ofSameType(Yu,Qu))(n,e);var n,e},or.prototype.takeUntilBy=function(t){return e=t,new((n=this)._ofSameType(Zu,ts))(n,e);var n,e},or.prototype.bufferBy=function(t,n){return i=t,r=n,new((e=this)._ofSameType(es,is))(e,i,r);var e,i,r},or.prototype.bufferWhileBy=function(t,n){return i=t,r=n,new((e=this)._ofSameType(os,us))(e,i,r);var e,i,r};function bs(t){if(console&&"function"==typeof console.warn){console.warn(t,"\nHere is an Error object for you containing the call stack:",new Error)}}or.prototype.awaiting=function(t){return bs("You are using deprecated .awaiting() method, see https://github.com/kefirjs/kefir/issues/145"),e=t,Pr(xo(Nu([Gr(n=this,as),Gr(e,ss)])),ss).setName(n,"awaiting");var n,e},or.prototype.valuesToErrors=function(t){return bs("You are using deprecated .valuesToErrors() method, see https://github.com/kefirjs/kefir/issues/149"),function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:fs;return new(t._ofSameType(ls,hs))(t,{fn:n})}(this,t)},or.prototype.errorsToValues=function(t){return bs("You are using deprecated .errorsToValues() method, see https://github.com/kefirjs/kefir/issues/149"),function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:vs;return new(t._ofSameType(ds,ps))(t,{fn:n})}(this,t)},or.prototype.endOnError=function(){return bs("You are using deprecated .endOnError() method, see https://github.com/kefirjs/kefir/issues/150"),new((t=this)._ofSameType(ms,gs))(t);var t};var Es={Observable:or,Stream:ur,Property:sr,never:cr,later:function(t,n){return new hr(t,{x:n})},interval:function(t,n){return new fr(t,{x:n})},sequentially:function(t,n){return 0===n.length?cr():new _r(t,{xs:n})},fromPoll:function(t,n){return new dr(t,{fn:n})},withInterval:function(t,n){return new vr(t,{fn:n})},fromCallback:function(t){var e=!1;return mr(function(n){e||(t(function(t){n.emit(t),n.end()}),e=!0)}).setName("fromCallback")},fromNodeCallback:function(t){var n=!1;return mr(function(e){n||(t(function(t,n){t?e.error(t):e.emit(n),e.end()}),n=!0)}).setName("fromNodeCallback")},fromEvents:function(n,e,t){for(var i,r,o,u=void 0,s=void 0,a=0;a<br.length;a++)if("function"==typeof n[br[a][0]]&&"function"==typeof n[br[a][1]]){u=br[a][0],s=br[a][1];break}if(void 0===u)throw new Error("target don't support any of addEventListener/removeEventListener, addListener/removeListener, on/off method pair");return(i=function(t){return n[u](e,t)},r=function(t){return n[s](e,t)},o=t,mr(function(n){var t=o?function(){n.emit(function(t,n,e){var i=e?e.length:0;if(null==n)switch(i){case 0:return t();case 1:return t(e[0]);case 2:return t(e[0],e[1]);case 3:return t(e[0],e[1],e[2]);case 4:return t(e[0],e[1],e[2],e[3]);default:return t.apply(null,e)}else switch(i){case 0:return t.call(n);default:return t.apply(n,e)}}(o,this,arguments))}:function(t){n.emit(t)};return i(t),function(){return r(t)}}).setName("fromSubUnsub")).setName("fromEvents")},stream:mr,constant:wr,constantError:function(t){return new Sr(t)},fromPromise:function(e){var i=!1;return Pr(mr(function(n){if(!i){var t=e.then(function(t){n.emit(t),n.end()},function(t){n.error(t),n.end()});t&&"function"==typeof t.done&&t.done(),i=!0}}),null).setName("fromPromise")},fromESObservable:function(t){var e=t[Dr]?t[Dr]():t;return mr(function(n){var t=e.subscribe({error:function(t){n.error(t),n.end()},next:function(t){n.emit(t)},complete:function(){n.end()}});return t.unsubscribe?function(){t.unsubscribe()}:t}).setName("fromESObservable")},combine:Ur,zip:Ou,merge:Nu,concat:ju,Pool:$u,pool:function(){return new $u},repeat:Du,staticLand:Hr};Es.Kefir=Es;var ws,Ss,xs,ks=function(t){return function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:void 0;return fetch(t,{signal:n}).then(function(t){return t.ok?t.json():Promise.reject(new Error(t.statusText))}).catch(function(t){throw"NetworkError when attempting to fetch resource."!==t.message&&!["AbortError","Error"].includes(t.name)&&(!n||!n.aborted)&&console.error(t),t})}(t,1<arguments.length&&void 0!==arguments[1]?arguments[1]:void 0).then(function(e){return Is(function(t){var n=Ts(t.sourcePocket,t.destinationPocket,Object.keys(e.rates).length);return dt({},t,{exchangeDisabled:As(n,t.amount),rates:Object.entries(e.rates).map(function(t){var n=gt(t,2);return{currency:n[0],rate:n[1]}}).filter(function(t){return["EUR","GBP"].includes(t.currency)}),ratesError:!1,ratesHidden:n,ratesLoading:!1})}),e},function(){Is(function(t){return dt({},t,{ratesError:!0,ratesLoading:!1})})})},As=function(t,n){return t||!n},Ts=function(t,n,e){return!t||!n||t===n||!e},Cs=function(e){return Is(function(t){var n=Ts(t.sourcePocket,e,t.rates.length);return dt({},t,{destinationPocket:e,exchangeDisabled:As(n,t.amount),ratesHidden:n})})},Ps=function(i){return Is(function(t){var n=t.amount>i.sum?i.sum:t.amount,e=Ts(i,t.destinationPocket,t.rates.length);return dt({},t,{amount:n,exchangeDisabled:As(e,n),ratesHidden:e,sourcePocket:i})})},Os=(ws={amount:null,destinationPocket:null,exchangeDisabled:!0,exchangeLoading:!1,pockets:[],rates:[],ratesError:!1,ratesHidden:!0,ratesLoading:!1,sourcePocket:null},xs=Es.stream(function(t){return Ss=t.emit}).scan(function(t,n){return n(t)},ws),{onUpdate:function(t){return xs.observe(t)},update:function(t){return Ss||xs.observe(),Ss(t)}}),Vs=Os.onUpdate,Is=Os.update,Ls=function(t){function n(){var t;return ht(this,n),(t=mt(this,vt(n).call(this))).hiddenText={},t.input={},t}return pt(n,g),_t(n,[{key:"componentDidMount",value:function(){this.input.current.addEventListener("textInput",this.onTextInput.bind(this))}},{key:"componentDidUpdate",value:function(){this.updateHiddenText()}}]),_t(n,[{key:"onInput",value:function(t){var n,e=gt(t.target.value.split(/[.,]/),2),i=e[0],r=e[1],o=void 0===r?"":r,u=parseFloat(t.target.value);if(t.target.validity.valid&&!/^0./.test(i)&&o.length<=2?u===this.context.amount||(n=isNaN(u)?null:(this.props.setAmount||function(t){return t})(Math.min(u,this.props.max)),Is(function(t){return dt({},t,{amount:n,exchangeDisabled:As(Ts(t.sourcePocket,t.destinationPocket,t.rates.length),n)})})):t.target.value=this.props.value,"Backspace"===this.prevKey&&(this.prevInputValue||"").startsWith(t.target.value)&&t.target.value){var s=t.target.value;t.target.value="0".concat(s),t.target.value=s}this.updateHiddenText(),this.prevInputValue=t.target.value}},{key:"onKeyDown",value:function(t){this.prevKey=8===t.which?"Backspace":t.key}},{key:"onTextInput",value:function(t){this.prevKey=t.data}},{key:"render",value:function(t){var n=this;return u("span",{class:"CurrencyInput"},u("span",null,t.prefix,u("span",{ref:this.hiddenText})),u("input",{min:"0",onInput:function(t){return n.onInput(t)},onKeyDown:function(t){return n.onKeyDown(t)},ref:this.input,step:"any",tabindex:t.tabindex,type:"number",value:this.input.current&&parseFloat(this.input.current.value)===t.value?this.input.current.value:t.value}))}},{key:"updateHiddenText",value:function(){this.hiddenText.current.textContent="".concat(this.input.current.value).concat(![",","."].includes(this.prevKey)||this.hiddenText.current.textContent.includes(",")||this.hiddenText.current.textContent.includes(".")?"":".")}}]),n}(),Ns=function(r,o,u){return function(t){function n(){return ht(this,n),mt(this,vt(n).apply(this,arguments))}return pt(n,g),_t(n,[{key:"render",value:function(t,n,e){var i=r(t,e);return this.cache=i?this.cache||{}:o(t,e),u(dt({},t,this.cache,{hidden:i}),e)}}]),n}()},Ms=pn(!0);me(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,n=this._t,e=this._i;return e>=n.length?{value:void 0,done:!0}:(t=Ms(n,e),this._i+=t.length,{value:t,done:!1})});var Ds=t(function(t){var e=tt("meta"),n=z.f,i=0,r=Object.isExtensible||function(){return!0},o=!F(function(){return r(Object.preventExtensions({}))}),u=function(t){n(t,e,{value:{i:"O"+ ++i,w:{}}})},s=t.exports={KEY:e,NEED:!1,fastKey:function(t,n){if(!S(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!Q(t,e)){if(!r(t))return"F";if(!n)return"E";u(t)}return t[e].i},getWeak:function(t,n){if(!Q(t,e)){if(!r(t))return!0;if(!n)return!1;u(t)}return t[e].w},onFreeze:function(t){return o&&s.NEED&&r(t)&&!Q(t,e)&&u(t),t}}}),js=(Ds.KEY,Ds.NEED,Ds.fastKey,Ds.getWeak,Ds.onFreeze,function(t,n){if(!S(t)||t._t!==n)throw TypeError("Incompatible receiver, "+n+" required!");return t}),$s=z.f,Fs=Ds.fastKey,Rs=R?"_s":"size",Us=function(t,n){var e,i=Fs(n);if("F"!==i)return t._i[i];for(e=t._f;e;e=e.n)if(e.k==n)return e},Ws={getConstructor:function(t,o,e,i){var r=t(function(t,n){$e(t,r,o,"_i"),t._t=o,t._i=ue(null),t._f=void 0,t._l=void 0,t[Rs]=0,null!=n&&Be(n,e,t[i],t)});return fi(r.prototype,{clear:function(){for(var t=js(this,o),n=t._i,e=t._f;e;e=e.n)e.r=!0,e.p&&(e.p=e.p.n=void 0),delete n[e.i];t._f=t._l=void 0,t[Rs]=0},delete:function(t){var n=js(this,o),e=Us(n,t);if(e){var i=e.n,r=e.p;delete n._i[e.i],e.r=!0,r&&(r.n=i),i&&(i.p=r),n._f==e&&(n._f=i),n._l==e&&(n._l=r),n[Rs]--}return!!e},forEach:function(t){js(this,o);for(var n,e=it(t,1<arguments.length?arguments[1]:void 0,3);n=n?n.n:this._f;)for(e(n.v,n.k,this);n&&n.r;)n=n.p},has:function(t){return!!Us(js(this,o),t)}}),R&&$s(r.prototype,"size",{get:function(){return js(this,o)[Rs]}}),r},def:function(t,n,e){var i,r,o=Us(t,n);return o?o.v=e:(t._l=o={i:r=Fs(n,!0),k:n,v:e,p:i=t._l,n:void 0,r:!1},t._f||(t._f=o),i&&(i.n=o),t[Rs]++,"F"!==r&&(t._i[r]=o)),t},getEntry:Us,setStrong:function(t,e,n){me(t,e,function(t,n){this._t=js(t,e),this._k=n,this._l=void 0},function(){for(var t=this,n=t._k,e=t._l;e&&e.r;)e=e.p;return t._t&&(t._l=e=e?e.n:t._t._f)?Qn(0,"keys"==n?e.k:"values"==n?e.v:[e.k,e.v]):(t._t=void 0,Qn(1))},n?"entries":"values",!n,!0),di(e)}},Hs=Object.getOwnPropertyDescriptor,Bs={f:R?Hs:function(t,n){if(t=qt(t),n=q(n,!0),B)try{return Hs(t,n)}catch(t){}if(Q(t,n))return G(!zn.f.call(t,n),t[n])}},qs=function(t,n){if(x(t),!S(n)&&null!==n)throw TypeError(n+": can't set as prototype!")},Ks={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,i){try{(i=it(Function.call,Bs.f(Object.prototype,"__proto__").set,2))(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,n){return qs(t,n),e?t.__proto__=n:i(t,n),t}}({},!1):void 0),check:qs}.set,zs=function(t,n,e){var i,r=n.constructor;return r!==e&&"function"==typeof r&&(i=r.prototype)!==e.prototype&&S(i)&&Ks&&Ks(t,i),t},Gs=(function(i,t,n,e,r,o){var u=E[i],s=u,a=r?"set":"add",c=s&&s.prototype,l={},h=function(t){var e=c[t];nt(c,t,"delete"==t?function(t){return!(o&&!S(t))&&e.call(this,0===t?0:t)}:"has"==t?function(t){return!(o&&!S(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return o&&!S(t)?void 0:e.call(this,0===t?0:t)}:"add"==t?function(t){return e.call(this,0===t?0:t),this}:function(t,n){return e.call(this,0===t?0:t,n),this})};if("function"==typeof s&&(o||c.forEach&&!F(function(){(new s).entries().next()}))){var f=new s,_=f[a](o?{}:-0,1)!=f,d=F(function(){f.has(1)}),p=Ei(function(t){new s(t)}),v=!o&&F(function(){for(var t=new s,n=5;n--;)t[a](n,n);return!t.has(-0)});p||(((s=t(function(t,n){$e(t,s,i);var e=zs(new u,t,s);return null!=n&&Be(n,r,e[a],e),e})).prototype=c).constructor=s),(d||v)&&(h("delete"),h("has"),r&&h("get")),(v||_)&&h(a),o&&c.clear&&delete c.clear}else s=e.getConstructor(t,i,r,a),fi(s.prototype,n),Ds.NEED=!0;ce(s,i),l[i]=s,ut(ut.G+ut.W+ut.F*(s!=u),l),o||e.setStrong(s,i,r)}("Map",function(t){return function(){return t(this,0<arguments.length?arguments[0]:void 0)}},{get:function(t){var n=Ws.getEntry(js(this,"Map"),t);return n&&n.v},set:function(t,n){return Ws.def(js(this,"Map"),0===t?0:t,n)}},Ws,!0),Wt(5)),Xs="find",Ys=!0;Xs in[]&&Array(1)[Xs](function(){Ys=!1}),ut(ut.P+ut.F*Ys,"Array",{find:function(t){return Gs(this,t,1<arguments.length?arguments[1]:void 0)}}),tn(Xs);var Qs,Js=function(t,n){return"USD"===n?1:(t.find(function(t){return t.currency===n})||{rate:NaN}).rate},Zs=new Map,ta=function(t,n,e){t!==Qs&&(Zs.clear(),Qs=t);var i="".concat(n,":").concat(e);if(Zs.has(i))return Zs.get(i);var r,o,u,s=(r=t,u=e,"USD"===(o=n)?Js(r,u):"USD"===u?1/Js(r,o):Js(r,u)*(1/Js(r,o)));return Zs.set(i,s),s},na=qn.concat("length","prototype"),ea={f:Object.getOwnPropertyNames||function(t){return Bn(t,na)}},ia="\t\n\v\f\r Â áá ââââââââââââ¯âã\u2028\u2029\ufeff",ra="["+ia+"]",oa=RegExp("^"+ra+ra+"*"),ua=RegExp(ra+ra+"*$"),sa=function(t,n,e){var i={},r=F(function(){return!!ia[t]()||"âÂ"!="âÂ"[t]()}),o=i[t]=r?n(aa):ia[t];e&&(i[e]=o),ut(ut.P+ut.F*r,"String",i)},aa=sa.trim=function(t,n){return t=String(Ot(t)),1&n&&(t=t.replace(oa,"")),2&n&&(t=t.replace(ua,"")),t},ca=sa,la=ea.f,ha=Bs.f,fa=z.f,_a=ca.trim,da="Number",pa=E[da],va=pa,ya=pa.prototype,ma=Ct(ue(ya))==da,ga="trim"in String.prototype,ba=function(t){var n=q(t,!1);if("string"==typeof n&&2<n.length){var e,i,r,o=(n=ga?n.trim():_a(n,3)).charCodeAt(0);if(43===o||45===o){if(88===(e=n.charCodeAt(2))||120===e)return NaN}else if(48===o){switch(n.charCodeAt(1)){case 66:case 98:i=2,r=49;break;case 79:case 111:i=8,r=55;break;default:return+n}for(var u,s=n.slice(2),a=0,c=s.length;a<c;a++)if((u=s.charCodeAt(a))<48||r<u)return NaN;return parseInt(s,i)}}return+n};if(!pa(" 0o1")||!pa("0b1")||pa("+0x1")){pa=function(t){var n=arguments.length<1?0:t,e=this;return e instanceof pa&&(ma?F(function(){ya.valueOf.call(e)}):Ct(e)!=da)?zs(new va(ba(n)),e,pa):ba(n)};for(var Ea,wa=R?la(va):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),Sa=0;wa.length>Sa;Sa++)Q(va,Ea=wa[Sa])&&!Q(pa,Ea)&&fa(pa,Ea,ha(va,Ea));(pa.prototype=ya).constructor=pa,nt(E,da,pa)}var xa=function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return Number("".concat(Math.round("".concat(t,"e+").concat(n)),"e-").concat(n))},ka=Ns(function(t,n){return n.ratesHidden},function(t,n){var e=ta(n.rates,n.sourcePocket.currency,t.pocket.currency);return{rate:e,value:n.amount&&xa(e*n.amount,2)}},function(n,t){return u("span",{class:"DestinationInput animated".concat(n.hidden?" hidden":"")},u(Ls,{max:n.rate&&n.rate*t.sourcePocket.sum,prefix:null===t.amount?"":"+",setAmount:function(t){return 1/n.rate*t},tabindex:"-1",value:n.value}))}),Aa=function(t,n){var e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return t.toLocaleString("en-US",dt({currency:n,style:"currency"},e))},Ta=function(t,n,e){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:void 0;return"".concat(Aa(1,n,{maximumFractionDigits:0,minimumFractionDigits:0})," = ").concat(Aa(ta(t,n,e),e,i))},Ca=Ns(function(t,n){return n.ratesHidden},function(t,n){return{text:Ta(n.rates,t.pocket.currency,n.sourcePocket.currency)}},function(t){return u("span",{class:"DestinationRate animated".concat(t.hidden?" hidden":"")},t.text)}),Pa=function(t,n){return u("span",{class:"SourceInput"},u(Ls,{max:t.pocket.sum,prefix:null===n.amount?"":"-",tabindex:"-1",value:n.amount&&xa(n.amount,2)}))},Oa=function(t){return u("div",{class:"ExchangeSlide"},u("div",null,u("div",{class:"ExchangeSlide-currency"},t.pocket.currency),"source"===t.type?u(Pa,{pocket:t.pocket}):u(ka,{pocket:t.pocket})),u("div",null,u("div",null,"You have ",Aa(t.pocket.sum,t.pocket.currency)),"destination"===t.type&&u(Ca,{pocket:t.pocket})))},Va=Wt(0),Ia=Ht([].forEach,!0);ut(ut.P+ut.F*!Ia,"Array",{forEach:function(t){return Va(this,t,arguments[1])}});var La=function(t){function n(){var t;return ht(this,n),(t=mt(this,vt(n).call(this))).pagination={},t.slides={},t}return pt(n,g),_t(n,[{key:"activatePage",value:function(t){var n=this.pagination.current.children[this.normalizeIndex(t)];bt(this.pagination.current.querySelectorAll(".active")).forEach(function(t){return t===n||t.classList.remove("active")}),n&&n.classList.add("active"),void 0===this.index||this.pagination.current.classList.add("initialized")}},{key:"componentDidMount",value:function(){var s=this;this.listeners=[["mousemove",this.onDragMove],["mouseup",this.onDragStop]].map(function(t){var n=gt(t,2);return[n[0],n[1].bind(s)]}),this.listeners.forEach(function(t){return addEventListener.apply(void 0,bt(t))}),[["mousedown",this.onDragStart],["touchend",this.onDragStop],["touchmove",this.onDragMove],["touchstart",this.onDragStart]].forEach(function(t){var n,e,i=Et(e=t)||wt(e)||St(),r=i[0],o=i[1],u=i.slice(2);return(n=s.slides.current).addEventListener.apply(n,[r,o.bind(s)].concat(bt(u)))}),this.selectSlide(this.props.index),this.props.onMount&&this.props.onMount(this.props.index,this.slides.current.children[this.props.index+1])}},{key:"componentWillReceiveProps",value:function(t){var n=Math.max(Math.min(t.index,this.props.children.length-1),0);n===this.index||this.startAnimation(n)}},{key:"componentWillUnmount",value:function(){this.listeners.forEach(function(t){return removeEventListener.apply(void 0,bt(t))})}}]),_t(n,[{key:"eventClientX",value:function(t){return(t.touches?t.touches[0]:t).clientX}},{key:"nextSlideIndex",value:function(t){var n=this.slidesOffset();return n-t<-100?this.index+1:100<n-t?this.index-1:this.index}},{key:"normalizeIndex",value:function(t){return t<0?this.props.children.length-1:t>this.props.children.length-1?0:t}},{key:"onAnimationTimeout",value:function(t){this.slides.current.classList.remove("animating"),this.selectSlide(this.normalizeIndex(t))}},{key:"onDragMove",value:function(t){("mousemove"===t.type&&this.dragging||"touchmove"===t.type)&&(t.preventDefault(),this.translateToPointer(t),this.clientX=this.eventClientX(t))}},{key:"onDragStart",value:function(t){t.preventDefault(),this.clientX=this.eventClientX(t),this.dragging=!0,this.slides.current.classList.contains("animating")||(this.prevSlidesOffset=this.slidesOffset()),this.translateToPointer(t),this.stopAnimation()}},{key:"onDragStop",value:function(t){("mouseup"===t.type&&this.dragging||"touchend"===t.type)&&(this.dragging=!1,this.prevSlidesOffset===this.slidesOffset()?t.target.focus():this.startAnimation(this.nextSlideIndex(this.prevSlidesOffset)))}},{key:"render",value:function(n){var e=this;return u("div",{class:"Slider"},u("div",{ref:this.slides,style:{width:"".concat(100*(n.children.length+2),"%")}},[].concat(bt(n.children.length?[n.children[n.children.length-1]]:[]),bt(n.children),bt(n.children.length?[n.children[0]]:[])).map(function(t){return u("div",{style:{width:"".concat(100/(n.children.length+2),"%")}},t)})),u("nav",{ref:this.pagination},n.children.map(function(t,n){return[u("a",{onClick:function(){return e.startAnimation(n)}},n+1)," "]})))}},{key:"selectSlide",value:function(t){t!==this.index&&(this.activatePage(t),this.translateToSlide(t),void 0===this.index||this.props.onSlide&&this.props.onSlide(t,this.slides.current.children[t+1]),this.index=t)}},{key:"slidesOffset",value:function(){var t=getComputedStyle(this.slides.current);return new(window.DOMMatrix||window.CSSMatrix||window.WebKitCSSMatrix||window.MSCSSMatrix)(t.transform||t.webkitTransform).m41}},{key:"startAnimation",value:function(t){var n=this;this.activatePage(t),clearTimeout(this.animationTimeout),this.animationTimeout=setTimeout(function(){return n.onAnimationTimeout(t)},300),this.slides.current.classList.add("animating"),this.translateToSlide(t)}},{key:"stopAnimation",value:function(){this.slides.current.classList.remove("animating"),clearTimeout(this.animationTimeout)}},{key:"translateSlides",value:function(t){this.slides.current.style.transform=this.slides.current.style.webkitTransform="translateX(".concat(t,")")}},{key:"translateToPointer",value:function(t){this.translateSlides("".concat(this.slidesOffset()-(this.clientX-this.eventClientX(t)),"px"))}},{key:"translateToSlide",value:function(t){return this.translateSlides("".concat(-100/(this.props.children.length+2)*(t+1),"%"))}}]),n}(),Na=function(t){function n(){var t;return ht(this,n),(t=mt(this,vt(n).call(this))).destination={},t.source={},t}return pt(n,g),_t(n,[{key:"componentDidMount",value:function(){this.destination.current.base.addEventListener("focus",this.onFocus.bind(this,"destination"),!0),this.source.current.base.addEventListener("focus",this.onFocus.bind(this,"source"),!0)}}]),_t(n,[{key:"focusSlideInput",value:function(t,n){var e=n!==this.focusedInputType&&this.focusedInputType?this.focusedInput:t.querySelector("input");if(e){var i=t.parentElement.parentElement,r=i.scrollLeft,o=i.scrollTop;e.focus({preventScroll:!0});var u=[r,o];t.parentElement.parentElement.scrollLeft=u[0],t.parentElement.parentElement.scrollTop=u[1]}}},{key:"onFocus",value:function(t,n){var e;"INPUT"===n.target.tagName&&(e=[n.target,t],this.focusedInput=e[0],this.focusedInputType=e[1])}},{key:"render",value:function(t,n,e){var i=this;return u("div",{class:"ExchangeSliders"},u(La,{index:e.pockets.indexOf(e.sourcePocket),onMount:function(t,n){return i.focusSlideInput(n,"source")},onSlide:function(t,n){Ps(e.pockets[t]),i.focusSlideInput(n,"source")},ref:this.source},e.pockets.map(function(t){return u(Oa,{pocket:t,type:"source"})})),u(La,{index:e.pockets.indexOf(e.destinationPocket),onSlide:function(t,n){Cs(e.pockets[t]),i.focusSlideInput(n,"destination")},ref:this.destination},e.pockets.map(function(t){return u(Oa,{pocket:t,type:"destination"})})))}}]),n}(),Ma=function(t,r){return u("select",{class:"RateSelect",onChange:function(t){var n=gt(t.target.value.split(":"),2),e=n[0],i=n[1];Ps(r.pockets.find(function(t){return t.currency===e})),Cs(r.pockets.find(function(t){return t.currency===i}))}},!r.rates.length||r.pockets.map(function(n){return r.pockets.map(function(t){return t.currency===n.currency||u("option",{selected:t===r.destinationPocket&&n===r.sourcePocket,value:"".concat(n.currency,":").concat(t.currency)},Ta(r.rates,n.currency,t.currency,{minimumFractionDigits:4}))})}))},Da=Ns(function(t,n){return n.ratesHidden},function(t,n){return{text:Ta(n.rates,n.sourcePocket.currency,n.destinationPocket.currency,{minimumFractionDigits:4})}},function(t){return u("span",{class:"RateDropdown animated".concat(t.hidden?" hidden":"")},u("span",{class:"button"},t.text),u(Ma,null))}),ja=function(t,n){return u("nav",{class:"Header"},u("div",null,u("button",{onClick:function(){return t.destroy()}},"Cancel")),u("div",null,u(Da,null)),u("div",null,u("button",{class:"animated",disabled:n.exchangeDisabled||n.exchangeLoading,onClick:function(){return t.exchange()}},"Exchange")))},$a=function(t){function n(){return ht(this,n),mt(this,vt(n).apply(this,arguments))}return pt(n,g),_t(n,[{key:"componentDidMount",value:function(){var t=this;this.progressInterval=setInterval(function(){return t.updateProgress(t.progress+.01*(1-t.progress))},10),this.updateProgress(0)}},{key:"componentWillReceiveProps",value:function(t){t.visible||this.updateProgress(1)}},{key:"componentWillUnmount",value:function(){clearInterval(this.progressInterval)}},{key:"render",value:function(t){return u("div",{class:"LoadingIndicator animated".concat(t.visible?"":" hidden")})}},{key:"updateProgress",value:function(t){this.progress=t,this.base.style.transform=this.base.style.webkitTransform="translateX(".concat(100*t-100,"%)"),.9999<this.progress&&clearInterval(this.progressInterval)}}]),n}(),Fa=function(t){function n(){return ht(this,n),mt(this,vt(n).apply(this,arguments))}return pt(n,g),_t(n,[{key:"componentDidMount",value:function(){var t=this;this.onKeyUp=this.onKeyUp.bind(this),addEventListener("keyup",this.onKeyUp),this.fetchRates(),this.fetchRatesInterval=setInterval(function(){return t.fetchRates()},1e4)}},{key:"componentWillUnmount",value:function(){removeEventListener("keyup",this.onKeyUp),clearInterval(this.fetchRatesInterval),this.fetchRatesAbort.abort()}},{key:"destroy",value:function(){this.base.classList.add("hidden"),setTimeout(this.props.destroy,300)}},{key:"exchange",value:function(){var t,n,e,i,r=this;this.context.exchangeDisabled||(t=xa(this.context.amount,2),n=ta(this.context.rates,this.context.sourcePocket.currency,this.context.destinationPocket.currency),e=this.context.sourcePocket.currency,i=this.context.destinationPocket.currency,"undefined"!=typeof process&&process.env.JEST_WORKER_ID||console.log("exchange:",t,n,e,i),Is(function(t){return dt({},t,{exchangeLoading:!0})}),new Promise(function(t){return setTimeout(t,1e3)}).then(function(){return Is(function(t){return dt({},t,{exchangeLoading:!1})})})).then(function(){return r.destroy()})}},{key:"fetchRates",value:function(){return this.fetchRatesAbort&&this.fetchRatesAbort.abort(),this.fetchRatesAbort="undefined"==typeof AbortController?{abort:function(){}}:new AbortController,function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:void 0;return Is(function(t){return dt({},t,{ratesLoading:!0})}),(Array.isArray(t)?t:[t]).reduce(function(t,n){return t.then(function(t){return t||ks(n,e)})},Promise.resolve()).then(function(t){return t||Promise.reject()})}(this.props.ratesURL,this.fetchRatesAbort.signal)}},{key:"onKeyUp",value:function(t){"Enter"===t.key?this.exchange():"Escape"===t.key&&this.destroy()}},{key:"render",value:function(t,n,e){var i=this;return u("div",{class:"App animated"},u($a,{visible:e.ratesLoading&&!e.rates.length}),u(At,{visible:e.ratesError},"Failed to update rates ",u("button",{onClick:function(){return i.fetchRates()}},"Retry")),u(ja,{destroy:function(){return i.destroy()},exchange:function(){return i.exchange()}}),u(Na,null))}}]),n}(),Ra=function(t){function n(){return ht(this,n),mt(this,vt(n).apply(this,arguments))}return pt(n,g),_t(n,[{key:"componentWillMount",value:function(){var n,e=this;Vs(function(t){return e.setState(t)}),n=this.props.pockets,Is(function(t){return dt({},t,{pockets:n})}),Cs(this.props.pockets[1===this.props.pockets.length?0:1]),Ps(this.props.pockets[0])}},{key:"getChildContext",value:function(){return this.state}},{key:"render",value:function(t){return u("div",null,t.children)}}]),n}();return function(t){var n=b(u(Ra,t,u(Fa,{destroy:function(){b(null,t.element,n),t.onDestroy&&t.onDestroy()},ratesURL:t.ratesURL})),t.element)}}();
//# sourceMappingURL=exchange-widget.min.js.map
